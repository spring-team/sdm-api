{"version":3,"file":"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/util/webhook/sendFingerprint.ts","sources":["/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/util/webhook/sendFingerprint.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;AAEH,kEAAoD;AAGpD,iCAA0B;AAE1B;;;;;;GAMG;AACH,yBAAgC,EAAiB,EAAE,WAAwB,EAAE,IAAY;IACrF,MAAM,GAAG,GAAG,0DAA0D,IAAI,EAAE,CAAC;IAC7E,MAAM,OAAO,GAAG;QACZ,MAAM,EAAE;YACJ,QAAQ,EAAE,EAAE,CAAC,YAAY;YACzB,KAAK,EAAE,EAAE,CAAC,KAAK;YACf,IAAI,EAAE,EAAE,CAAC,IAAI;YACb,GAAG,EAAE,EAAE,CAAC,GAAG;SACd;QACD,YAAY,EAAE,CAAC,WAAW,CAAC;KAC9B,CAAC;IACF,0BAAM,CAAC,IAAI,CAAC,kCAAkC,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC;IAC9D,OAAO,eAAK,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC;SAC1B,KAAK,CAAC,GAAG,CAAC,EAAE;QACT,OAAO,OAAO,CAAC,MAAM,CAAC,uBAAuB,GAAG,KAAK,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;IACxE,CAAC,CAAC,CAAC;AACX,CAAC;AAhBD,0CAgBC","sourcesContent":["/*\n * Copyright Â© 2018 Atomist, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { logger } from \"@atomist/automation-client\";\nimport { RemoteRepoRef } from \"@atomist/automation-client/operations/common/RepoId\";\nimport { Fingerprint } from \"@atomist/automation-client/project/fingerprint/Fingerprint\";\nimport axios from \"axios\";\n\n/**\n * Publish the given fingerprint to Atomist in the given team\n * @param {GitHubRepoRef} id id of repo the fingerprint applies to\n * @param {Fingerprint} fingerprint fingerprint to publish\n * @param {string} team team to which this fingerprint applies\n * @return {Promise<any>}\n */\nexport function sendFingerprint(id: RemoteRepoRef, fingerprint: Fingerprint, team: string): Promise<any> {\n    const url = `https://webhook.atomist.com/atomist/fingerprints/teams/${team}`;\n    const payload = {\n        commit: {\n            provider: id.providerType,\n            owner: id.owner,\n            repo: id.repo,\n            sha: id.sha,\n        },\n        fingerprints: [fingerprint],\n    };\n    logger.info(\"Sending up fingerprint to %s: %j\", url, payload);\n    return axios.post(url, payload)\n        .catch(err => {\n            return Promise.reject(`Axios error calling ${url}: ${err.message}`);\n        });\n}\n"]}