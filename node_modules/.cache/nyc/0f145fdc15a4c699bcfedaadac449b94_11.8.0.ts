"use strict";/*
 * Copyright Â© 2018 Atomist, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cov_1hsrl29obp=function(){var path="/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/blueprint/softwareDeliveryMachineTest.ts",hash="1da980d2fb0ec68442cf6d8f1f7947a1cc8cdb62",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/blueprint/softwareDeliveryMachineTest.ts",statementMap:{"0":{start:{line:17,column:16},end:{line:24,column:1}},"1":{start:{line:18,column:4},end:{line:23,column:7}},"2":{start:{line:19,column:36},end:{line:19,column:97}},"3":{start:{line:19,column:42},end:{line:19,column:70}},"4":{start:{line:19,column:85},end:{line:19,column:95}},"5":{start:{line:20,column:35},end:{line:20,column:100}},"6":{start:{line:20,column:41},end:{line:20,column:73}},"7":{start:{line:20,column:88},end:{line:20,column:98}},"8":{start:{line:21,column:32},end:{line:21,column:149}},"9":{start:{line:21,column:97},end:{line:21,column:119}},"10":{start:{line:22,column:8},end:{line:22,column:78}},"11":{start:{line:25,column:0},end:{line:25,column:62}},"12":{start:{line:26,column:18},end:{line:26,column:60}},"13":{start:{line:27,column:22},end:{line:27,column:83}},"14":{start:{line:28,column:26},end:{line:28,column:95}},"15":{start:{line:29,column:36},end:{line:29,column:74}},"16":{start:{line:30,column:23},end:{line:30,column:85}},"17":{start:{line:31,column:26},end:{line:31,column:91}},"18":{start:{line:32,column:28},end:{line:32,column:88}},"19":{start:{line:33,column:15},end:{line:33,column:38}},"20":{start:{line:34,column:19},end:{line:34,column:62}},"21":{start:{line:35,column:42},end:{line:35,column:112}},"22":{start:{line:36,column:32},end:{line:36,column:106}},"23":{start:{line:37,column:27},end:{line:37,column:93}},"24":{start:{line:38,column:24},end:{line:38,column:96}},"25":{start:{line:39,column:31},end:{line:39,column:94}},"26":{start:{line:40,column:27},end:{line:40,column:60}},"27":{start:{line:41,column:0},end:{line:107,column:3}},"28":{start:{line:42,column:4},end:{line:61,column:7}},"29":{start:{line:43,column:8},end:{line:50,column:12}},"30":{start:{line:43,column:38},end:{line:50,column:10}},"31":{start:{line:44,column:24},end:{line:46,column:49}},"32":{start:{line:47,column:12},end:{line:47,column:49}},"33":{start:{line:48,column:25},end:{line:48,column:117}},"34":{start:{line:48,column:52},end:{line:48,column:86}},"35":{start:{line:48,column:98},end:{line:48,column:116}},"36":{start:{line:49,column:12},end:{line:49,column:52}},"37":{start:{line:51,column:8},end:{line:60,column:12}},"38":{start:{line:51,column:52},end:{line:60,column:10}},"39":{start:{line:52,column:23},end:{line:52,column:96}},"40":{start:{line:52,column:29},end:{line:52,column:96}},"41":{start:{line:52,column:76},end:{line:52,column:93}},"42":{start:{line:53,column:24},end:{line:55,column:49}},"43":{start:{line:56,column:12},end:{line:56,column:41}},"44":{start:{line:57,column:12},end:{line:57,column:49}},"45":{start:{line:58,column:25},end:{line:58,column:117}},"46":{start:{line:58,column:52},end:{line:58,column:86}},"47":{start:{line:58,column:98},end:{line:58,column:116}},"48":{start:{line:59,column:12},end:{line:59,column:52}},"49":{start:{line:62,column:4},end:{line:83,column:7}},"50":{start:{line:63,column:8},end:{line:69,column:12}},"51":{start:{line:63,column:34},end:{line:69,column:10}},"52":{start:{line:64,column:24},end:{line:66,column:32}},"53":{start:{line:67,column:22},end:{line:67,column:51}},"54":{start:{line:68,column:12},end:{line:68,column:70}},"55":{start:{line:70,column:8},end:{line:75,column:12}},"56":{start:{line:70,column:43},end:{line:75,column:10}},"57":{start:{line:71,column:24},end:{line:72,column:63}},"58":{start:{line:73,column:22},end:{line:73,column:51}},"59":{start:{line:74,column:12},end:{line:74,column:96}},"60":{start:{line:76,column:8},end:{line:82,column:12}},"61":{start:{line:76,column:50},end:{line:82,column:10}},"62":{start:{line:77,column:28},end:{line:77,column:111}},"63":{start:{line:78,column:24},end:{line:79,column:63}},"64":{start:{line:78,column:205},end:{line:78,column:300}},"65":{start:{line:78,column:252},end:{line:78,column:297}},"66":{start:{line:80,column:22},end:{line:80,column:58}},"67":{start:{line:81,column:12},end:{line:81,column:96}},"68":{start:{line:84,column:4},end:{line:106,column:7}},"69":{start:{line:85,column:8},end:{line:89,column:12}},"70":{start:{line:85,column:34},end:{line:89,column:10}},"71":{start:{line:86,column:24},end:{line:87,column:63}},"72":{start:{line:86,column:205},end:{line:86,column:300}},"73":{start:{line:86,column:252},end:{line:86,column:297}},"74":{start:{line:88,column:12},end:{line:88,column:37}},"75":{start:{line:90,column:8},end:{line:95,column:12}},"76":{start:{line:90,column:35},end:{line:95,column:10}},"77":{start:{line:91,column:24},end:{line:92,column:63}},"78":{start:{line:91,column:205},end:{line:91,column:300}},"79":{start:{line:91,column:252},end:{line:91,column:297}},"80":{start:{line:93,column:12},end:{line:93,column:69}},"81":{start:{line:94,column:12},end:{line:94,column:38}},"82":{start:{line:96,column:8},end:{line:103,column:12}},"83":{start:{line:96,column:32},end:{line:103,column:10}},"84":{start:{line:97,column:24},end:{line:98,column:63}},"85":{start:{line:97,column:205},end:{line:97,column:300}},"86":{start:{line:97,column:252},end:{line:97,column:297}},"87":{start:{line:99,column:12},end:{line:101,column:118}},"88":{start:{line:102,column:12},end:{line:102,column:38}},"89":{start:{line:105,column:8},end:{line:105,column:39}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:17,column:44},end:{line:17,column:45}},loc:{start:{line:17,column:89},end:{line:24,column:1}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:36},end:{line:18,column:37}},loc:{start:{line:18,column:63},end:{line:23,column:5}},line:18},"2":{name:"fulfilled",decl:{start:{line:19,column:17},end:{line:19,column:26}},loc:{start:{line:19,column:34},end:{line:19,column:99}},line:19},"3":{name:"rejected",decl:{start:{line:20,column:17},end:{line:20,column:25}},loc:{start:{line:20,column:33},end:{line:20,column:102}},line:20},"4":{name:"step",decl:{start:{line:21,column:17},end:{line:21,column:21}},loc:{start:{line:21,column:30},end:{line:21,column:151}},line:21},"5":{name:"(anonymous_5)",decl:{start:{line:21,column:76},end:{line:21,column:77}},loc:{start:{line:21,column:95},end:{line:21,column:121}},line:21},"6":{name:"(anonymous_6)",decl:{start:{line:41,column:33},end:{line:41,column:34}},loc:{start:{line:41,column:39},end:{line:107,column:1}},line:41},"7":{name:"(anonymous_7)",decl:{start:{line:42,column:37},end:{line:42,column:38}},loc:{start:{line:42,column:43},end:{line:61,column:5}},line:42},"8":{name:"(anonymous_8)",decl:{start:{line:43,column:32},end:{line:43,column:33}},loc:{start:{line:43,column:38},end:{line:50,column:10}},line:43},"9":{name:"(anonymous_9)",decl:{start:{line:43,column:70},end:{line:43,column:71}},loc:{start:{line:43,column:83},end:{line:50,column:9}},line:43},"10":{name:"(anonymous_10)",decl:{start:{line:48,column:47},end:{line:48,column:48}},loc:{start:{line:48,column:52},end:{line:48,column:86}},line:48},"11":{name:"(anonymous_11)",decl:{start:{line:48,column:93},end:{line:48,column:94}},loc:{start:{line:48,column:98},end:{line:48,column:116}},line:48},"12":{name:"(anonymous_12)",decl:{start:{line:51,column:46},end:{line:51,column:47}},loc:{start:{line:51,column:52},end:{line:60,column:10}},line:51},"13":{name:"(anonymous_13)",decl:{start:{line:51,column:84},end:{line:51,column:85}},loc:{start:{line:51,column:97},end:{line:60,column:9}},line:51},"14":{name:"(anonymous_14)",decl:{start:{line:52,column:23},end:{line:52,column:24}},loc:{start:{line:52,column:29},end:{line:52,column:96}},line:52},"15":{name:"(anonymous_15)",decl:{start:{line:52,column:61},end:{line:52,column:62}},loc:{start:{line:52,column:74},end:{line:52,column:95}},line:52},"16":{name:"(anonymous_16)",decl:{start:{line:58,column:47},end:{line:58,column:48}},loc:{start:{line:58,column:52},end:{line:58,column:86}},line:58},"17":{name:"(anonymous_17)",decl:{start:{line:58,column:93},end:{line:58,column:94}},loc:{start:{line:58,column:98},end:{line:58,column:116}},line:58},"18":{name:"(anonymous_18)",decl:{start:{line:62,column:38},end:{line:62,column:39}},loc:{start:{line:62,column:44},end:{line:83,column:5}},line:62},"19":{name:"(anonymous_19)",decl:{start:{line:63,column:28},end:{line:63,column:29}},loc:{start:{line:63,column:34},end:{line:69,column:10}},line:63},"20":{name:"(anonymous_20)",decl:{start:{line:63,column:66},end:{line:63,column:67}},loc:{start:{line:63,column:79},end:{line:69,column:9}},line:63},"21":{name:"(anonymous_21)",decl:{start:{line:70,column:37},end:{line:70,column:38}},loc:{start:{line:70,column:43},end:{line:75,column:10}},line:70},"22":{name:"(anonymous_22)",decl:{start:{line:70,column:75},end:{line:70,column:76}},loc:{start:{line:70,column:88},end:{line:75,column:9}},line:70},"23":{name:"(anonymous_23)",decl:{start:{line:76,column:44},end:{line:76,column:45}},loc:{start:{line:76,column:50},end:{line:82,column:10}},line:76},"24":{name:"(anonymous_24)",decl:{start:{line:76,column:82},end:{line:76,column:83}},loc:{start:{line:76,column:95},end:{line:82,column:9}},line:76},"25":{name:"(anonymous_25)",decl:{start:{line:78,column:197},end:{line:78,column:198}},loc:{start:{line:78,column:205},end:{line:78,column:300}},line:78},"26":{name:"(anonymous_26)",decl:{start:{line:78,column:237},end:{line:78,column:238}},loc:{start:{line:78,column:250},end:{line:78,column:299}},line:78},"27":{name:"(anonymous_27)",decl:{start:{line:84,column:29},end:{line:84,column:30}},loc:{start:{line:84,column:35},end:{line:106,column:5}},line:84},"28":{name:"(anonymous_28)",decl:{start:{line:85,column:28},end:{line:85,column:29}},loc:{start:{line:85,column:34},end:{line:89,column:10}},line:85},"29":{name:"(anonymous_29)",decl:{start:{line:85,column:66},end:{line:85,column:67}},loc:{start:{line:85,column:79},end:{line:89,column:9}},line:85},"30":{name:"(anonymous_30)",decl:{start:{line:86,column:197},end:{line:86,column:198}},loc:{start:{line:86,column:205},end:{line:86,column:300}},line:86},"31":{name:"(anonymous_31)",decl:{start:{line:86,column:237},end:{line:86,column:238}},loc:{start:{line:86,column:250},end:{line:86,column:299}},line:86},"32":{name:"(anonymous_32)",decl:{start:{line:90,column:29},end:{line:90,column:30}},loc:{start:{line:90,column:35},end:{line:95,column:10}},line:90},"33":{name:"(anonymous_33)",decl:{start:{line:90,column:67},end:{line:90,column:68}},loc:{start:{line:90,column:80},end:{line:95,column:9}},line:90},"34":{name:"(anonymous_34)",decl:{start:{line:91,column:197},end:{line:91,column:198}},loc:{start:{line:91,column:205},end:{line:91,column:300}},line:91},"35":{name:"(anonymous_35)",decl:{start:{line:91,column:237},end:{line:91,column:238}},loc:{start:{line:91,column:250},end:{line:91,column:299}},line:91},"36":{name:"(anonymous_36)",decl:{start:{line:96,column:26},end:{line:96,column:27}},loc:{start:{line:96,column:32},end:{line:103,column:10}},line:96},"37":{name:"(anonymous_37)",decl:{start:{line:96,column:64},end:{line:96,column:65}},loc:{start:{line:96,column:77},end:{line:103,column:9}},line:96},"38":{name:"(anonymous_38)",decl:{start:{line:97,column:197},end:{line:97,column:198}},loc:{start:{line:97,column:205},end:{line:97,column:300}},line:97},"39":{name:"(anonymous_39)",decl:{start:{line:97,column:237},end:{line:97,column:238}},loc:{start:{line:97,column:250},end:{line:97,column:299}},line:97}},branchMap:{"0":{loc:{start:{line:17,column:16},end:{line:24,column:1}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:21}},{start:{line:17,column:25},end:{line:17,column:39}},{start:{line:17,column:44},end:{line:24,column:1}}],line:17},"1":{loc:{start:{line:18,column:16},end:{line:18,column:34}},type:"binary-expr",locations:[{start:{line:18,column:16},end:{line:18,column:17}},{start:{line:18,column:22},end:{line:18,column:33}}],line:18},"2":{loc:{start:{line:21,column:32},end:{line:21,column:148}},type:"cond-expr",locations:[{start:{line:21,column:46},end:{line:21,column:67}},{start:{line:21,column:70},end:{line:21,column:148}}],line:21},"3":{loc:{start:{line:22,column:51},end:{line:22,column:67}},type:"binary-expr",locations:[{start:{line:22,column:51},end:{line:22,column:61}},{start:{line:22,column:65},end:{line:22,column:67}}],line:22}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var __awaiter=(cov_1hsrl29obp.s[0]++,(cov_1hsrl29obp.b[0][0]++,this)&&(cov_1hsrl29obp.b[0][1]++,this.__awaiter)||(cov_1hsrl29obp.b[0][2]++,function(thisArg,_arguments,P,generator){cov_1hsrl29obp.f[0]++;cov_1hsrl29obp.s[1]++;return new((cov_1hsrl29obp.b[1][0]++,P)||(cov_1hsrl29obp.b[1][1]++,P=Promise))(function(resolve,reject){cov_1hsrl29obp.f[1]++;function fulfilled(value){cov_1hsrl29obp.f[2]++;cov_1hsrl29obp.s[2]++;try{cov_1hsrl29obp.s[3]++;step(generator.next(value));}catch(e){cov_1hsrl29obp.s[4]++;reject(e);}}function rejected(value){cov_1hsrl29obp.f[3]++;cov_1hsrl29obp.s[5]++;try{cov_1hsrl29obp.s[6]++;step(generator["throw"](value));}catch(e){cov_1hsrl29obp.s[7]++;reject(e);}}function step(result){cov_1hsrl29obp.f[4]++;cov_1hsrl29obp.s[8]++;result.done?(cov_1hsrl29obp.b[2][0]++,resolve(result.value)):(cov_1hsrl29obp.b[2][1]++,new P(function(resolve){cov_1hsrl29obp.f[5]++;cov_1hsrl29obp.s[9]++;resolve(result.value);}).then(fulfilled,rejected));}cov_1hsrl29obp.s[10]++;step((generator=generator.apply(thisArg,(cov_1hsrl29obp.b[3][0]++,_arguments)||(cov_1hsrl29obp.b[3][1]++,[]))).next());});}));cov_1hsrl29obp.s[11]++;Object.defineProperty(exports,"__esModule",{value:true});const goalDsl_1=(cov_1hsrl29obp.s[12]++,require("../../src/blueprint/dsl/goalDsl"));const commonGoals_1=(cov_1hsrl29obp.s[13]++,require("../../src/common/delivery/goals/common/commonGoals"));const commonPushTests_1=(cov_1hsrl29obp.s[14]++,require("../../src/common/listener/support/pushtest/commonPushTests"));const sdmGoalImplementationTest_1=(cov_1hsrl29obp.s[15]++,require("./sdmGoalImplementationTest"));const InMemoryFile_1=(cov_1hsrl29obp.s[16]++,require("@atomist/automation-client/project/mem/InMemoryFile"));const InMemoryProject_1=(cov_1hsrl29obp.s[17]++,require("@atomist/automation-client/project/mem/InMemoryProject"));const constructionUtils_1=(cov_1hsrl29obp.s[18]++,require("@atomist/automation-client/util/constructionUtils"));const assert=(cov_1hsrl29obp.s[19]++,require("power-assert"));const buildDsl_1=(cov_1hsrl29obp.s[20]++,require("../../src/blueprint/dsl/buildDsl"));const ConcreteSoftwareDeliveryMachine_1=(cov_1hsrl29obp.s[21]++,require("../../src/blueprint/support/ConcreteSoftwareDeliveryMachine"));const NpmDetectBuildMapping_1=(cov_1hsrl29obp.s[22]++,require("../../src/common/delivery/build/local/npm/NpmDetectBuildMapping"));const httpServiceGoals_1=(cov_1hsrl29obp.s[23]++,require("../../src/common/delivery/goals/common/httpServiceGoals"));const nodePushTests_1=(cov_1hsrl29obp.s[24]++,require("../../src/common/listener/support/pushtest/node/nodePushTests"));const executeAutofixesTest_1=(cov_1hsrl29obp.s[25]++,require("../common/delivery/code/autofix/executeAutofixesTest"));const decisionTreeTest_1=(cov_1hsrl29obp.s[26]++,require("./dsl/decisionTreeTest"));cov_1hsrl29obp.s[27]++;describe("SDM handler creation",()=>{cov_1hsrl29obp.f[6]++;cov_1hsrl29obp.s[28]++;describe("emits event handlers",()=>{cov_1hsrl29obp.f[7]++;cov_1hsrl29obp.s[29]++;it("emits goal setter",()=>{cov_1hsrl29obp.f[8]++;cov_1hsrl29obp.s[30]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[9]++;const sdm=(cov_1hsrl29obp.s[31]++,new ConcreteSoftwareDeliveryMachine_1.ConcreteSoftwareDeliveryMachine("Gustave",sdmGoalImplementationTest_1.fakeSoftwareDeliveryMachineOptions,goalDsl_1.whenPushSatisfies(commonPushTests_1.AnyPush).itMeans("do nothing").setGoals(commonGoals_1.NoGoals)));cov_1hsrl29obp.s[32]++;assert(sdm.eventHandlers.length>0);const sgop=(cov_1hsrl29obp.s[33]++,sdm.eventHandlers.map(h=>{cov_1hsrl29obp.f[10]++;cov_1hsrl29obp.s[34]++;return constructionUtils_1.toFactory(h)();}).find(h=>{cov_1hsrl29obp.f[11]++;cov_1hsrl29obp.s[35]++;return!!h.goalsListeners;}));cov_1hsrl29obp.s[36]++;assert(sgop.goalsListeners.length>=0);});});cov_1hsrl29obp.s[37]++;it("emits goal setter with listener",()=>{cov_1hsrl29obp.f[12]++;cov_1hsrl29obp.s[38]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[13]++;cov_1hsrl29obp.s[39]++;const gl=()=>{cov_1hsrl29obp.f[14]++;cov_1hsrl29obp.s[40]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[15]++;cov_1hsrl29obp.s[41]++;return undefined;});};const sdm=(cov_1hsrl29obp.s[42]++,new ConcreteSoftwareDeliveryMachine_1.ConcreteSoftwareDeliveryMachine("Gustave",sdmGoalImplementationTest_1.fakeSoftwareDeliveryMachineOptions,goalDsl_1.whenPushSatisfies(commonPushTests_1.AnyPush).itMeans("do nothing").setGoals(commonGoals_1.NoGoals)));cov_1hsrl29obp.s[43]++;sdm.addGoalsSetListeners(gl);cov_1hsrl29obp.s[44]++;assert(sdm.eventHandlers.length>0);const sgop=(cov_1hsrl29obp.s[45]++,sdm.eventHandlers.map(h=>{cov_1hsrl29obp.f[16]++;cov_1hsrl29obp.s[46]++;return constructionUtils_1.toFactory(h)();}).find(h=>{cov_1hsrl29obp.f[17]++;cov_1hsrl29obp.s[47]++;return!!h.goalsListeners;}));cov_1hsrl29obp.s[48]++;assert(sgop.goalsListeners.length>=1);});});});cov_1hsrl29obp.s[49]++;describe("can test goal setting",()=>{cov_1hsrl29obp.f[18]++;cov_1hsrl29obp.s[50]++;it("sets no goals",()=>{cov_1hsrl29obp.f[19]++;cov_1hsrl29obp.s[51]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[20]++;const sdm=(cov_1hsrl29obp.s[52]++,new ConcreteSoftwareDeliveryMachine_1.ConcreteSoftwareDeliveryMachine("Gustave",sdmGoalImplementationTest_1.fakeSoftwareDeliveryMachineOptions,goalDsl_1.whenPushSatisfies(commonPushTests_1.AnyPush).itMeans("do nothing").setGoals(null)));const p=(cov_1hsrl29obp.s[53]++,decisionTreeTest_1.fakePush());cov_1hsrl29obp.s[54]++;assert.equal((yield sdm.pushMapping.mapping(p)),undefined);});});cov_1hsrl29obp.s[55]++;it("sets goals on any push",()=>{cov_1hsrl29obp.f[21]++;cov_1hsrl29obp.s[56]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[22]++;const sdm=(cov_1hsrl29obp.s[57]++,new ConcreteSoftwareDeliveryMachine_1.ConcreteSoftwareDeliveryMachine("Gustave",sdmGoalImplementationTest_1.fakeSoftwareDeliveryMachineOptions,goalDsl_1.whenPushSatisfies(commonPushTests_1.AnyPush).setGoals(httpServiceGoals_1.HttpServiceGoals)));const p=(cov_1hsrl29obp.s[58]++,decisionTreeTest_1.fakePush());cov_1hsrl29obp.s[59]++;assert.equal((yield sdm.pushMapping.mapping(p)),httpServiceGoals_1.HttpServiceGoals);});});cov_1hsrl29obp.s[60]++;it("sets goals on particular push",()=>{cov_1hsrl29obp.f[23]++;cov_1hsrl29obp.s[61]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[24]++;const project=(cov_1hsrl29obp.s[62]++,InMemoryProject_1.InMemoryProject.of(new InMemoryFile_1.InMemoryFile("thing","1")));const sdm=(cov_1hsrl29obp.s[63]++,new ConcreteSoftwareDeliveryMachine_1.ConcreteSoftwareDeliveryMachine("Gustave",sdmGoalImplementationTest_1.fakeSoftwareDeliveryMachineOptions,goalDsl_1.whenPushSatisfies(pu=>{cov_1hsrl29obp.f[25]++;cov_1hsrl29obp.s[64]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[26]++;cov_1hsrl29obp.s[65]++;return!!(yield pu.project.getFile("thing"));});}).setGoals(httpServiceGoals_1.HttpServiceGoals)));const p=(cov_1hsrl29obp.s[66]++,decisionTreeTest_1.fakePush(project));cov_1hsrl29obp.s[67]++;assert.equal((yield sdm.pushMapping.mapping(p)),httpServiceGoals_1.HttpServiceGoals);});});});cov_1hsrl29obp.s[68]++;describe("observesOnly",()=>{cov_1hsrl29obp.f[27]++;cov_1hsrl29obp.s[69]++;it("cannot mutate",()=>{cov_1hsrl29obp.f[28]++;cov_1hsrl29obp.s[70]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[29]++;const sdm=(cov_1hsrl29obp.s[71]++,new ConcreteSoftwareDeliveryMachine_1.ConcreteSoftwareDeliveryMachine("Gustave",sdmGoalImplementationTest_1.fakeSoftwareDeliveryMachineOptions,goalDsl_1.whenPushSatisfies(pu=>{cov_1hsrl29obp.f[30]++;cov_1hsrl29obp.s[72]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[31]++;cov_1hsrl29obp.s[73]++;return!!(yield pu.project.getFile("thing"));});}).setGoals(httpServiceGoals_1.HttpServiceGoals)));cov_1hsrl29obp.s[74]++;assert(sdm.observesOnly);});});cov_1hsrl29obp.s[75]++;it("has an autofix",()=>{cov_1hsrl29obp.f[32]++;cov_1hsrl29obp.s[76]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[33]++;const sdm=(cov_1hsrl29obp.s[77]++,new ConcreteSoftwareDeliveryMachine_1.ConcreteSoftwareDeliveryMachine("Gustave",sdmGoalImplementationTest_1.fakeSoftwareDeliveryMachineOptions,goalDsl_1.whenPushSatisfies(pu=>{cov_1hsrl29obp.f[34]++;cov_1hsrl29obp.s[78]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[35]++;cov_1hsrl29obp.s[79]++;return!!(yield pu.project.getFile("thing"));});}).setGoals(httpServiceGoals_1.HttpServiceGoals)));cov_1hsrl29obp.s[80]++;sdm.addAutofixes(executeAutofixesTest_1.AddThingAutofix);cov_1hsrl29obp.s[81]++;assert(!sdm.observesOnly);});});cov_1hsrl29obp.s[82]++;it("has a build",()=>{cov_1hsrl29obp.f[36]++;cov_1hsrl29obp.s[83]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[37]++;const sdm=(cov_1hsrl29obp.s[84]++,new ConcreteSoftwareDeliveryMachine_1.ConcreteSoftwareDeliveryMachine("Gustave",sdmGoalImplementationTest_1.fakeSoftwareDeliveryMachineOptions,goalDsl_1.whenPushSatisfies(pu=>{cov_1hsrl29obp.f[38]++;cov_1hsrl29obp.s[85]++;return __awaiter(this,void 0,void 0,function*(){cov_1hsrl29obp.f[39]++;cov_1hsrl29obp.s[86]++;return!!(yield pu.project.getFile("thing"));});}).setGoals(httpServiceGoals_1.HttpServiceGoals)));cov_1hsrl29obp.s[87]++;sdm.addBuildRules(buildDsl_1.when(nodePushTests_1.HasAtomistBuildFile).itMeans("Custom build script").set(NpmDetectBuildMapping_1.npmCustomBuilder(sdm.options.artifactStore,sdm.options.projectLoader)));cov_1hsrl29obp.s[88]++;assert(!sdm.observesOnly);});});// tslint:disable:no-unused-expression
cov_1hsrl29obp.s[89]++;it("has a deployment").pending;});});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3JvZGpvaG5zb24vc2ZvcnphbmRvLWRldi9pZGVhLXByb2plY3RzL215LWZsb3cvdGVzdC9ibHVlcHJpbnQvc29mdHdhcmVEZWxpdmVyeU1hY2hpbmVUZXN0LnRzIiwic291cmNlcyI6WyIvVXNlcnMvcm9kam9obnNvbi9zZm9yemFuZG8tZGV2L2lkZWEtcHJvamVjdHMvbXktZmxvdy90ZXN0L2JsdWVwcmludC9zb2Z0d2FyZURlbGl2ZXJ5TWFjaGluZVRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7OztHQWNHOzs7Ozs7Ozs7O0FBRUgsNkRBQW9FO0FBQ3BFLG9GQUE2RTtBQUM3RSxnR0FBcUY7QUFDckYsMkVBQWlGO0FBRWpGLHNGQUFtRjtBQUNuRiw0RkFBeUY7QUFDekYseUZBQThFO0FBQzlFLHVDQUF1QztBQUN2QywrREFBd0Q7QUFDeEQsaUhBQThHO0FBQzlHLDJHQUFtRztBQUNuRyw4RkFBMkY7QUFFM0YsaUdBQW9HO0FBRXBHLCtGQUF1RjtBQUN2Riw2REFBa0Q7QUFFbEQsUUFBUSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRTtJQUVsQyxRQUFRLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO1FBRWxDLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxHQUFTLEVBQUU7WUFDL0IsTUFBTSxHQUFHLEdBQUcsSUFBSSxpRUFBK0IsQ0FBQyxTQUFTLEVBQ3JELDhEQUFrQyxFQUNsQywyQkFBaUIsQ0FBQyx5QkFBTyxDQUFDO2lCQUNyQixPQUFPLENBQUMsWUFBWSxDQUFDO2lCQUNyQixRQUFRLENBQUMscUJBQU8sQ0FBQyxDQUFDLENBQUM7WUFDNUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsNkJBQVMsQ0FBQyxDQUFDLENB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WUFDbEMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQzlCLENBQUMsQ0FBQSxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsYUFBYSxFQUFFLEdBQVMsRUFBRTtZQUN6QixNQUFNLEdBQUcsR0FBRyxJQUFJLGlFQUErQixDQUFDLFNBQVMsRUFDckQsOERBQWtDLEVBQ2xDLDJCQUFpQixDQUFDLENBQU0sRUFBRSxFQUFDLEVBQUUsZ0RBQUMsT0FBQSxDQUFDLENBQUMsQ0FBQSxNQUFNLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFBLENBQUEsR0FBQSxDQUFDO2lCQUM3RCxRQUFRLENBQUMsbUNBQWdCLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLEdBQUcsQ0FBQyxhQUFhLENBQUMsZUFBSSxDQUFDLG1DQUFtQixDQUFDO2lCQUN0QyxPQUFPLENBQUMscUJBQXFCLENBQUM7aUJBQzlCLEdBQUcsQ0FBQyx3Q0FBZ0IsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxHQUFHLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsRixNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDOUIsQ0FBQyxDQUFBLENBQUMsQ0FBQztRQUVILHNDQUFzQztRQUN0QyxFQUFFLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxPQUFPLENBQUM7SUFDbkMsQ0FBQyxDQUFDLENBQUM7QUFFUCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgwqkgMjAxOCBBdG9taXN0LCBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IHdoZW5QdXNoU2F0aXNmaWVzIH0gZnJvbSBcIi4uLy4uL3NyYy9ibHVlcHJpbnQvZHNsL2dvYWxEc2xcIjtcbmltcG9ydCB7IE5vR29hbHMgfSBmcm9tIFwiLi4vLi4vc3JjL2NvbW1vbi9kZWxpdmVyeS9nb2Fscy9jb21tb24vY29tbW9uR29hbHNcIjtcbmltcG9ydCB7IEFueVB1c2ggfSBmcm9tIFwiLi4vLi4vc3JjL2NvbW1vbi9saXN0ZW5lci9zdXBwb3J0L3B1c2h0ZXN0L2NvbW1vblB1c2hUZXN0c1wiO1xuaW1wb3J0IHsgZmFrZVNvZnR3YXJlRGVsaXZlcnlNYWNoaW5lT3B0aW9ucyB9IGZyb20gXCIuL3NkbUdvYWxJbXBsZW1lbnRhdGlvblRlc3RcIjtcblxuaW1wb3J0IHsgSW5NZW1vcnlGaWxlIH0gZnJvbSBcIkBhdG9taXN0L2F1dG9tYXRpb24tY2xpZW50L3Byb2plY3QvbWVtL0luTWVtb3J5RmlsZVwiO1xuaW1wb3J0IHsgSW5NZW1vcnlQcm9qZWN0IH0gZnJvbSBcIkBhdG9taXN0L2F1dG9tYXRpb24tY2xpZW50L3Byb2plY3QvbWVtL0luTWVtb3J5UHJvamVjdFwiO1xuaW1wb3J0IHsgdG9GYWN0b3J5IH0gZnJvbSBcIkBhdG9taXN0L2F1dG9tYXRpb24tY2xpZW50L3V0aWwvY29uc3RydWN0aW9uVXRpbHNcIjtcbmltcG9ydCAqIGFzIGFzc2VydCBmcm9tIFwicG93ZXItYXNzZXJ0XCI7XG5pbXBvcnQgeyB3aGVuIH0gZnJvbSBcIi4uLy4uL3NyYy9ibHVlcHJpbnQvZHNsL2J1aWxkRHNsXCI7XG5pbXBvcnQgeyBDb25jcmV0ZVNvZnR3YXJlRGVsaXZlcnlNYWNoaW5lIH0gZnJvbSBcIi4uLy4uL3NyYy9ibHVlcHJpbnQvc3VwcG9ydC9Db25jcmV0ZVNvZnR3YXJlRGVsaXZlcnlNYWNoaW5lXCI7XG5pbXBvcnQgeyBucG1DdXN0b21CdWlsZGVyIH0gZnJvbSBcIi4uLy4uL3NyYy9jb21tb24vZGVsaXZlcnkvYnVpbGQvbG9jYWwvbnBtL05wbURldGVjdEJ1aWxkTWFwcGluZ1wiO1xuaW1wb3J0IHsgSHR0cFNlcnZpY2VHb2FscyB9IGZyb20gXCIuLi8uLi9zcmMvY29tbW9uL2RlbGl2ZXJ5L2dvYWxzL2NvbW1vbi9odHRwU2VydmljZUdvYWxzXCI7XG5pbXBvcnQgeyBHb2Fsc1NldExpc3RlbmVyIH0gZnJvbSBcIi4uLy4uL3NyYy9jb21tb24vbGlzdGVuZXIvR29hbHNTZXRMaXN0ZW5lclwiO1xuaW1wb3J0IHsgSGFzQXRvbWlzdEJ1aWxkRmlsZSB9IGZyb20gXCIuLi8uLi9zcmMvY29tbW9uL2xpc3RlbmVyL3N1cHBvcnQvcHVzaHRlc3Qvbm9kZS9ub2RlUHVzaFRlc3RzXCI7XG5pbXBvcnQgeyBTZXRHb2Fsc09uUHVzaCB9IGZyb20gXCIuLi8uLi9zcmMvaGFuZGxlcnMvZXZlbnRzL2RlbGl2ZXJ5L2dvYWxzL1NldEdvYWxzT25QdXNoXCI7XG5pbXBvcnQgeyBBZGRUaGluZ0F1dG9maXggfSBmcm9tIFwiLi4vY29tbW9uL2RlbGl2ZXJ5L2NvZGUvYXV0b2ZpeC9leGVjdXRlQXV0b2ZpeGVzVGVzdFwiO1xuaW1wb3J0IHsgZmFrZVB1c2ggfSBmcm9tIFwiLi9kc2wvZGVjaXNpb25UcmVlVGVzdFwiO1xuXG5kZXNjcmliZShcIlNETSBoYW5kbGVyIGNyZWF0aW9uXCIsICgpID0+IHtcblxuICAgIGRlc2NyaWJlKFwiZW1pdHMgZXZlbnQgaGFuZGxlcnNcIiwgKCkgPT4ge1xuXG4gICAgICAgIGl0KFwiZW1pdHMgZ29hbCBzZXR0ZXJcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2RtID0gbmV3IENvbmNyZXRlU29mdHdhcmVEZWxpdmVyeU1hY2hpbmUoXCJHdXN0YXZlXCIsXG4gICAgICAgICAgICAgICAgZmFrZVNvZnR3YXJlRGVsaXZlcnlNYWNoaW5lT3B0aW9ucyxcbiAgICAgICAgICAgICAgICB3aGVuUHVzaFNhdGlzZmllcyhBbnlQdXNoKVxuICAgICAgICAgICAgICAgICAgICAuaXRNZWFucyhcImRvIG5vdGhpbmdcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEdvYWxzKE5vR29hbHMpKTtcbiAgICAgICAgICAgIGFzc2VydChzZG0uZXZlbnRIYW5kbGVycy5sZW5ndGggPiAwKTtcbiAgICAgICAgICAgIGNvbnN0IHNnb3AgPSBzZG0uZXZlbnRIYW5kbGVycy5tYXAoaCA9PiB0b0ZhY3RvcnkoaCkoKSkuZmluZChoID0+ICEhKGggYXMgU2V0R29hbHNPblB1c2gpLmdvYWxzTGlzdGVuZXJzKSBhcyBTZXRHb2Fsc09uUHVzaDtcbiAgICAgICAgICAgIGFzc2VydChzZ29wLmdvYWxzTGlzdGVuZXJzLmxlbmd0aCA+PSAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJlbWl0cyBnb2FsIHNldHRlciB3aXRoIGxpc3RlbmVyXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdsOiBHb2Fsc1NldExpc3RlbmVyID0gYXN5bmMgKCkgPT4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3Qgc2RtID0gbmV3IENvbmNyZXRlU29mdHdhcmVEZWxpdmVyeU1hY2hpbmUoXCJHdXN0YXZlXCIsXG4gICAgICAgICAgICAgICAgZmFrZVNvZnR3YXJlRGVsaXZlcnlNYWNoaW5lT3B0aW9ucyxcbiAgICAgICAgICAgICAgICB3aGVuUHVzaFNhdGlzZmllcyhBbnlQdXNoKVxuICAgICAgICAgICAgICAgICAgICAuaXRNZWFucyhcImRvIG5vdGhpbmdcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEdvYWxzKE5vR29hbHMpKTtcbiAgICAgICAgICAgIHNkbS5hZGRHb2Fsc1NldExpc3RlbmVycyhnbCk7XG4gICAgICAgICAgICBhc3NlcnQoc2RtLmV2ZW50SGFuZGxlcnMubGVuZ3RoID4gMCk7XG4gICAgICAgICAgICBjb25zdCBzZ29wID0gc2RtLmV2ZW50SGFuZGxlcnMubWFwKGggPT4gdG9GYWN0b3J5KGgpKCkpLmZpbmQoaCA9PiAhIShoIGFzIFNldEdvYWxzT25QdXNoKS5nb2Fsc0xpc3RlbmVycykgYXMgU2V0R29hbHNPblB1c2g7XG4gICAgICAgICAgICBhc3NlcnQoc2dvcC5nb2Fsc0xpc3RlbmVycy5sZW5ndGggPj0gMSk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImNhbiB0ZXN0IGdvYWwgc2V0dGluZ1wiLCAoKSA9PiB7XG5cbiAgICAgICAgaXQoXCJzZXRzIG5vIGdvYWxzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNkbSA9IG5ldyBDb25jcmV0ZVNvZnR3YXJlRGVsaXZlcnlNYWNoaW5lKFwiR3VzdGF2ZVwiLFxuICAgICAgICAgICAgICAgIGZha2VTb2Z0d2FyZURlbGl2ZXJ5TWFjaGluZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgd2hlblB1c2hTYXRpc2ZpZXMoQW55UHVzaClcbiAgICAgICAgICAgICAgICAgICAgLml0TWVhbnMoXCJkbyBub3RoaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRHb2FscyhudWxsKSk7XG4gICAgICAgICAgICBjb25zdCBwID0gZmFrZVB1c2goKTtcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChhd2FpdCBzZG0ucHVzaE1hcHBpbmcubWFwcGluZyhwKSwgdW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzZXRzIGdvYWxzIG9uIGFueSBwdXNoXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNkbSA9IG5ldyBDb25jcmV0ZVNvZnR3YXJlRGVsaXZlcnlNYWNoaW5lKFwiR3VzdGF2ZVwiLFxuICAgICAgICAgICAgICAgIGZha2VTb2Z0d2FyZURlbGl2ZXJ5TWFjaGluZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgd2hlblB1c2hTYXRpc2ZpZXMoQW55UHVzaClcbiAgICAgICAgICAgICAgICAgICAgLnNldEdvYWxzKEh0dHBTZXJ2aWNlR29hbHMpKTtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBmYWtlUHVzaCgpO1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGF3YWl0IHNkbS5wdXNoTWFwcGluZy5tYXBwaW5nKHApLCBIdHRwU2VydmljZUdvYWxzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzZXRzIGdvYWxzIG9uIHBhcnRpY3VsYXIgcHVzaFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0ID0gSW5NZW1vcnlQcm9qZWN0Lm9mKG5ldyBJbk1lbW9yeUZpbGUoXCJ0aGluZ1wiLCBcIjFcIikpO1xuICAgICAgICAgICAgY29uc3Qgc2RtID0gbmV3IENvbmNyZXRlU29mdHdhcmVEZWxpdmVyeU1hY2hpbmUoXCJHdXN0YXZlXCIsXG4gICAgICAgICAgICAgICAgZmFrZVNvZnR3YXJlRGVsaXZlcnlNYWNoaW5lT3B0aW9ucyxcbiAgICAgICAgICAgICAgICB3aGVuUHVzaFNhdGlzZmllcyhhc3luYyBwdSA9PiAhIWF3YWl0IHB1LnByb2plY3QuZ2V0RmlsZShcInRoaW5nXCIpKVxuICAgICAgICAgICAgICAgICAgICAuc2V0R29hbHMoSHR0cFNlcnZpY2VHb2FscykpO1xuICAgICAgICAgICAgY29uc3QgcCA9IGZha2VQdXNoKHByb2plY3QpO1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGF3YWl0IHNkbS5wdXNoTWFwcGluZy5tYXBwaW5nKHApLCBIdHRwU2VydmljZUdvYWxzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIm9ic2VydmVzT25seVwiLCAoKSA9PiB7XG5cbiAgICAgICAgaXQoXCJjYW5ub3QgbXV0YXRlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNkbSA9IG5ldyBDb25jcmV0ZVNvZnR3YXJlRGVsaXZlcnlNYWNoaW5lKFwiR3VzdGF2ZVwiLFxuICAgICAgICAgICAgICAgIGZha2VTb2Z0d2FyZURlbGl2ZXJ5TWFjaGluZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgd2hlblB1c2hTYXRpc2ZpZXMoYXN5bmMgcHUgPT4gISFhd2FpdCBwdS5wcm9qZWN0LmdldEZpbGUoXCJ0aGluZ1wiKSlcbiAgICAgICAgICAgICAgICAgICAgLnNldEdvYWxzKEh0dHBTZXJ2aWNlR29hbHMpKTtcbiAgICAgICAgICAgIGFzc2VydChzZG0ub2JzZXJ2ZXNPbmx5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJoYXMgYW4gYXV0b2ZpeFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZG0gPSBuZXcgQ29uY3JldGVTb2Z0d2FyZURlbGl2ZXJ5TWFjaGluZShcIkd1c3RhdmVcIixcbiAgICAgICAgICAgICAgICBmYWtlU29mdHdhcmVEZWxpdmVyeU1hY2hpbmVPcHRpb25zLFxuICAgICAgICAgICAgICAgIHdoZW5QdXNoU2F0aXNmaWVzKGFzeW5jIHB1ID0+ICEhYXdhaXQgcHUucHJvamVjdC5nZXRGaWxlKFwidGhpbmdcIikpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRHb2FscyhIdHRwU2VydmljZUdvYWxzKSk7XG4gICAgICAgICAgICBzZG0uYWRkQXV0b2ZpeGVzKEFkZFRoaW5nQXV0b2ZpeCk7XG4gICAgICAgICAgICBhc3NlcnQoIXNkbS5vYnNlcnZlc09ubHkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImhhcyBhIGJ1aWxkXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNkbSA9IG5ldyBDb25jcmV0ZVNvZnR3YXJlRGVsaXZlcnlNYWNoaW5lKFwiR3VzdGF2ZVwiLFxuICAgICAgICAgICAgICAgIGZha2VTb2Z0d2FyZURlbGl2ZXJ5TWFjaGluZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgd2hlblB1c2hTYXRpc2ZpZXMoYXN5bmMgcHUgPT4gISFhd2FpdCBwdS5wcm9qZWN0LmdldEZpbGUoXCJ0aGluZ1wiKSlcbiAgICAgICAgICAgICAgICAgICAgLnNldEdvYWxzKEh0dHBTZXJ2aWNlR29hbHMpKTtcbiAgICAgICAgICAgIHNkbS5hZGRCdWlsZFJ1bGVzKHdoZW4oSGFzQXRvbWlzdEJ1aWxkRmlsZSlcbiAgICAgICAgICAgICAgICAuaXRNZWFucyhcIkN1c3RvbSBidWlsZCBzY3JpcHRcIilcbiAgICAgICAgICAgICAgICAuc2V0KG5wbUN1c3RvbUJ1aWxkZXIoc2RtLm9wdGlvbnMuYXJ0aWZhY3RTdG9yZSwgc2RtLm9wdGlvbnMucHJvamVjdExvYWRlcikpKTtcbiAgICAgICAgICAgIGFzc2VydCghc2RtLm9ic2VydmVzT25seSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC1leHByZXNzaW9uXG4gICAgICAgIGl0KFwiaGFzIGEgZGVwbG95bWVudFwiKS5wZW5kaW5nO1xuICAgIH0pO1xuXG59KTtcbiJdfQ==