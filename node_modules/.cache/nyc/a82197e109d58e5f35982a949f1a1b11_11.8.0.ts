"use strict";/*
 * Copyright Â© 2018 Atomist, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cov_2pvq7wtfon=function(){var path="/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/common/slack/addressChannels.ts",hash="78df71a1eb5ebf93be5f18c0ba1a16328f43cafa",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/common/slack/addressChannels.ts",statementMap:{"0":{start:{line:17,column:16},end:{line:24,column:1}},"1":{start:{line:18,column:4},end:{line:23,column:7}},"2":{start:{line:19,column:36},end:{line:19,column:97}},"3":{start:{line:19,column:42},end:{line:19,column:70}},"4":{start:{line:19,column:85},end:{line:19,column:95}},"5":{start:{line:20,column:35},end:{line:20,column:100}},"6":{start:{line:20,column:41},end:{line:20,column:73}},"7":{start:{line:20,column:88},end:{line:20,column:98}},"8":{start:{line:21,column:32},end:{line:21,column:149}},"9":{start:{line:21,column:97},end:{line:21,column:119}},"10":{start:{line:22,column:8},end:{line:22,column:78}},"11":{start:{line:25,column:0},end:{line:25,column:62}},"12":{start:{line:26,column:24},end:{line:26,column:87}},"13":{start:{line:31,column:0},end:{line:31,column:102}},"14":{start:{line:31,column:34},end:{line:31,column:101}},"15":{start:{line:31,column:81},end:{line:31,column:98}},"16":{start:{line:40,column:4},end:{line:45,column:5}},"17":{start:{line:41,column:8},end:{line:41,column:85}},"18":{start:{line:44,column:8},end:{line:44,column:39}},"19":{start:{line:44,column:21},end:{line:44,column:38}},"20":{start:{line:47,column:0},end:{line:47,column:48}},"21":{start:{line:49,column:4},end:{line:49,column:101}},"22":{start:{line:49,column:42},end:{line:49,column:99}},"23":{start:{line:51,column:0},end:{line:51,column:56}},"24":{start:{line:53,column:4},end:{line:53,column:74}},"25":{start:{line:53,column:26},end:{line:53,column:73}},"26":{start:{line:55,column:0},end:{line:55,column:50}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:17,column:44},end:{line:17,column:45}},loc:{start:{line:17,column:89},end:{line:24,column:1}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:36},end:{line:18,column:37}},loc:{start:{line:18,column:63},end:{line:23,column:5}},line:18},"2":{name:"fulfilled",decl:{start:{line:19,column:17},end:{line:19,column:26}},loc:{start:{line:19,column:34},end:{line:19,column:99}},line:19},"3":{name:"rejected",decl:{start:{line:20,column:17},end:{line:20,column:25}},loc:{start:{line:20,column:33},end:{line:20,column:102}},line:20},"4":{name:"step",decl:{start:{line:21,column:17},end:{line:21,column:21}},loc:{start:{line:21,column:30},end:{line:21,column:151}},line:21},"5":{name:"(anonymous_5)",decl:{start:{line:21,column:76},end:{line:21,column:77}},loc:{start:{line:21,column:95},end:{line:21,column:121}},line:21},"6":{name:"(anonymous_6)",decl:{start:{line:31,column:28},end:{line:31,column:29}},loc:{start:{line:31,column:34},end:{line:31,column:101}},line:31},"7":{name:"(anonymous_7)",decl:{start:{line:31,column:66},end:{line:31,column:67}},loc:{start:{line:31,column:79},end:{line:31,column:100}},line:31},"8":{name:"addressChannelsFor",decl:{start:{line:39,column:9},end:{line:39,column:27}},loc:{start:{line:39,column:46},end:{line:46,column:1}},line:39},"9":{name:"(anonymous_9)",decl:{start:{line:44,column:15},end:{line:44,column:16}},loc:{start:{line:44,column:21},end:{line:44,column:38}},line:44},"10":{name:"messageDestinationsFor",decl:{start:{line:48,column:9},end:{line:48,column:31}},loc:{start:{line:48,column:50},end:{line:50,column:1}},line:48},"11":{name:"(anonymous_11)",decl:{start:{line:49,column:36},end:{line:49,column:37}},loc:{start:{line:49,column:42},end:{line:49,column:99}},line:49},"12":{name:"addressDestinations",decl:{start:{line:52,column:9},end:{line:52,column:28}},loc:{start:{line:52,column:51},end:{line:54,column:1}},line:52},"13":{name:"(anonymous_13)",decl:{start:{line:53,column:11},end:{line:53,column:12}},loc:{start:{line:53,column:26},end:{line:53,column:73}},line:53}},branchMap:{"0":{loc:{start:{line:17,column:16},end:{line:24,column:1}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:21}},{start:{line:17,column:25},end:{line:17,column:39}},{start:{line:17,column:44},end:{line:24,column:1}}],line:17},"1":{loc:{start:{line:18,column:16},end:{line:18,column:34}},type:"binary-expr",locations:[{start:{line:18,column:16},end:{line:18,column:17}},{start:{line:18,column:22},end:{line:18,column:33}}],line:18},"2":{loc:{start:{line:21,column:32},end:{line:21,column:148}},type:"cond-expr",locations:[{start:{line:21,column:46},end:{line:21,column:67}},{start:{line:21,column:70},end:{line:21,column:148}}],line:21},"3":{loc:{start:{line:22,column:51},end:{line:22,column:67}},type:"binary-expr",locations:[{start:{line:22,column:51},end:{line:22,column:61}},{start:{line:22,column:65},end:{line:22,column:67}}],line:22},"4":{loc:{start:{line:40,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:45,column:5}},{start:{line:40,column:4},end:{line:45,column:5}}],line:40},"5":{loc:{start:{line:40,column:8},end:{line:40,column:63}},type:"binary-expr",locations:[{start:{line:40,column:8},end:{line:40,column:28}},{start:{line:40,column:32},end:{line:40,column:63}}],line:40}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var __awaiter=(cov_2pvq7wtfon.s[0]++,(cov_2pvq7wtfon.b[0][0]++,this)&&(cov_2pvq7wtfon.b[0][1]++,this.__awaiter)||(cov_2pvq7wtfon.b[0][2]++,function(thisArg,_arguments,P,generator){cov_2pvq7wtfon.f[0]++;cov_2pvq7wtfon.s[1]++;return new((cov_2pvq7wtfon.b[1][0]++,P)||(cov_2pvq7wtfon.b[1][1]++,P=Promise))(function(resolve,reject){cov_2pvq7wtfon.f[1]++;function fulfilled(value){cov_2pvq7wtfon.f[2]++;cov_2pvq7wtfon.s[2]++;try{cov_2pvq7wtfon.s[3]++;step(generator.next(value));}catch(e){cov_2pvq7wtfon.s[4]++;reject(e);}}function rejected(value){cov_2pvq7wtfon.f[3]++;cov_2pvq7wtfon.s[5]++;try{cov_2pvq7wtfon.s[6]++;step(generator["throw"](value));}catch(e){cov_2pvq7wtfon.s[7]++;reject(e);}}function step(result){cov_2pvq7wtfon.f[4]++;cov_2pvq7wtfon.s[8]++;result.done?(cov_2pvq7wtfon.b[2][0]++,resolve(result.value)):(cov_2pvq7wtfon.b[2][1]++,new P(function(resolve){cov_2pvq7wtfon.f[5]++;cov_2pvq7wtfon.s[9]++;resolve(result.value);}).then(fulfilled,rejected));}cov_2pvq7wtfon.s[10]++;step((generator=generator.apply(thisArg,(cov_2pvq7wtfon.b[3][0]++,_arguments)||(cov_2pvq7wtfon.b[3][1]++,[]))).next());});}));cov_2pvq7wtfon.s[11]++;Object.defineProperty(exports,"__esModule",{value:true});const MessageClient_1=(cov_2pvq7wtfon.s[12]++,require("@atomist/automation-client/spi/message/MessageClient"));/**
 * Throw away contents. Use when we know that there can be no linked channels.
 * @constructor
 */cov_2pvq7wtfon.s[13]++;exports.AddressNoChannels=()=>{cov_2pvq7wtfon.f[6]++;cov_2pvq7wtfon.s[14]++;return __awaiter(this,void 0,void 0,function*(){cov_2pvq7wtfon.f[7]++;cov_2pvq7wtfon.s[15]++;return undefined;});};/**
 * Address the chat channels associated with this object.
 * Typically used to address channels associated with a repo.
 * @param {HasChannels} hasChannels
 * @param {HandlerContext} ctx
 * @return {AddressChannels}
 */function addressChannelsFor(hasChannels,ctx){cov_2pvq7wtfon.f[8]++;cov_2pvq7wtfon.s[16]++;if((cov_2pvq7wtfon.b[5][0]++,hasChannels.channels)&&(cov_2pvq7wtfon.b[5][1]++,hasChannels.channels.length>0)){cov_2pvq7wtfon.b[4][0]++;cov_2pvq7wtfon.s[17]++;return addressDestinations(ctx,...messageDestinationsFor(hasChannels,ctx));}else{cov_2pvq7wtfon.b[4][1]++;cov_2pvq7wtfon.s[18]++;return()=>{cov_2pvq7wtfon.f[9]++;cov_2pvq7wtfon.s[19]++;return Promise.resolve();};}}cov_2pvq7wtfon.s[20]++;exports.addressChannelsFor=addressChannelsFor;function messageDestinationsFor(hasChannels,ctx){cov_2pvq7wtfon.f[10]++;cov_2pvq7wtfon.s[21]++;return hasChannels.channels.map(ch=>{cov_2pvq7wtfon.f[11]++;cov_2pvq7wtfon.s[22]++;return MessageClient_1.addressSlackChannels(ch.team.id,ch.name);});}cov_2pvq7wtfon.s[23]++;exports.messageDestinationsFor=messageDestinationsFor;function addressDestinations(ctx,...destinations){cov_2pvq7wtfon.f[12]++;cov_2pvq7wtfon.s[24]++;return(msg,opts)=>{cov_2pvq7wtfon.f[13]++;cov_2pvq7wtfon.s[25]++;return ctx.messageClient.send(msg,destinations,opts);};}cov_2pvq7wtfon.s[26]++;exports.addressDestinations=addressDestinations;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3JvZGpvaG5zb24vc2ZvcnphbmRvLWRldi9pZGVhLXByb2plY3RzL215LWZsb3cvc3JjL2NvbW1vbi9zbGFjay9hZGRyZXNzQ2hhbm5lbHMudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Rqb2huc29uL3Nmb3J6YW5kby1kZXYvaWRlYS1wcm9qZWN0cy9teS1mbG93L3NyYy9jb21tb24vc2xhY2svYWRkcmVzc0NoYW5uZWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7R0FjRzs7Ozs7Ozs7OztBQUdILHdGQUk4RDtBQVM5RDs7O0dBR0c7QUFDVSxRQUFBLGlCQUFpQixHQUFvQixHQUFTLEVBQUUsZ0RBQUMsT0FBQSxTQUFTLENBQUEsR0FBQSxDQUFDO0FBU3hFOzs7Ozs7R0FNRztBQUNILDRCQUFtQyxXQUF3QixFQUFFLEdBQW1CO0lBQzVFLElBQUksV0FBVyxDQUFDLFFBQVEsSUFBSSxXQUFXLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDekQsT0FBTyxtQkFBbUIsQ0FBQyxHQUFHLEVBQUUsR0FBRyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNoRjtTQUFNO1FBQ0gsT0FBTyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDbEM7QUFDTCxDQUFDO0FBTkQsZ0RBTUM7QUFFRCxnQ0FBdUMsV0FBd0IsRUFBRSxHQUFvQjtJQUNqRixPQUFPLFdBQVcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsb0NBQW9CLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDckYsQ0FBQztBQUZELHdEQUVDO0FBRUQsNkJBQW9DLEdBQW1CLEVBQUUsR0FBRyxZQUEyQjtJQUNuRixPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMxRSxDQUFDO0FBRkQsa0RBRUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IMKpIDIwMTggQXRvbWlzdCwgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBIYW5kbGVyQ29udGV4dCB9IGZyb20gXCJAYXRvbWlzdC9hdXRvbWF0aW9uLWNsaWVudFwiO1xuaW1wb3J0IHtcbiAgICBhZGRyZXNzU2xhY2tDaGFubmVscyxcbiAgICBEZXN0aW5hdGlvbixcbiAgICBNZXNzYWdlT3B0aW9ucyxcbn0gZnJvbSBcIkBhdG9taXN0L2F1dG9tYXRpb24tY2xpZW50L3NwaS9tZXNzYWdlL01lc3NhZ2VDbGllbnRcIjtcbmltcG9ydCB7IFNsYWNrTWVzc2FnZSB9IGZyb20gXCJAYXRvbWlzdC9zbGFjay1tZXNzYWdlc1wiO1xuXG4vKipcbiAqIEFsbG93cyB1cyB0byBhZGRyZXNzIGNoYW5uZWxzIGZvciBhIHBhcnRpY3VsYXIgcmVwbyBvciBhbnkgR3JhcGhRTFxuICogdHlwZSB3aXRoIGNoYW5uZWxzXG4gKi9cbmV4cG9ydCB0eXBlIEFkZHJlc3NDaGFubmVscyA9IChtc2c6IHN0cmluZyB8IFNsYWNrTWVzc2FnZSwgb3B0cz86IE1lc3NhZ2VPcHRpb25zKSA9PiBQcm9taXNlPGFueT47XG5cbi8qKlxuICogVGhyb3cgYXdheSBjb250ZW50cy4gVXNlIHdoZW4gd2Uga25vdyB0aGF0IHRoZXJlIGNhbiBiZSBubyBsaW5rZWQgY2hhbm5lbHMuXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNvbnN0IEFkZHJlc3NOb0NoYW5uZWxzOiBBZGRyZXNzQ2hhbm5lbHMgPSBhc3luYyAoKSA9PiB1bmRlZmluZWQ7XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBhbnl0aGluZywgbGlrZSBhIHJlcG8sIHRoYXQgaGFzIGFzc29jaWF0ZWQgY2hhdCBjaGFubmVsIGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSGFzQ2hhbm5lbHMge1xuICAgIGNoYW5uZWxzPzogQXJyYXk8eyBuYW1lPzogc3RyaW5nLCBpZD86IHN0cmluZywgdGVhbT86IHsgaWQ/OiBzdHJpbmcgfX0+O1xufVxuXG4vKipcbiAqIEFkZHJlc3MgdGhlIGNoYXQgY2hhbm5lbHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb2JqZWN0LlxuICogVHlwaWNhbGx5IHVzZWQgdG8gYWRkcmVzcyBjaGFubmVscyBhc3NvY2lhdGVkIHdpdGggYSByZXBvLlxuICogQHBhcmFtIHtIYXNDaGFubmVsc30gaGFzQ2hhbm5lbHNcbiAqIEBwYXJhbSB7SGFuZGxlckNvbnRleHR9IGN0eFxuICogQHJldHVybiB7QWRkcmVzc0NoYW5uZWxzfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkcmVzc0NoYW5uZWxzRm9yKGhhc0NoYW5uZWxzOiBIYXNDaGFubmVscywgY3R4OiBIYW5kbGVyQ29udGV4dCk6IEFkZHJlc3NDaGFubmVscyB7XG4gICAgaWYgKGhhc0NoYW5uZWxzLmNoYW5uZWxzICYmIGhhc0NoYW5uZWxzLmNoYW5uZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGFkZHJlc3NEZXN0aW5hdGlvbnMoY3R4LCAuLi5tZXNzYWdlRGVzdGluYXRpb25zRm9yKGhhc0NoYW5uZWxzLCBjdHgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVzc2FnZURlc3RpbmF0aW9uc0ZvcihoYXNDaGFubmVsczogSGFzQ2hhbm5lbHMsIGN0eD86IEhhbmRsZXJDb250ZXh0KTogRGVzdGluYXRpb25bXSB7XG4gICAgcmV0dXJuIGhhc0NoYW5uZWxzLmNoYW5uZWxzLm1hcChjaCA9PiBhZGRyZXNzU2xhY2tDaGFubmVscyhjaC50ZWFtLmlkLCBjaC5uYW1lKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRyZXNzRGVzdGluYXRpb25zKGN0eDogSGFuZGxlckNvbnRleHQsIC4uLmRlc3RpbmF0aW9uczogRGVzdGluYXRpb25bXSk6IEFkZHJlc3NDaGFubmVscyB7XG4gICAgcmV0dXJuIChtc2csIG9wdHMpID0+IGN0eC5tZXNzYWdlQ2xpZW50LnNlbmQobXNnLCBkZXN0aW5hdGlvbnMsIG9wdHMpO1xufVxuIl19