"use strict";/*
 * Copyright Â© 2018 Atomist, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cov_1bqhantp6l=function(){var path="/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/common/command/support/commandSearch.ts",hash="43ed44d1c3b05afa537c8389f2965d29da9bfefb",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/common/command/support/commandSearch.ts",statementMap:{"0":{start:{line:17,column:0},end:{line:17,column:62}},"1":{start:{line:18,column:19},end:{line:18,column:83}},"2":{start:{line:19,column:28},end:{line:19,column:88}},"3":{start:{line:29,column:4},end:{line:30,column:66}},"4":{start:{line:30,column:22},end:{line:30,column:64}},"5":{start:{line:30,column:49},end:{line:30,column:63}},"6":{start:{line:32,column:0},end:{line:32,column:56}},"7":{start:{line:40,column:4},end:{line:42,column:72}},"8":{start:{line:41,column:23},end:{line:41,column:82}},"9":{start:{line:42,column:22},end:{line:42,column:70}},"10":{start:{line:44,column:0},end:{line:44,column:56}}},fnMap:{"0":{name:"commandHandlersWithTag",decl:{start:{line:28,column:9},end:{line:28,column:31}},loc:{start:{line:28,column:43},end:{line:31,column:1}},line:28},"1":{name:"(anonymous_1)",decl:{start:{line:30,column:16},end:{line:30,column:17}},loc:{start:{line:30,column:22},end:{line:30,column:64}},line:30},"2":{name:"(anonymous_2)",decl:{start:{line:30,column:44},end:{line:30,column:45}},loc:{start:{line:30,column:49},end:{line:30,column:63}},line:30},"3":{name:"selfDescribingHandlers",decl:{start:{line:39,column:9},end:{line:39,column:31}},loc:{start:{line:39,column:38},end:{line:43,column:1}},line:39},"4":{name:"(anonymous_4)",decl:{start:{line:41,column:13},end:{line:41,column:14}},loc:{start:{line:41,column:23},end:{line:41,column:82}},line:41},"5":{name:"(anonymous_5)",decl:{start:{line:42,column:16},end:{line:42,column:17}},loc:{start:{line:42,column:22},end:{line:42,column:70}},line:42}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_1bqhantp6l.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const metadata_1=(cov_1bqhantp6l.s[1]++,require("@atomist/automation-client/internal/metadata/metadata"));const constructionUtils_1=(cov_1bqhantp6l.s[2]++,require("@atomist/automation-client/util/constructionUtils"));/**
 * Return command handlers with a given tag.
 * Note this may not find all, but it will find those that know their
 * own metadata, which is true of all those returned by generatorHandler
 * and the underlying commandHandlerFrom
 * @param {FunctionalUnit} unit
 * @param {string} tag
 */function commandHandlersWithTag(unit,tag){cov_1bqhantp6l.f[0]++;cov_1bqhantp6l.s[3]++;return selfDescribingHandlers(unit).filter(hi=>{cov_1bqhantp6l.f[1]++;cov_1bqhantp6l.s[4]++;return hi.instance.tags.some(t=>{cov_1bqhantp6l.f[2]++;cov_1bqhantp6l.s[5]++;return t.name===tag;});});}cov_1bqhantp6l.s[6]++;exports.commandHandlersWithTag=commandHandlersWithTag;/**
 * Return command handlers along with their metadata
 * Note this may not find all, but it will find those that know their
 * own metadata
 * @param {FunctionalUnit} unit
 */function selfDescribingHandlers(unit){cov_1bqhantp6l.f[3]++;cov_1bqhantp6l.s[7]++;return unit.commandHandlers.map(maker=>{cov_1bqhantp6l.f[4]++;cov_1bqhantp6l.s[8]++;return{maker,instance:constructionUtils_1.toFactory(maker)()};}).filter(hi=>{cov_1bqhantp6l.f[5]++;cov_1bqhantp6l.s[9]++;return metadata_1.isCommandHandlerMetadata(hi.instance);});}cov_1bqhantp6l.s[10]++;exports.selfDescribingHandlers=selfDescribingHandlers;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3JvZGpvaG5zb24vc2ZvcnphbmRvLWRldi9pZGVhLXByb2plY3RzL215LWZsb3cvc3JjL2NvbW1vbi9jb21tYW5kL3N1cHBvcnQvY29tbWFuZFNlYXJjaC50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3JvZGpvaG5zb24vc2ZvcnphbmRvLWRldi9pZGVhLXByb2plY3RzL215LWZsb3cvc3JjL2NvbW1vbi9jb21tYW5kL3N1cHBvcnQvY29tbWFuZFNlYXJjaC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7O0dBY0c7O0FBR0gsb0ZBQWlHO0FBRWpHLHlGQUFxRjtBQVFyRjs7Ozs7OztHQU9HO0FBQ0gsZ0NBQXVDLElBQW9CLEVBQUUsR0FBVztJQUNwRSxPQUFPLHNCQUFzQixDQUFDLElBQUksQ0FBQztTQUM5QixNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDbEUsQ0FBQztBQUhELHdEQUdDO0FBRUQ7Ozs7O0dBS0c7QUFDSCxnQ0FBdUMsSUFBb0I7SUFDdkQsT0FBTyxJQUFJLENBQUMsZUFBZTtTQUN0QixHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSw2QkFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUMsQ0FBQyxDQUFDO1NBQ3JELE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLG1DQUF3QixDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBa0IsQ0FBQztBQUM5RSxDQUFDO0FBSkQsd0RBSUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IMKpIDIwMTggQXRvbWlzdCwgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBIYW5kbGVDb21tYW5kIH0gZnJvbSBcIkBhdG9taXN0L2F1dG9tYXRpb24tY2xpZW50XCI7XG5pbXBvcnQgeyBpc0NvbW1hbmRIYW5kbGVyTWV0YWRhdGEgfSBmcm9tIFwiQGF0b21pc3QvYXV0b21hdGlvbi1jbGllbnQvaW50ZXJuYWwvbWV0YWRhdGEvbWV0YWRhdGFcIjtcbmltcG9ydCB7IENvbW1hbmRIYW5kbGVyTWV0YWRhdGEgfSBmcm9tIFwiQGF0b21pc3QvYXV0b21hdGlvbi1jbGllbnQvbWV0YWRhdGEvYXV0b21hdGlvbk1ldGFkYXRhXCI7XG5pbXBvcnQgeyBNYWtlciwgdG9GYWN0b3J5IH0gZnJvbSBcIkBhdG9taXN0L2F1dG9tYXRpb24tY2xpZW50L3V0aWwvY29uc3RydWN0aW9uVXRpbHNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uYWxVbml0IH0gZnJvbSBcIi4uLy4uLy4uL2JsdWVwcmludC9GdW5jdGlvbmFsVW5pdFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhhbmRsZXJJbmZvIHtcbiAgICBtYWtlcjogTWFrZXI8SGFuZGxlQ29tbWFuZDxhbnk+PjtcbiAgICBpbnN0YW5jZTogSGFuZGxlQ29tbWFuZDxhbnk+ICYgQ29tbWFuZEhhbmRsZXJNZXRhZGF0YTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gY29tbWFuZCBoYW5kbGVycyB3aXRoIGEgZ2l2ZW4gdGFnLlxuICogTm90ZSB0aGlzIG1heSBub3QgZmluZCBhbGwsIGJ1dCBpdCB3aWxsIGZpbmQgdGhvc2UgdGhhdCBrbm93IHRoZWlyXG4gKiBvd24gbWV0YWRhdGEsIHdoaWNoIGlzIHRydWUgb2YgYWxsIHRob3NlIHJldHVybmVkIGJ5IGdlbmVyYXRvckhhbmRsZXJcbiAqIGFuZCB0aGUgdW5kZXJseWluZyBjb21tYW5kSGFuZGxlckZyb21cbiAqIEBwYXJhbSB7RnVuY3Rpb25hbFVuaXR9IHVuaXRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbW1hbmRIYW5kbGVyc1dpdGhUYWcodW5pdDogRnVuY3Rpb25hbFVuaXQsIHRhZzogc3RyaW5nKTogSGFuZGxlckluZm9bXSB7XG4gICAgcmV0dXJuIHNlbGZEZXNjcmliaW5nSGFuZGxlcnModW5pdClcbiAgICAgICAgLmZpbHRlcihoaSA9PiBoaS5pbnN0YW5jZS50YWdzLnNvbWUodCA9PiB0Lm5hbWUgPT09IHRhZykpO1xufVxuXG4vKipcbiAqIFJldHVybiBjb21tYW5kIGhhbmRsZXJzIGFsb25nIHdpdGggdGhlaXIgbWV0YWRhdGFcbiAqIE5vdGUgdGhpcyBtYXkgbm90IGZpbmQgYWxsLCBidXQgaXQgd2lsbCBmaW5kIHRob3NlIHRoYXQga25vdyB0aGVpclxuICogb3duIG1ldGFkYXRhXG4gKiBAcGFyYW0ge0Z1bmN0aW9uYWxVbml0fSB1bml0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWxmRGVzY3JpYmluZ0hhbmRsZXJzKHVuaXQ6IEZ1bmN0aW9uYWxVbml0KTogSGFuZGxlckluZm9bXSB7XG4gICAgcmV0dXJuIHVuaXQuY29tbWFuZEhhbmRsZXJzXG4gICAgICAgIC5tYXAobWFrZXIgPT4gKHttYWtlciwgaW5zdGFuY2U6IHRvRmFjdG9yeShtYWtlcikoKX0pKVxuICAgICAgICAuZmlsdGVyKGhpID0+IGlzQ29tbWFuZEhhbmRsZXJNZXRhZGF0YShoaS5pbnN0YW5jZSkpIGFzIEhhbmRsZXJJbmZvW107XG59XG4iXX0=