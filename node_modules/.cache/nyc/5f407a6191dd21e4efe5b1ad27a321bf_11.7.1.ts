"use strict";/*
 * Copyright Â© 2018 Atomist, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cov_2gjxeanp0f=function(){var path="/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/common/delivery/build/executeBuild.ts",hash="e5442ab100e7b7c5c32f3f0875557d7b7c2bb290",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/common/delivery/build/executeBuild.ts",statementMap:{"0":{start:{line:17,column:16},end:{line:24,column:1}},"1":{start:{line:18,column:4},end:{line:23,column:7}},"2":{start:{line:19,column:36},end:{line:19,column:97}},"3":{start:{line:19,column:42},end:{line:19,column:70}},"4":{start:{line:19,column:85},end:{line:19,column:95}},"5":{start:{line:20,column:35},end:{line:20,column:100}},"6":{start:{line:20,column:41},end:{line:20,column:73}},"7":{start:{line:20,column:88},end:{line:20,column:98}},"8":{start:{line:21,column:32},end:{line:21,column:149}},"9":{start:{line:21,column:97},end:{line:21,column:119}},"10":{start:{line:22,column:8},end:{line:22,column:78}},"11":{start:{line:25,column:0},end:{line:25,column:62}},"12":{start:{line:26,column:28},end:{line:26,column:65}},"13":{start:{line:33,column:4},end:{line:47,column:7}},"14":{start:{line:33,column:21},end:{line:47,column:6}},"15":{start:{line:34,column:83},end:{line:34,column:87}},"16":{start:{line:35,column:23},end:{line:35,column:36}},"17":{start:{line:36,column:8},end:{line:36,column:117}},"18":{start:{line:39,column:8},end:{line:46,column:33}},"19":{start:{line:49,column:0},end:{line:49,column:36}},"20":{start:{line:51,column:38},end:{line:51,column:70}},"21":{start:{line:51,column:61},end:{line:51,column:69}},"22":{start:{line:52,column:47},end:{line:52,column:115}},"23":{start:{line:52,column:83},end:{line:52,column:114}},"24":{start:{line:53,column:39},end:{line:53,column:80}},"25":{start:{line:53,column:75},end:{line:53,column:79}},"26":{start:{line:54,column:37},end:{line:54,column:113}},"27":{start:{line:55,column:4},end:{line:55,column:36}},"28":{start:{line:57,column:0},end:{line:57,column:44}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:17,column:44},end:{line:17,column:45}},loc:{start:{line:17,column:89},end:{line:24,column:1}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:36},end:{line:18,column:37}},loc:{start:{line:18,column:63},end:{line:23,column:5}},line:18},"2":{name:"fulfilled",decl:{start:{line:19,column:17},end:{line:19,column:26}},loc:{start:{line:19,column:34},end:{line:19,column:99}},line:19},"3":{name:"rejected",decl:{start:{line:20,column:17},end:{line:20,column:25}},loc:{start:{line:20,column:33},end:{line:20,column:102}},line:20},"4":{name:"step",decl:{start:{line:21,column:17},end:{line:21,column:21}},loc:{start:{line:21,column:30},end:{line:21,column:151}},line:21},"5":{name:"(anonymous_5)",decl:{start:{line:21,column:76},end:{line:21,column:77}},loc:{start:{line:21,column:95},end:{line:21,column:121}},line:21},"6":{name:"executeBuild",decl:{start:{line:32,column:9},end:{line:32,column:21}},loc:{start:{line:32,column:46},end:{line:48,column:1}},line:32},"7":{name:"(anonymous_7)",decl:{start:{line:33,column:11},end:{line:33,column:12}},loc:{start:{line:33,column:21},end:{line:47,column:6}},line:33},"8":{name:"(anonymous_8)",decl:{start:{line:33,column:53},end:{line:33,column:54}},loc:{start:{line:33,column:66},end:{line:47,column:5}},line:33},"9":{name:"branchFromCommit",decl:{start:{line:50,column:9},end:{line:50,column:25}},loc:{start:{line:50,column:34},end:{line:56,column:1}},line:50},"10":{name:"(anonymous_10)",decl:{start:{line:51,column:56},end:{line:51,column:57}},loc:{start:{line:51,column:61},end:{line:51,column:69}},line:51},"11":{name:"(anonymous_11)",decl:{start:{line:52,column:78},end:{line:52,column:79}},loc:{start:{line:52,column:83},end:{line:52,column:114}},line:52},"12":{name:"(anonymous_12)",decl:{start:{line:53,column:70},end:{line:53,column:71}},loc:{start:{line:53,column:75},end:{line:53,column:79}},line:53}},branchMap:{"0":{loc:{start:{line:17,column:16},end:{line:24,column:1}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:21}},{start:{line:17,column:25},end:{line:17,column:39}},{start:{line:17,column:44},end:{line:24,column:1}}],line:17},"1":{loc:{start:{line:18,column:16},end:{line:18,column:34}},type:"binary-expr",locations:[{start:{line:18,column:16},end:{line:18,column:17}},{start:{line:18,column:22},end:{line:18,column:33}}],line:18},"2":{loc:{start:{line:21,column:32},end:{line:21,column:148}},type:"cond-expr",locations:[{start:{line:21,column:46},end:{line:21,column:67}},{start:{line:21,column:70},end:{line:21,column:148}}],line:21},"3":{loc:{start:{line:22,column:51},end:{line:22,column:67}},type:"binary-expr",locations:[{start:{line:22,column:51},end:{line:22,column:61}},{start:{line:22,column:65},end:{line:22,column:67}}],line:22},"4":{loc:{start:{line:54,column:37},end:{line:54,column:113}},type:"binary-expr",locations:[{start:{line:54,column:37},end:{line:54,column:71}},{start:{line:54,column:75},end:{line:54,column:101}},{start:{line:54,column:105},end:{line:54,column:113}}],line:54}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var __awaiter=(cov_2gjxeanp0f.s[0]++,(cov_2gjxeanp0f.b[0][0]++,this)&&(cov_2gjxeanp0f.b[0][1]++,this.__awaiter)||(cov_2gjxeanp0f.b[0][2]++,function(thisArg,_arguments,P,generator){cov_2gjxeanp0f.f[0]++;cov_2gjxeanp0f.s[1]++;return new((cov_2gjxeanp0f.b[1][0]++,P)||(cov_2gjxeanp0f.b[1][1]++,P=Promise))(function(resolve,reject){cov_2gjxeanp0f.f[1]++;function fulfilled(value){cov_2gjxeanp0f.f[2]++;cov_2gjxeanp0f.s[2]++;try{cov_2gjxeanp0f.s[3]++;step(generator.next(value));}catch(e){cov_2gjxeanp0f.s[4]++;reject(e);}}function rejected(value){cov_2gjxeanp0f.f[3]++;cov_2gjxeanp0f.s[5]++;try{cov_2gjxeanp0f.s[6]++;step(generator["throw"](value));}catch(e){cov_2gjxeanp0f.s[7]++;reject(e);}}function step(result){cov_2gjxeanp0f.f[4]++;cov_2gjxeanp0f.s[8]++;result.done?(cov_2gjxeanp0f.b[2][0]++,resolve(result.value)):(cov_2gjxeanp0f.b[2][1]++,new P(function(resolve){cov_2gjxeanp0f.f[5]++;cov_2gjxeanp0f.s[9]++;resolve(result.value);}).then(fulfilled,rejected));}cov_2gjxeanp0f.s[10]++;step((generator=generator.apply(thisArg,(cov_2gjxeanp0f.b[3][0]++,_arguments)||(cov_2gjxeanp0f.b[3][1]++,[]))).next());});}));cov_2gjxeanp0f.s[11]++;Object.defineProperty(exports,"__esModule",{value:true});const automation_client_1=(cov_2gjxeanp0f.s[12]++,require("@atomist/automation-client"));/**
 * Execute build with the appropriate builder
 * @param projectLoader used to load projects
 * @param builder builder to user
 */function executeBuild(projectLoader,builder){cov_2gjxeanp0f.f[6]++;cov_2gjxeanp0f.s[13]++;return rwlc=>{cov_2gjxeanp0f.f[7]++;cov_2gjxeanp0f.s[14]++;return __awaiter(this,void 0,void 0,function*(){cov_2gjxeanp0f.f[8]++;const{status,credentials,id,context,progressLog,addressChannels}=(cov_2gjxeanp0f.s[15]++,rwlc);const commit=(cov_2gjxeanp0f.s[16]++,status.commit);cov_2gjxeanp0f.s[17]++;automation_client_1.logger.info("Building project %s:%s with builder [%s]",id.owner,id.repo,builder.name);// the builder is expected to result in a complete Build event (which will update the build status)
// and an ImageLinked event (which will update the artifact status).
cov_2gjxeanp0f.s[18]++;return builder.initiateBuild(credentials,id,addressChannels,{name:commit.repo.name,owner:commit.repo.owner,providerId:commit.repo.org.provider.providerId,branch:branchFromCommit(commit),defaultBranch:commit.repo.defaultBranch,sha:commit.sha},progressLog,context);});};}cov_2gjxeanp0f.s[19]++;exports.executeBuild=executeBuild;function branchFromCommit(commit){cov_2gjxeanp0f.f[9]++;const allBranchesThisCommitIsOn=(cov_2gjxeanp0f.s[20]++,commit.pushes.map(p=>{cov_2gjxeanp0f.f[10]++;cov_2gjxeanp0f.s[21]++;return p.branch;}));const theDefaultBranchIfThisCommitIsOnIt=(cov_2gjxeanp0f.s[22]++,allBranchesThisCommitIsOn.find(b=>{cov_2gjxeanp0f.f[11]++;cov_2gjxeanp0f.s[23]++;return b===commit.repo.defaultBranch;}));const someBranchIDoNotReallyCare=(cov_2gjxeanp0f.s[24]++,allBranchesThisCommitIsOn.find(b=>{cov_2gjxeanp0f.f[12]++;cov_2gjxeanp0f.s[25]++;return true;}));const branchToMarkTheBuildWith=(cov_2gjxeanp0f.s[26]++,(cov_2gjxeanp0f.b[4][0]++,theDefaultBranchIfThisCommitIsOnIt)||(cov_2gjxeanp0f.b[4][1]++,someBranchIDoNotReallyCare)||(cov_2gjxeanp0f.b[4][2]++,"master"));cov_2gjxeanp0f.s[27]++;return branchToMarkTheBuildWith;}cov_2gjxeanp0f.s[28]++;exports.branchFromCommit=branchFromCommit;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3JvZGpvaG5zb24vc2ZvcnphbmRvLWRldi9pZGVhLXByb2plY3RzL215LWZsb3cvc3JjL2NvbW1vbi9kZWxpdmVyeS9idWlsZC9leGVjdXRlQnVpbGQudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Rqb2huc29uL3Nmb3J6YW5kby1kZXYvaWRlYS1wcm9qZWN0cy9teS1mbG93L3NyYy9jb21tb24vZGVsaXZlcnkvYnVpbGQvZXhlY3V0ZUJ1aWxkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7R0FjRzs7Ozs7Ozs7OztBQUVILGtFQUFvRDtBQVVwRDs7OztHQUlHO0FBQ0gsc0JBQTZCLGFBQTRCLEVBQzVCLE9BQWdCO0lBQ3pDLE9BQU8sQ0FBTyxJQUF1QixFQUE4QixFQUFFO1FBQ2pFLE1BQU0sRUFBQyxNQUFNLEVBQUUsV0FBVyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBQyxHQUFHLElBQUksQ0FBQztRQUM5RSxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBRTdCLDBCQUFNLENBQUMsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFekYsbUdBQW1HO1FBQ25HLG9FQUFvRTtRQUNwRSxPQUFPLE9BQU8sQ0FBQyxhQUFhLENBQ3hCLFdBQVcsRUFDWCxFQUFFLEVBQ0YsZUFBZSxFQUNmO1lBQ0ksSUFBSSxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSTtZQUN0QixLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLO1lBQ3hCLFVBQVUsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsVUFBVTtZQUMvQyxNQUFNLEVBQUUsZ0JBQWdCLENBQUMsTUFBTSxDQUFDO1lBQ2hDLGFBQWEsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWE7WUFDeEMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxHQUFHO1NBQ2xCLEVBQ0QsV0FBVyxFQUNYLE9BQU8sQ0FBQyxDQUFDO0lBQ2pCLENBQUMsQ0FBQSxDQUFDO0FBQ04sQ0FBQztBQXpCRCxvQ0F5QkM7QUFFRCwwQkFBaUMsTUFBbUM7SUFDaEUsTUFBTSx5QkFBeUIsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNuRSxNQUFNLGtDQUFrQyxHQUFHLHlCQUF5QixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ2hILE1BQU0sMEJBQTBCLEdBQUcseUJBQXlCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0UsTUFBTSx3QkFBd0IsR0FBRyxrQ0FBa0MsSUFBSSwwQkFBMEIsSUFBSSxRQUFRLENBQUM7SUFDOUcsT0FBTyx3QkFBd0IsQ0FBQztBQUNwQyxDQUFDO0FBTkQsNENBTUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IMKpIDIwMTggQXRvbWlzdCwgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwiQGF0b21pc3QvYXV0b21hdGlvbi1jbGllbnRcIjtcbmltcG9ydCB7IEJ1aWxkZXIgfSBmcm9tIFwiLi4vLi4vLi4vc3BpL2J1aWxkL0J1aWxkZXJcIjtcbmltcG9ydCB7IFN0YXR1c0ZvckV4ZWN1dGVHb2FsIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGluZ3MvdHlwZXNcIjtcbmltcG9ydCB7IFByb2plY3RMb2FkZXIgfSBmcm9tIFwiLi4vLi4vcmVwby9Qcm9qZWN0TG9hZGVyXCI7XG5pbXBvcnQgeyBFeGVjdXRlR29hbFJlc3VsdCB9IGZyb20gXCIuLi9nb2Fscy9FeGVjdXRlR29hbFJlc3VsdFwiO1xuaW1wb3J0IHtcbiAgICBFeGVjdXRlR29hbFdpdGhMb2csXG4gICAgUnVuV2l0aExvZ0NvbnRleHQsXG59IGZyb20gXCIuLi9nb2Fscy9zdXBwb3J0L3JlcG9ydEdvYWxFcnJvclwiO1xuXG4vKipcbiAqIEV4ZWN1dGUgYnVpbGQgd2l0aCB0aGUgYXBwcm9wcmlhdGUgYnVpbGRlclxuICogQHBhcmFtIHByb2plY3RMb2FkZXIgdXNlZCB0byBsb2FkIHByb2plY3RzXG4gKiBAcGFyYW0gYnVpbGRlciBidWlsZGVyIHRvIHVzZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVCdWlsZChwcm9qZWN0TG9hZGVyOiBQcm9qZWN0TG9hZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyOiBCdWlsZGVyKTogRXhlY3V0ZUdvYWxXaXRoTG9nIHtcbiAgICByZXR1cm4gYXN5bmMgKHJ3bGM6IFJ1bldpdGhMb2dDb250ZXh0KTogUHJvbWlzZTxFeGVjdXRlR29hbFJlc3VsdD4gPT4ge1xuICAgICAgICBjb25zdCB7c3RhdHVzLCBjcmVkZW50aWFscywgaWQsIGNvbnRleHQsIHByb2dyZXNzTG9nLCBhZGRyZXNzQ2hhbm5lbHN9ID0gcndsYztcbiAgICAgICAgY29uc3QgY29tbWl0ID0gc3RhdHVzLmNvbW1pdDtcblxuICAgICAgICBsb2dnZXIuaW5mbyhcIkJ1aWxkaW5nIHByb2plY3QgJXM6JXMgd2l0aCBidWlsZGVyIFslc11cIiwgaWQub3duZXIsIGlkLnJlcG8sIGJ1aWxkZXIubmFtZSk7XG5cbiAgICAgICAgLy8gdGhlIGJ1aWxkZXIgaXMgZXhwZWN0ZWQgdG8gcmVzdWx0IGluIGEgY29tcGxldGUgQnVpbGQgZXZlbnQgKHdoaWNoIHdpbGwgdXBkYXRlIHRoZSBidWlsZCBzdGF0dXMpXG4gICAgICAgIC8vIGFuZCBhbiBJbWFnZUxpbmtlZCBldmVudCAod2hpY2ggd2lsbCB1cGRhdGUgdGhlIGFydGlmYWN0IHN0YXR1cykuXG4gICAgICAgIHJldHVybiBidWlsZGVyLmluaXRpYXRlQnVpbGQoXG4gICAgICAgICAgICBjcmVkZW50aWFscyxcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgYWRkcmVzc0NoYW5uZWxzLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IGNvbW1pdC5yZXBvLm5hbWUsXG4gICAgICAgICAgICAgICAgb3duZXI6IGNvbW1pdC5yZXBvLm93bmVyLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVySWQ6IGNvbW1pdC5yZXBvLm9yZy5wcm92aWRlci5wcm92aWRlcklkLFxuICAgICAgICAgICAgICAgIGJyYW5jaDogYnJhbmNoRnJvbUNvbW1pdChjb21taXQpLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRCcmFuY2g6IGNvbW1pdC5yZXBvLmRlZmF1bHRCcmFuY2gsXG4gICAgICAgICAgICAgICAgc2hhOiBjb21taXQuc2hhLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2dyZXNzTG9nLFxuICAgICAgICAgICAgY29udGV4dCk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJyYW5jaEZyb21Db21taXQoY29tbWl0OiBTdGF0dXNGb3JFeGVjdXRlR29hbC5Db21taXQpOiBzdHJpbmcge1xuICAgIGNvbnN0IGFsbEJyYW5jaGVzVGhpc0NvbW1pdElzT24gPSBjb21taXQucHVzaGVzLm1hcChwID0+IHAuYnJhbmNoKTtcbiAgICBjb25zdCB0aGVEZWZhdWx0QnJhbmNoSWZUaGlzQ29tbWl0SXNPbkl0ID0gYWxsQnJhbmNoZXNUaGlzQ29tbWl0SXNPbi5maW5kKGIgPT4gYiA9PT0gY29tbWl0LnJlcG8uZGVmYXVsdEJyYW5jaCk7XG4gICAgY29uc3Qgc29tZUJyYW5jaElEb05vdFJlYWxseUNhcmUgPSBhbGxCcmFuY2hlc1RoaXNDb21taXRJc09uLmZpbmQoYiA9PiB0cnVlKTtcbiAgICBjb25zdCBicmFuY2hUb01hcmtUaGVCdWlsZFdpdGggPSB0aGVEZWZhdWx0QnJhbmNoSWZUaGlzQ29tbWl0SXNPbkl0IHx8IHNvbWVCcmFuY2hJRG9Ob3RSZWFsbHlDYXJlIHx8IFwibWFzdGVyXCI7XG4gICAgcmV0dXJuIGJyYW5jaFRvTWFya1RoZUJ1aWxkV2l0aDtcbn1cbiJdfQ==