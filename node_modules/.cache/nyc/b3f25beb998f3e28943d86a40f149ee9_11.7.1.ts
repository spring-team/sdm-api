"use strict";/*
 * Copyright Â© 2018 Atomist, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cov_17pjsjapwd=function(){var path="/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/util/misc/LruCache.ts",hash="44c7a06c87029777af16f9c967250813c0dfb923",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/util/misc/LruCache.ts",statementMap:{"0":{start:{line:17,column:0},end:{line:17,column:62}},"1":{start:{line:24,column:8},end:{line:24,column:37}},"2":{start:{line:25,column:8},end:{line:25,column:22}},"3":{start:{line:26,column:8},end:{line:26,column:22}},"4":{start:{line:27,column:8},end:{line:27,column:32}},"5":{start:{line:30,column:8},end:{line:30,column:52}},"6":{start:{line:33,column:8},end:{line:33,column:20}},"7":{start:{line:34,column:23},end:{line:34,column:43}},"8":{start:{line:36,column:8},end:{line:42,column:9}},"9":{start:{line:37,column:12},end:{line:37,column:24}},"10":{start:{line:39,column:12},end:{line:39,column:41}},"11":{start:{line:40,column:12},end:{line:40,column:36}},"12":{start:{line:41,column:12},end:{line:41,column:40}},"13":{start:{line:43,column:8},end:{line:43,column:21}},"14":{start:{line:46,column:8},end:{line:50,column:9}},"15":{start:{line:48,column:32},end:{line:48,column:63}},"16":{start:{line:49,column:12},end:{line:49,column:44}},"17":{start:{line:51,column:8},end:{line:51,column:36}},"18":{start:{line:54,column:8},end:{line:54,column:39}},"19":{start:{line:57,column:0},end:{line:57,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:23,column:4},end:{line:23,column:5}},loc:{start:{line:23,column:34},end:{line:28,column:5}},line:23},"1":{name:"(anonymous_1)",decl:{start:{line:29,column:4},end:{line:29,column:5}},loc:{start:{line:29,column:16},end:{line:31,column:5}},line:29},"2":{name:"(anonymous_2)",decl:{start:{line:32,column:4},end:{line:32,column:5}},loc:{start:{line:32,column:13},end:{line:44,column:5}},line:32},"3":{name:"(anonymous_3)",decl:{start:{line:45,column:4},end:{line:45,column:5}},loc:{start:{line:45,column:20},end:{line:52,column:5}},line:45},"4":{name:"(anonymous_4)",decl:{start:{line:53,column:4},end:{line:53,column:5}},loc:{start:{line:53,column:15},end:{line:55,column:5}},line:53}},branchMap:{"0":{loc:{start:{line:23,column:16},end:{line:23,column:32}},type:"default-arg",locations:[{start:{line:23,column:29},end:{line:23,column:32}}],line:23},"1":{loc:{start:{line:36,column:8},end:{line:42,column:9}},type:"if",locations:[{start:{line:36,column:8},end:{line:42,column:9}},{start:{line:36,column:8},end:{line:42,column:9}}],line:36},"2":{loc:{start:{line:46,column:8},end:{line:50,column:9}},type:"if",locations:[{start:{line:46,column:8},end:{line:50,column:9}},{start:{line:46,column:8},end:{line:50,column:9}}],line:46}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0],"1":[0,0],"2":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_17pjsjapwd.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});/**
 * Simple Map-based cache.
 * Based on https://medium.com/spektrakel-blog/a-simple-lru-cache-in-typescript-cba0d9807c40
 */class LruCache{constructor(maxEntries=(cov_17pjsjapwd.b[0][0]++,200)){cov_17pjsjapwd.f[0]++;cov_17pjsjapwd.s[1]++;this.maxEntries=maxEntries;cov_17pjsjapwd.s[2]++;this.gets=0;cov_17pjsjapwd.s[3]++;this.hits=0;cov_17pjsjapwd.s[4]++;this.values=new Map();}get stats(){cov_17pjsjapwd.f[1]++;cov_17pjsjapwd.s[5]++;return{hits:this.hits,gets:this.gets};}get(key){cov_17pjsjapwd.f[2]++;cov_17pjsjapwd.s[6]++;++this.gets;const hasKey=(cov_17pjsjapwd.s[7]++,this.values.has(key));let entry;cov_17pjsjapwd.s[8]++;if(hasKey){cov_17pjsjapwd.b[1][0]++;cov_17pjsjapwd.s[9]++;++this.hits;// Peek the entry, re-insert for LRU strategy
cov_17pjsjapwd.s[10]++;entry=this.values.get(key);cov_17pjsjapwd.s[11]++;this.values.delete(key);cov_17pjsjapwd.s[12]++;this.values.set(key,entry);}else{cov_17pjsjapwd.b[1][1]++;}cov_17pjsjapwd.s[13]++;return entry;}put(key,value){cov_17pjsjapwd.f[3]++;cov_17pjsjapwd.s[14]++;if(this.values.size>=this.maxEntries){cov_17pjsjapwd.b[2][0]++;// least-recently used cache eviction strategy
const keyToDelete=(cov_17pjsjapwd.s[15]++,this.values.keys().next().value);cov_17pjsjapwd.s[16]++;this.values.delete(keyToDelete);}else{cov_17pjsjapwd.b[2][1]++;}cov_17pjsjapwd.s[17]++;this.values.set(key,value);}evict(key){cov_17pjsjapwd.f[4]++;cov_17pjsjapwd.s[18]++;return this.values.delete(key);}}cov_17pjsjapwd.s[19]++;exports.LruCache=LruCache;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3JvZGpvaG5zb24vc2ZvcnphbmRvLWRldi9pZGVhLXByb2plY3RzL215LWZsb3cvc3JjL3V0aWwvbWlzYy9McnVDYWNoZS50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3JvZGpvaG5zb24vc2ZvcnphbmRvLWRldi9pZGVhLXByb2plY3RzL215LWZsb3cvc3JjL3V0aWwvbWlzYy9McnVDYWNoZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7O0dBY0c7O0FBSUg7OztHQUdHO0FBQ0g7SUFPSSxZQUE2QixhQUFxQixHQUFHO1FBQXhCLGVBQVUsR0FBVixVQUFVLENBQWM7UUFMN0MsU0FBSSxHQUFHLENBQUMsQ0FBQztRQUNULFNBQUksR0FBRyxDQUFDLENBQUM7UUFFQSxXQUFNLEdBQW1CLElBQUksR0FBRyxFQUFhLENBQUM7SUFHL0QsQ0FBQztJQUVELElBQUksS0FBSztRQUNMLE9BQU8sRUFBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBQyxDQUFDO0lBQzlDLENBQUM7SUFFTSxHQUFHLENBQUMsR0FBVztRQUNsQixFQUFFLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDWixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNwQyxJQUFJLEtBQVEsQ0FBQztRQUNiLElBQUksTUFBTSxFQUFFO1lBQ1IsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ1osNkNBQTZDO1lBQzdDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM3QixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN4QixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDL0I7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBRU0sR0FBRyxDQUFDLEdBQVcsRUFBRSxLQUFRO1FBQzVCLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNyQyw4Q0FBOEM7WUFDOUMsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUM7WUFDcEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7U0FDbkM7UUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVNLEtBQUssQ0FBQyxHQUFXO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkMsQ0FBQztDQUVKO0FBekNELDRCQXlDQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgwqkgMjAxOCBBdG9taXN0LCBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFNpbXBsZUNhY2hlIH0gZnJvbSBcIi4vU2ltcGxlQ2FjaGVcIjtcblxuLyoqXG4gKiBTaW1wbGUgTWFwLWJhc2VkIGNhY2hlLlxuICogQmFzZWQgb24gaHR0cHM6Ly9tZWRpdW0uY29tL3NwZWt0cmFrZWwtYmxvZy9hLXNpbXBsZS1scnUtY2FjaGUtaW4tdHlwZXNjcmlwdC1jYmEwZDk4MDdjNDBcbiAqL1xuZXhwb3J0IGNsYXNzIExydUNhY2hlPFQ+IGltcGxlbWVudHMgU2ltcGxlQ2FjaGU8VD4ge1xuXG4gICAgcHJpdmF0ZSBnZXRzID0gMDtcbiAgICBwcml2YXRlIGhpdHMgPSAwO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSB2YWx1ZXM6IE1hcDxzdHJpbmcsIFQ+ID0gbmV3IE1hcDxzdHJpbmcsIFQ+KCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IG1heEVudHJpZXM6IG51bWJlciA9IDIwMCkge1xuICAgIH1cblxuICAgIGdldCBzdGF0cygpIHtcbiAgICAgICAgcmV0dXJuIHtoaXRzOiB0aGlzLmhpdHMsIGdldHM6IHRoaXMuZ2V0c307XG4gICAgfVxuXG4gICAgcHVibGljIGdldChrZXk6IHN0cmluZyk6IFQge1xuICAgICAgICArK3RoaXMuZ2V0cztcbiAgICAgICAgY29uc3QgaGFzS2V5ID0gdGhpcy52YWx1ZXMuaGFzKGtleSk7XG4gICAgICAgIGxldCBlbnRyeTogVDtcbiAgICAgICAgaWYgKGhhc0tleSkge1xuICAgICAgICAgICAgKyt0aGlzLmhpdHM7XG4gICAgICAgICAgICAvLyBQZWVrIHRoZSBlbnRyeSwgcmUtaW5zZXJ0IGZvciBMUlUgc3RyYXRlZ3lcbiAgICAgICAgICAgIGVudHJ5ID0gdGhpcy52YWx1ZXMuZ2V0KGtleSk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcy5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzLnNldChrZXksIGVudHJ5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgfVxuXG4gICAgcHVibGljIHB1dChrZXk6IHN0cmluZywgdmFsdWU6IFQpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVzLnNpemUgPj0gdGhpcy5tYXhFbnRyaWVzKSB7XG4gICAgICAgICAgICAvLyBsZWFzdC1yZWNlbnRseSB1c2VkIGNhY2hlIGV2aWN0aW9uIHN0cmF0ZWd5XG4gICAgICAgICAgICBjb25zdCBrZXlUb0RlbGV0ZSA9IHRoaXMudmFsdWVzLmtleXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcy5kZWxldGUoa2V5VG9EZWxldGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsdWVzLnNldChrZXksIHZhbHVlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZXZpY3Qoa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzLmRlbGV0ZShrZXkpO1xuICAgIH1cblxufVxuIl19