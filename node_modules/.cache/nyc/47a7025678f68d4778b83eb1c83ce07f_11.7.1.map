{"version":3,"file":"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/handlers/events/delivery/build/local/maven/mavenLogInterpreterTest.ts","sources":["/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/handlers/events/delivery/build/local/maven/mavenLogInterpreterTest.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;AAEH,uCAAuC;AACvC,wHAAqH;AAErH,QAAQ,CAAC,qBAAqB,EAAE,GAAG,EAAE;IAEjC,EAAE,CAAC,yBAAyB,EAAE,GAAG,EAAE;QAC/B,MAAM,CAAC,GAAG,yCAAmB,CAAC,EAAE,CAAC,CAAC;QAClC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACZ,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,EAAE,uBAAuB,CAAC,CAAC;QACjD,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,iCAAiC,EAAE,GAAG,EAAE;QACvC,MAAM,CAAC,GAAG,yCAAmB,CAAC,KAAK,CAAC,CAAC;QACrC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACZ,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC;QACnC,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,mCAAmC,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC;QACrF,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,kCAAkC,EAAE,GAAG,EAAE;QACxC,MAAM,CAAC,GAAG,yCAAmB,CAAC,KAAK,CAAC,CAAC;QACrC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACZ,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC;QACnC,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC;QACrE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,kCAAkC,EAAE,GAAG,EAAE;QACxC,MAAM,CAAC,GAAG,yCAAmB,CAAC,aAAa,CAAC,CAAC;QAC7C,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACZ,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC;QACnC,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC;QAC3E,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;QAC9C,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,2BAA2B,EAAE,GAAG,EAAE;QACjC,MAAM,CAAC,GAAG,yCAAmB,CAAC,QAAQ,CAAC,CAAC;QACxC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACZ,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;QACjC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;AAEP,CAAC,CAAC,CAAC;AAEH,oBAAoB;AACpB,MAAM,KAAK,GAAG;;;;;;;;;;;;;;;;;;kGAkBoF,CAAC;AAEnG,MAAM,QAAQ,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gFAwE+D,CAAC;AAEjF,MAAM,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uFAsCyE,CAAC;AAExF,MAAM,aAAa,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uFAwDiE,CAAC","sourcesContent":["/*\n * Copyright © 2018 Atomist, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as assert from \"power-assert\";\nimport { MavenLogInterpreter } from \"../../../../../../../src/common/delivery/build/local/maven/mavenLogInterpreter\";\n\ndescribe(\"MavenLogInterpreter\", () => {\n\n    it(\"should handle empty log\", () => {\n        const r = MavenLogInterpreter(\"\");\n        assert(!!r);\n        assert.equal(r.message, \"Failed with empty log\");\n        assert(!r.data.timeMillis);\n    });\n\n    it(\"should handle short failure log\", () => {\n        const r = MavenLogInterpreter(Fail1);\n        assert(!!r);\n        assert(r.relevantPart.length > 30);\n        assert(r.relevantPart.includes(\"Unknown lifecycle phase \\\"build\\\"\"), r.relevantPart);\n        assert.equal(r.data.timeMillis, 261);\n    });\n\n    it(\"should handle longer failure log\", () => {\n        const r = MavenLogInterpreter(Fail2);\n        assert(!!r);\n        assert(r.relevantPart.length > 30);\n        assert(r.relevantPart.includes(\"COMPILATION ERROR\"), r.relevantPart);\n        assert.equal(r.data.timeMillis, 1814);\n    });\n\n    it(\"should handle failure with tests\", () => {\n        const r = MavenLogInterpreter(FailWithTests);\n        assert(!!r);\n        assert(r.relevantPart.length > 30);\n        assert(r.relevantPart.includes(\"There are test failures\"), r.relevantPart);\n        assert.equal(r.data.testInfo.failingTests, 0);\n        assert.equal(r.data.testInfo.errors, 1);\n        assert.equal(r.data.timeMillis, 6151);\n    });\n\n    it(\"should handle success log\", () => {\n        const r = MavenLogInterpreter(Success1);\n        assert(!!r);\n        assert.equal(r.relevantPart, \"\");\n        assert.equal(r.data.timeMillis, 1640);\n    });\n\n});\n\n/* tslint:disable */\nconst Fail1 = `[INFO] Scanning for projects...\n[INFO] \n[INFO] ------------------------------------------------------------------------\n[INFO] Building spring-rest-seed 0.1.0-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 0.261 s\n[INFO] Finished at: 2018-03-12T13:36:05+11:00\n[INFO] Final Memory: 10M/245M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Unknown lifecycle phase \"build\". You must specify a valid lifecycle phase or a goal in the format <plugin-prefix>:<goal> or <plugin-group-id>:<plugin-artifact-id>[:<plugin-version>]:<goal>. Available lifecycle phases are: validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy, pre-clean, clean, post-clean, pre-site, site, post-site, site-deploy. -> [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/LifecyclePhaseNotFoundException`;\n\nconst Success1 = `[INFO] Scanning for projects...\n[INFO] \n[INFO] ------------------------------------------------------------------------\n[INFO] Building spring-rest-seed 0.1.0-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- git-commit-id-plugin:2.2.2:revision (default) @ buick ---\n[INFO] dotGitDirectory /Users/rodjohnson/temp/buick/.git\n[INFO] git.build.user.name Rod Johnson\n[INFO] git.build.user.email rod@atomist.com\n[INFO] git.branch master\n[INFO] --always = true\n[INFO] --dirty = -dirty\n[INFO] --abbrev = 7\n[INFO] Tag refs [[]]\n[INFO] Created map: [{}]\n[INFO] HEAD is [c0a9472937df56b19ef5fe04d38fc04582ef78b4]\n[INFO] git.commit.id.describe c0a9472\n[INFO] git.commit.id c0a9472937df56b19ef5fe04d38fc04582ef78b4\n[INFO] git.commit.id.abbrev c0a9472\n[INFO] git.dirty false\n[INFO] git.commit.user.name Christian Dupuis\n[INFO] git.commit.user.email cd@atomist.com\n[INFO] git.commit.message.full fix up app events\n[INFO] git.commit.message.short fix up app events\n[INFO] git.commit.time 2017-12-14T18:44:09+1100\n[INFO] git.remote.origin.url https://github.com/spring-team/buick\n[INFO] git.tags \n[INFO] Tag refs [[]]\n[INFO] git.closest.tag.name \n[INFO] Tag refs [[]]\n[INFO] git.closest.tag.commit.count \n[INFO] git.build.time 2018-03-12T13:38:44+1100\n[INFO] git.build.version 0.1.0-SNAPSHOT\n[INFO] git.build.host Rods-MBP-104.local\n[INFO] git.commit.id.describe-short c0a9472\n[INFO] found property git.build.user.email\n[INFO] found property git.build.host\n[INFO] found property git.dirty\n[INFO] found property git.remote.origin.url\n[INFO] found property git.closest.tag.name\n[INFO] found property git.commit.id.describe-short\n[INFO] found property git.commit.user.email\n[INFO] found property git.commit.time\n[INFO] found property git.commit.message.full\n[INFO] found property git.build.version\n[INFO] found property git.commit.message.short\n[INFO] found property git.commit.id.abbrev\n[INFO] found property git.branch\n[INFO] found property git.build.user.name\n[INFO] found property git.closest.tag.commit.count\n[INFO] found property git.commit.id.describe\n[INFO] found property git.commit.id\n[INFO] found property git.tags\n[INFO] found property git.build.time\n[INFO] found property git.commit.user.name\n[INFO] Reading existing properties file [/Users/rodjohnson/temp/buick/target/classes/git.properties] (for module spring-rest-seed)...\n[INFO] Properties file [/Users/rodjohnson/temp/buick/target/classes/git.properties] is up-to-date (for module spring-rest-seed)...\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ buick ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 1 resource\n[INFO] Copying 0 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ buick ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 1.640 s\n[INFO] Finished at: 2018-03-12T13:38:44+11:00\n[INFO] Final Memory: 19M/266M\n[INFO] ------------------------------------------------------------------------`;\n\nconst Fail2 = `[INFO] Building spring-rest-seed 0.1.0-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] >>> spring-boot-maven-plugin:1.5.4.RELEASE:run (default-cli) > test-compile @ wynyard >>>\n[INFO] \n[INFO] --- git-commit-id-plugin:2.2.2:revision (default) @ wynyard ---\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ wynyard ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 2 resources\n[INFO] Copying 0 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ wynyard ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 3 source files to /private/var/folders/86/p817yp991bdddrqr_bdf20gh0000gp/T/tmp-37499RMXgIoo246rw/target/classes\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] /private/var/folders/86/p817yp991bdddrqr_bdf20gh0000gp/T/tmp-37499RMXgIoo246rw/src/main/java/Bad.java:[1,1] class, interface, or enum expected\n[ERROR] /private/var/folders/86/p817yp991bdddrqr_bdf20gh0000gp/T/tmp-37499RMXgIoo246rw/src/main/java/Bad.java:[1,6] class, interface, or enum expected\n[INFO] 2 errors \n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 1.814 s\n[INFO] Finished at: 2018-04-12T14:29:17+10:00\n[INFO] Final Memory: 21M/272M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project wynyard: Compilation failure: Compilation failure: \n[ERROR] /private/var/folders/86/p817yp991bdddrqr_bdf20gh0000gp/T/tmp-37499RMXgIoo246rw/src/main/java/Bad.java:[1,1] class, interface, or enum expected\n[ERROR] /private/var/folders/86/p817yp991bdddrqr_bdf20gh0000gp/T/tmp-37499RMXgIoo246rw/src/main/java/Bad.java:[1,6] class, interface, or enum expected\n[ERROR] -> [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException`;\n\nconst FailWithTests = `[INFO] Scanning for projects...\n[INFO] \n[INFO] ------------------------------------------------------------------------\n[INFO] Building spring-rest-seed 0.0.1-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\nDownloading: https://atomist.jfrog.io/atomist/libs-release-demo/com/atomist/spring-boot-agent/maven-metadata.xml\nDownloading: https://atomist.jfrog.io/atomist/libs-snapshot-demo/com/atomist/spring-boot-agent/maven-metadata.xml\n[INFO] \n[INFO] --- git-commit-id-plugin:2.2.2:revision (default) @ spring-rest-seed ---\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ spring-rest-seed ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 2 resources\n[INFO] Copying 0 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ spring-rest-seed ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ spring-rest-seed ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] skip non existing resourceDirectory /Users/rodjohnson/temp/spring-rest-seed/src/test/resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ spring-rest-seed ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] --- maven-surefire-plugin:2.18.1:test (default-test) @ spring-rest-seed ---\n[INFO] Surefire report directory: /Users/rodjohnson/temp/spring-rest-seed/target/surefire-reports\n\n-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\n... skipped Spring output\n\nResults :\n\nTests in error: \n  SpringRestSeedApplicationTests.contextLoads » IllegalState Failed to load Appl...\n\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0\n\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 6.151 s\n[INFO] Finished at: 2018-04-12T14:53:29+10:00\n[INFO] Final Memory: 24M/310M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.18.1:test (default-test) on project spring-rest-seed: There are test failures.\n[ERROR] \n[ERROR] Please refer to /Users/rodjohnson/temp/spring-rest-seed/target/surefire-reports for the individual test results.\n[ERROR] -> [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException`;\n"]}