{"version":3,"file":"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/handlers/events/delivery/build/local/npm/npmLogInterpreterTest.ts","sources":["/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/handlers/events/delivery/build/local/npm/npmLogInterpreterTest.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;AAEH,uCAAuC;AACvC,kHAA+G;AAE/G,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;IAE/B,EAAE,CAAC,yBAAyB,EAAE,GAAG,EAAE;QAC/B,MAAM,CAAC,GAAG,qCAAiB,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IACf,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,iCAAiC,EAAE,GAAG,EAAE;QACvC,MAAM,CAAC,GAAG,qCAAiB,CAAC,KAAK,CAAC,CAAC;QACnC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,yBAAyB,CAAC,CAAC;QACvC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC;QAC5C,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC;QAC5C,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,yBAAyB,CAAC,CAAC;IAC/C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,4BAA4B,EAAE,GAAG,EAAE;QAClC,MAAM,CAAC,GAAG,qCAAiB,CAAC,KAAK,CAAC,CAAC;QACnC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC;QAC5C,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC;IAChD,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,uCAAuC,EAAE,GAAG,EAAE;QAC7C,MAAM,CAAC,GAAG,qCAAiB,CAAC,KAAK,CAAC,CAAC;QACnC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,EAAE,mCAAmC,CAAC,CAAC;QAC7D,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC;IAChD,CAAC,CAAC,CAAC;AAEP,CAAC,CAAC,CAAC;AAEH,oBAAoB;AACpB,MAAM,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCAmEqB,CAAC;AAEpC,MAAM,aAAa,GAAG;;;;;;;;;;;;;;;;;;;;;;;OAuBf,CAAC;AAER,MAAM,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA6Lb,CAAC;AAEF,MAAM,aAAa,GAAG;;;;;;;;;;OAUf,CAAC;AAER,MAAM,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAwCb,CAAC;AAEF,MAAM,aAAa,GAAG;;;;;;;;;OASf,CAAC","sourcesContent":["/*\n * Copyright © 2018 Atomist, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as assert from \"power-assert\";\nimport { NpmLogInterpreter } from \"../../../../../../../src/common/delivery/build/local/npm/npmLogInterpreter\";\n\ndescribe(\"NpmLogInterpreter\", () => {\n\n    it(\"should handle empty log\", () => {\n        const r = NpmLogInterpreter(\"\");\n        assert(!r);\n    });\n\n    it(\"should handle short failure log\", () => {\n        const r = NpmLogInterpreter(Fail1);\n        assert(!!r, \"interpretation expected\");\n        assert.equal(r.message, \"Tests: 1 failing\");\n        assert.equal(r.relevantPart, RelevantPart1);\n        assert(!r.data, \"there should be no data\");\n    });\n\n    it(\"should handle test failure\", () => {\n        const r = NpmLogInterpreter(Fail2);\n        assert.equal(r.message, \"Tests: 1 failing\");\n        assert.equal(r.relevantPart, RelevantPart2);\n    });\n\n    it(\"should handle general npm run failure\", () => {\n        const r = NpmLogInterpreter(Fail3);\n        assert.equal(r.message, \"ERROR: \\\"compile\\\" exited with 1.\");\n        assert.equal(r.relevantPart, RelevantPart3);\n    });\n\n});\n\n/* tslint:disable */\nconst Fail1 = `to /tmp/tmp-5086mapRbHkXFZF6\n2018-04-12T06:00:32.267Z [m:5086] [info ]     ✓ should copy one (790ms)\n2018-04-12T06:00:32.267Z [m:5086] [info ] \n2018-04-12T06:00:32.267Z [m:5086] [info ] \n2018-04-12T06:00:32.268Z [m:5086] [info ]   116 passing (44s)\n2018-04-12T06:00:32.268Z [m:5086] [info ]   1 pending\n2018-04-12T06:00:32.268Z [m:5086] [info ]   1 failing\n2018-04-12T06:00:32.268Z [m:5086] [info ] \n2018-04-12T06:00:32.272Z [m:5086] [info ]   1) addHeaderFix\n       should lint and make fixes:\n\n      AssertionError [ERR_ASSERTION]:   # addHeaderFixTest.ts:55\n  \n  assert.equal(r.code, 0)\n         | |    |     \n         | 1    false \n         Object{code:1,message:\"Edited\"}\n  \n  [number] 0\n  => 0\n  [number] r.code\n  => 1\n  \n      + expected - actual\n\n      -false\n      +true\n      \n      at Decorator._callFunc (node_modules/empower-core/lib/decorator.js:110:20)\n      at Decorator.concreteAssert (node_modules/empower-core/lib/decorator.js:103:17)\n      at decoratedAssert (node_modules/empower-core/lib/decorate.js:49:30)\n      at powerAssert (node_modules/empower-core/index.js:63:32)\n      at Object.<anonymous> (test/common/delivery/code/autofix/node/addHeaderFixTest.ts:90:9)\n      at Generator.next (<anonymous>)\n      at fulfilled (test/common/delivery/code/autofix/node/addHeaderFixTest.ts:30:32)\n      at propagateAslWrapper (node_modules/async-listener/index.js:502:23)\n      at node_modules/async-listener/glue.js:188:31\n      at node_modules/async-listener/index.js:539:70\n      at node_modules/async-listener/glue.js:188:31\n      at <anonymous>\n      at process._tickCallback (internal/process/next_tick.js:182:7)\n\n2018-04-12T06:00:32.273Z [m:5086] [info ] \n2018-04-12T06:00:32.273Z [m:5086] [info ] \n2018-04-12T06:00:32.274Z [m:5086] [info ] Shutdown initiated. Calling shutdown hooks\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! @atomist/github-sdm@0.4.0-20180412055619 test: \\`mocha --exit --require espower-typescript/guess \"test/**/*.ts\"\\`\nnpm ERR! Exit status 1\nnpm ERR! \nnpm ERR! Failed at the @atomist/github-sdm@0.4.0-20180412055619 test script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2018-04-12T06_00_32_295Z-debug.log\nERROR: \"test\" exited with 1.\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! @atomist/github-sdm@0.4.0-20180412055619 build: \\`npm-run-all compile test\\`\nnpm ERR! Exit status 1\nnpm ERR! \nnpm ERR! Failed at the @atomist/github-sdm@0.4.0-20180412055619 build script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2018-04-12T06_00_32_340Z-debug.log\nStopping build commands due to error on npm run buildERROR: Failure reported: undefined\nError: Failure reported: undefined`;\n\nconst RelevantPart1 = `\\`\\`\\`\n  1 failing\n\n  1) addHeaderFix\n       should lint and make fixes:\n\n      AssertionError [ERR_ASSERTION]:   # addHeaderFixTest.ts:55\n  \n  assert.equal(r.code, 0)\n         | |    |     \n         | 1    false \n         Object{code:1,message:\"Edited\"}\n  \n  [number] 0\n  => 0\n  [number] r.code\n  => 1\n  \n      + expected - actual\n\n      -false\n      +true\n      \n\\`\\`\\``;\n\nconst Fail2 = `\n> @atomist/sample-sdm@0.5.1 build /Users/jessitron/code/atomist/sample-sdm\n> npm-run-all compile test\n\n\n> @atomist/sample-sdm@0.5.1 compile /Users/jessitron/code/atomist/sample-sdm\n> npm-run-all git:info compile:gql compile:ts\n\n\n> @atomist/sample-sdm@0.5.1 git:info /Users/jessitron/code/atomist/sample-sdm\n> atomist git\n\nSuccessfully wrote git information to '/Users/jessitron/code/atomist/sample-sdm/git-info.json'\n\n> @atomist/sample-sdm@0.5.1 compile:gql /Users/jessitron/code/atomist/sample-sdm\n> npm-run-all gql:gen gql:copy\n\n\n> @atomist/sample-sdm@0.5.1 gql:gen /Users/jessitron/code/atomist/sample-sdm\n> atomist gql-gen --no-install \"src/graphql/**/*.graphql\"\n\nRunning GraphQL code generator in '/Users/jessitron/code/atomist/sample-sdm'\nLoading GraphQL Introspection from file: node_modules/@atomist/automation-client/graph/schema.cortex.json...\nGenerated file written to /Users/jessitron/code/atomist/sample-sdm/src/typings/types.ts\n\n> @atomist/sample-sdm@0.5.1 gql:copy /Users/jessitron/code/atomist/sample-sdm\n> copyfiles \"./src/**/*.graphql\" build\n\n\n> @atomist/sample-sdm@0.5.1 compile:ts /Users/jessitron/code/atomist/sample-sdm\n> tsc --project .\n\n\n> @atomist/sample-sdm@0.5.1 test /Users/jessitron/code/atomist/sample-sdm\n> mocha --exit --require espower-typescript/guess \"test/**/*.ts\"\n\n2018-05-05T12:48:35.811Z [m:17866] [info ] Created new deployments record\n2018-05-05T12:48:42.687Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.693Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.698Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   HardCodePropertyReviewer\n2018-05-05T12:48:42.706Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should not find any problems in empty project\n2018-05-05T12:48:42.719Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ pass harmless properties file\n2018-05-05T12:48:42.721Z [m:17866] [info ] Value of server.port: '8080' is hard coded\n2018-05-05T12:48:42.722Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ flag bad port property\n2018-05-05T12:48:42.723Z [m:17866] [info ] Value of server.port: '\\${PORT}' is not hard coded\n2018-05-05T12:48:42.723Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ accept good port property\n2018-05-05T12:48:42.724Z [m:17866] [info ] Value of spring.datasource.password: 'tiger' is hard coded\n2018-05-05T12:48:42.725Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ reject hard-coded password\n2018-05-05T12:48:42.725Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.726Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   fileIoImport\n2018-05-05T12:48:42.729Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should not find any problems in empty project\n2018-05-05T12:48:42.731Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ pass harmless Java code\n2018-05-05T12:48:42.734Z [m:17866] [info ] Import java.io.File: Antipattern import java.io.File found in src/main/java/Thing.java\n2018-05-05T12:48:42.736Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ flag file import in Java\n2018-05-05T12:48:42.738Z [m:17866] [info ] Import java.io.File: Antipattern import java.io.File found in src/main/kotlin/Thing.kt\n2018-05-05T12:48:42.739Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ flag file import in Kotlin\n2018-05-05T12:48:42.740Z [m:17866] [info ] Import java.io.File: Antipattern import java.io.File found in src/main/java/com/atomist/Melb1Application.java\n2018-05-05T12:48:42.741Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ flag error in nested package\n2018-05-05T12:48:42.741Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.741Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   importDotStar\n2018-05-05T12:48:42.743Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should not find any problems in empty project\n2018-05-05T12:48:42.744Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ pass harmless Java code\n2018-05-05T12:48:42.745Z [m:17866] [info ] Lazy import: Antipattern /import .*\\\\.\\\\*/ found in src/main/java/Thing.java\n2018-05-05T12:48:42.746Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ flag .* import in Java\n2018-05-05T12:48:42.746Z [m:17866] [info ] Lazy import: Antipattern /import .*\\\\.\\\\*/ found in src/main/kotlin/Thing.kt\n2018-05-05T12:48:42.748Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ flag .* import in Kotlin\n2018-05-05T12:48:42.750Z [m:17866] [info ] Lazy import: Antipattern /import .*\\\\.\\\\*/ found in src/main/java/com/atomist/Melb1Application.java\n2018-05-05T12:48:42.750Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ flag error in nested package\n2018-05-05T12:48:42.750Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.750Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   ProvidedDependencyReviewer\n2018-05-05T12:48:42.753Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should not find any problems in empty project\n2018-05-05T12:48:42.767Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ pass harmless POM\n2018-05-05T12:48:42.769Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ flag provided pom\n2018-05-05T12:48:42.770Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.770Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   SpringBootSuccessPattern\n2018-05-05T12:48:42.770Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should match\n2018-05-05T12:48:42.771Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should match slow deployment\n2018-05-05T12:48:42.771Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.771Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   commit rendering\n2018-05-05T12:48:42.773Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ can render a commit\n2018-05-05T12:48:42.773Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.774Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   addK8SpecEditor\n2018-05-05T12:48:42.776Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add a file\n2018-05-05T12:48:42.776Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.776Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   addHeaderEditor\n2018-05-05T12:48:42.779Z [m:17866] [info ] Adding header of length 598 to src/main/java/Thing1.java\n2018-05-05T12:48:42.781Z [m:17866] [info ] 2 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 1 headers added. 1 files skipped\n2018-05-05T12:48:42.782Z [m:17866] [info ] respond > *License header editor* on \\`abcd\\`: 2 files matched \\`**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}\\`. 1 headers added. 1 files skipped :carousel_horse:\n2018-05-05T12:48:42.783Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add header to Java when not found\n2018-05-05T12:48:42.785Z [m:17866] [info ] Adding header of length 598 to src/Thing1.ts\n2018-05-05T12:48:42.786Z [m:17866] [info ] 2 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 1 headers added. 1 files skipped\n2018-05-05T12:48:42.786Z [m:17866] [info ] respond > *License header editor* on \\`abcd\\`: 2 files matched \\`**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}\\`. 1 headers added. 1 files skipped :carousel_horse:\n2018-05-05T12:48:42.786Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add header to TypeScript when not found\n2018-05-05T12:48:42.788Z [m:17866] [info ] 1 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 0 headers added. 1 files skipped\n2018-05-05T12:48:42.788Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should respect exclude glob\n2018-05-05T12:48:42.789Z [m:17866] [info ] Adding header of length 598 to src/Thing1.ts\n2018-05-05T12:48:42.790Z [m:17866] [info ] 2 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 1 headers added. 1 files skipped\n2018-05-05T12:48:42.790Z [m:17866] [info ] respond > *License header editor* on \\`abcd\\`: 2 files matched \\`**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}\\`. 1 headers added. 1 files skipped :carousel_horse:\n2018-05-05T12:48:42.790Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should ignore irrelevant exclude glob\n2018-05-05T12:48:42.791Z [m:17866] [info ] Adding header of length 598 to src/Thing1.js\n2018-05-05T12:48:42.792Z [m:17866] [info ] 2 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 1 headers added. 1 files skipped\n2018-05-05T12:48:42.792Z [m:17866] [info ] respond > *License header editor* on \\`abcd\\`: 2 files matched \\`**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}\\`. 1 headers added. 1 files skipped :carousel_horse:\n2018-05-05T12:48:42.792Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add header to JS when not found\n2018-05-05T12:48:42.793Z [m:17866] [info ] Adding header of length 598 to src/Thing1.scala\n2018-05-05T12:48:42.793Z [m:17866] [info ] 1 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 1 headers added. 0 files skipped\n2018-05-05T12:48:42.794Z [m:17866] [info ] respond > *License header editor* on \\`abcd\\`: 1 files matched \\`**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}\\`. 1 headers added. 0 files skipped :carousel_horse:\n2018-05-05T12:48:42.794Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add header to Scala when not found\n2018-05-05T12:48:42.795Z [m:17866] [info ] Adding header of length 598 to src/Thing1.c\n2018-05-05T12:48:42.795Z [m:17866] [info ] 1 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 1 headers added. 0 files skipped\n2018-05-05T12:48:42.795Z [m:17866] [info ] respond > *License header editor* on \\`abcd\\`: 1 files matched \\`**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}\\`. 1 headers added. 0 files skipped :carousel_horse:\n2018-05-05T12:48:42.796Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add header to C when not found\n2018-05-05T12:48:42.797Z [m:17866] [info ] Adding header of length 598 to src/Thing1.cpp\n2018-05-05T12:48:42.797Z [m:17866] [info ] 1 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 1 headers added. 0 files skipped\n2018-05-05T12:48:42.797Z [m:17866] [info ] respond > *License header editor* on \\`abcd\\`: 1 files matched \\`**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}\\`. 1 headers added. 0 files skipped :carousel_horse:\n2018-05-05T12:48:42.797Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add header to C++ when not found\n2018-05-05T12:48:42.799Z [m:17866] [info ] Adding header of length 598 to src/Thing1.kt\n2018-05-05T12:48:42.799Z [m:17866] [info ] 1 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 1 headers added. 0 files skipped\n2018-05-05T12:48:42.799Z [m:17866] [info ] respond > *License header editor* on \\`abcd\\`: 1 files matched \\`**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}\\`. 1 headers added. 0 files skipped :carousel_horse:\n2018-05-05T12:48:42.799Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add header to Kotlin when not found\n2018-05-05T12:48:42.843Z [m:17866] [info ] Adding header of length 598 to src/main/java/Thing1.java\n2018-05-05T12:48:42.845Z [m:17866] [info ] 2 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 1 headers added. 1 files skipped\n2018-05-05T12:48:42.845Z [m:17866] [info ] respond > *License header editor* on \\`abcd\\`: 2 files matched \\`**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}\\`. 1 headers added. 1 files skipped :carousel_horse:\n2018-05-05T12:48:42.846Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add header when not found and persist to disk (47ms)\n2018-05-05T12:48:42.847Z [m:17866] [info ] 2 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 0 headers added. 2 files skipped\n2018-05-05T12:48:42.848Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should not add header when already present\n2018-05-05T12:48:42.850Z [m:17866] [info ] respond > \\`src/main/java/Thing1.java\\` already has a different header\n2018-05-05T12:48:42.851Z [m:17866] [info ] 2 files matched [**/{*.ts,*.java,*.js,*.scala,*.c,*.cpp,*.kt}]. 0 headers added. 2 files skipped\n2018-05-05T12:48:42.852Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should not add header when another header is present\n2018-05-05T12:48:42.853Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.853Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   addCloudFoundryManifest\n2018-05-05T12:48:42.861Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add a manifest to Spring Boot project when none exists\n2018-05-05T12:48:42.863Z [m:17866] [info ] respond > Unable to add Cloud Foundry manifest to project \\`owner:repoName\\`: Neither Maven nor Node\n2018-05-05T12:48:42.863Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should not add a manifest to non Spring Boot Java project\n2018-05-05T12:48:42.865Z [m:17866] [info ] addCloudFoundryManifestEditor: Node project {\"owner\":\"owner\",\"repo\":\"repoName\"}: automation client=false\n2018-05-05T12:48:42.865Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add a non automation client manifest to Node project when none exists\n2018-05-05T12:48:42.866Z [m:17866] [info ] addCloudFoundryManifestEditor: Node project {\"owner\":\"owner\",\"repo\":\"repoName\"}: automation client=true\n2018-05-05T12:48:42.867Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ should add an automation client manifest to Node project when none exists\n2018-05-05T12:48:42.867Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.867Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   javaPatterns\n2018-05-05T12:48:42.867Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     JavaIdentifierRegExp\n2018-05-05T12:48:42.869Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should match valid identifiers\n2018-05-05T12:48:42.870Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should reject invalid identifiers\n2018-05-05T12:48:42.870Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     JavaPackageRegExp\n2018-05-05T12:48:42.871Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should match valid packages\n2018-05-05T12:48:42.871Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should reject invalid packages\n2018-05-05T12:48:42.872Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     MavenGroupIdRegExp\n2018-05-05T12:48:42.873Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should match valid ids\n2018-05-05T12:48:42.875Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should reject invalid ids\n2018-05-05T12:48:42.876Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:42.877Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   springBootGenerator\n2018-05-05T12:48:42.878Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     update README\n2018-05-05T12:48:42.883Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should get correct content\n2018-05-05T12:48:42.883Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     update YML\n2018-05-05T12:48:42.885Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should put in Atomist team id\n2018-05-05T12:48:42.885Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     run end to end\n2018-05-05T12:48:44.196Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       1) should put in Atomist team id and ensure valid Java\n2018-05-05T12:48:44.198Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:44.198Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   Rendering a goal graph\n2018-05-05T12:48:44.201Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     ✓ renders the HTTP Service Goals\n2018-05-05T12:48:44.201Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:44.201Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   springPushTests\n2018-05-05T12:48:44.202Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]     HasSpringBootApplicationClass\n2018-05-05T12:48:44.203Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should not find maven in empty repo\n2018-05-05T12:48:44.204Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should find maven in repo with named pom but no Spring application\n2018-05-05T12:48:44.253Z [\u001b[34mm\u001b[39m:\u001b[34m17866\u001b[39m] [\u001b[34mdebug\u001b[39m] Parsing file [src/main/java/App.java] using ANTLR grammar, looking for production 'compilationUnit'\n2018-05-05T12:48:44.344Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]       ✓ should find in repo with named pom and Spring application class (139ms)\n2018-05-05T12:48:44.344Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:44.345Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:44.345Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   50 passing (2s)\n2018-05-05T12:48:44.345Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   1 failing\n2018-05-05T12:48:44.345Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:44.346Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m]   1) springBootGenerator\n       run end to end\n         should put in Atomist team id and ensure valid Java:\n     ChildProcessError: Command failed: git clone --depth 1 https://null:x-oauth-basic@github.com/spring-team/spring-rest-seed.git /var/folders/gl/d94_8f5n00d17l6fdx37yzxm0000gn/T/tmp-17866wR6ybfinglvw\nCloning into '/var/folders/gl/d94_8f5n00d17l6fdx37yzxm0000gn/T/tmp-17866wR6ybfinglvw'...\nfatal: unable to access 'https://null:x-oauth-basic@github.com/spring-team/spring-rest-seed.git/': Could not resolve host: github.com\n \\`git clone --depth 1 https://null:x-oauth-basic@github.com/spring-team/spring-rest-seed.git /var/folders/gl/d94_8f5n00d17l6fdx37yzxm0000gn/T/tmp-17866wR6ybfinglvw\\` (exited with error code 128)\n      at callback (node_modules/child-process-promise/lib/index.js:33:27)\n      at ChildProcess.exithandler (child_process.js:280:5)\n      at maybeClose (internal/child_process.js:936:16)\n      at Socket.stream.socket.on (internal/child_process.js:353:11)\n      at Pipe._handle.close (net.js:541:12)\n      at Pipe._onclose (node_modules/async-listener/glue.js:188:31)\n\n2018-05-05T12:48:44.346Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:44.346Z [\u001b[32mm\u001b[39m:\u001b[32m17866\u001b[39m] [\u001b[32minfo \u001b[39m] \n2018-05-05T12:48:44.349Z [m:17866] [info ] Shutdown initiated. Calling shutdown hooks\n2018-05-05T12:48:44.350Z [m:17866] [info ] Shutdown initiated. Calling shutdown hooks\n`;\n\nconst RelevantPart2 = `\\`\\`\\`\n  1 failing\n\n  1) springBootGenerator\n       run end to end\n         should put in Atomist team id and ensure valid Java:\n     ChildProcessError: Command failed: git clone --depth 1 https://null:x-oauth-basic@github.com/spring-team/spring-rest-seed.git /var/folders/gl/d94_8f5n00d17l6fdx37yzxm0000gn/T/tmp-17866wR6ybfinglvw\nCloning into '/var/folders/gl/d94_8f5n00d17l6fdx37yzxm0000gn/T/tmp-17866wR6ybfinglvw'...\nfatal: unable to access 'https://null:x-oauth-basic@github.com/spring-team/spring-rest-seed.git/': Could not resolve host: github.com\n \\`git clone --depth 1 https://null:x-oauth-basic@github.com/spring-team/spring-rest-seed.git /var/folders/gl/d94_8f5n00d17l6fdx37yzxm0000gn/T/tmp-17866wR6ybfinglvw\\` (exited with error code 128)\n\\`\\`\\``;\n\nconst Fail3 = `> @atomist/sample-sdm@0.5.1 gql:copy /Users/jessitron/code/atomist/sample-sdm\n> copyfiles \"./src/**/*.graphql\" build\n\n\n> @atomist/sample-sdm@0.5.1 compile:ts /Users/jessitron/code/atomist/sample-sdm\n> tsc --project .\n\nsrc/machines/cloudFoundryMachine.ts(124,40): error TS1005: ',' expected.\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 2\nnpm ERR! @atomist/sample-sdm@0.5.1 compile:ts: \\`tsc --project .\\`\nnpm ERR! Exit status 2\nnpm ERR!\nnpm ERR! Failed at the @atomist/sample-sdm@0.5.1 compile:ts script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /Users/jessitron/.npm/_logs/2018-05-05T14_43_01_982Z-debug.log\nERROR: \"compile:ts\" exited with 2.\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! @atomist/sample-sdm@0.5.1 compile: \\`npm-run-all git:info compile:gql compile:ts\\`\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the @atomist/sample-sdm@0.5.1 compile script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /Users/jessitron/.npm/_logs/2018-05-05T14_43_02_017Z-debug.log\nERROR: \"compile\" exited with 1.\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! @atomist/sample-sdm@0.5.1 build: \\`npm-run-all compile test\\`\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the @atomist/sample-sdm@0.5.1 build script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /Users/jessitron/.npm/_logs/2018-05-05T14_43_02_065Z-debug.log\n`;\n\nconst RelevantPart3 = `\\`\\`\\`\n> @atomist/sample-sdm@0.5.1 compile:ts /Users/jessitron/code/atomist/sample-sdm\n> tsc --project .\n\nsrc/machines/cloudFoundryMachine.ts(124,40): error TS1005: ',' expected.\n\nERROR: \"compile:ts\" exited with 2.\n\nERROR: \"compile\" exited with 1.\n\\`\\`\\``;"]}