"use strict";/*
 * Copyright Â© 2018 Atomist, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cov_295qz68qg9=function(){var path="/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/common/command/commandSearch.ts",hash="bb2182e85ac98b50c62ada76094cdb80d58c4b6d",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/common/command/commandSearch.ts",statementMap:{"0":{start:{line:17,column:0},end:{line:17,column:62}},"1":{start:{line:18,column:19},end:{line:18,column:83}},"2":{start:{line:19,column:28},end:{line:19,column:88}},"3":{start:{line:29,column:4},end:{line:30,column:66}},"4":{start:{line:30,column:22},end:{line:30,column:64}},"5":{start:{line:30,column:49},end:{line:30,column:63}},"6":{start:{line:32,column:0},end:{line:32,column:56}},"7":{start:{line:40,column:4},end:{line:42,column:72}},"8":{start:{line:41,column:23},end:{line:41,column:82}},"9":{start:{line:42,column:22},end:{line:42,column:70}},"10":{start:{line:44,column:0},end:{line:44,column:56}}},fnMap:{"0":{name:"commandHandlersWithTag",decl:{start:{line:28,column:9},end:{line:28,column:31}},loc:{start:{line:28,column:43},end:{line:31,column:1}},line:28},"1":{name:"(anonymous_1)",decl:{start:{line:30,column:16},end:{line:30,column:17}},loc:{start:{line:30,column:22},end:{line:30,column:64}},line:30},"2":{name:"(anonymous_2)",decl:{start:{line:30,column:44},end:{line:30,column:45}},loc:{start:{line:30,column:49},end:{line:30,column:63}},line:30},"3":{name:"selfDescribingHandlers",decl:{start:{line:39,column:9},end:{line:39,column:31}},loc:{start:{line:39,column:38},end:{line:43,column:1}},line:39},"4":{name:"(anonymous_4)",decl:{start:{line:41,column:13},end:{line:41,column:14}},loc:{start:{line:41,column:23},end:{line:41,column:82}},line:41},"5":{name:"(anonymous_5)",decl:{start:{line:42,column:16},end:{line:42,column:17}},loc:{start:{line:42,column:22},end:{line:42,column:70}},line:42}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_295qz68qg9.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const metadata_1=(cov_295qz68qg9.s[1]++,require("@atomist/automation-client/internal/metadata/metadata"));const constructionUtils_1=(cov_295qz68qg9.s[2]++,require("@atomist/automation-client/util/constructionUtils"));/**
 * Return command handlers with a given tag.
 * Note this may not find all, but it will find those that know their
 * own metadata, which is true of all those returned by generatorHandler
 * and the underlying commandHandlerFrom
 * @param {FunctionalUnit} unit
 * @param {string} tag
 */function commandHandlersWithTag(unit,tag){cov_295qz68qg9.f[0]++;cov_295qz68qg9.s[3]++;return selfDescribingHandlers(unit).filter(hi=>{cov_295qz68qg9.f[1]++;cov_295qz68qg9.s[4]++;return hi.instance.tags.some(t=>{cov_295qz68qg9.f[2]++;cov_295qz68qg9.s[5]++;return t.name===tag;});});}cov_295qz68qg9.s[6]++;exports.commandHandlersWithTag=commandHandlersWithTag;/**
 * Return command handlers along with their metadata
 * Note this may not find all, but it will find those that know their
 * own metadata
 * @param {FunctionalUnit} unit
 */function selfDescribingHandlers(unit){cov_295qz68qg9.f[3]++;cov_295qz68qg9.s[7]++;return unit.commandHandlers.map(maker=>{cov_295qz68qg9.f[4]++;cov_295qz68qg9.s[8]++;return{maker,instance:constructionUtils_1.toFactory(maker)()};}).filter(hi=>{cov_295qz68qg9.f[5]++;cov_295qz68qg9.s[9]++;return metadata_1.isCommandHandlerMetadata(hi.instance);});}cov_295qz68qg9.s[10]++;exports.selfDescribingHandlers=selfDescribingHandlers;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3JvZGpvaG5zb24vc2ZvcnphbmRvLWRldi9pZGVhLXByb2plY3RzL215LWZsb3cvc3JjL2NvbW1vbi9jb21tYW5kL2NvbW1hbmRTZWFyY2gudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Rqb2huc29uL3Nmb3J6YW5kby1kZXYvaWRlYS1wcm9qZWN0cy9teS1mbG93L3NyYy9jb21tb24vY29tbWFuZC9jb21tYW5kU2VhcmNoLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7R0FjRzs7QUFHSCxvRkFBaUc7QUFFakcseUZBQXFGO0FBUXJGOzs7Ozs7O0dBT0c7QUFDSCxnQ0FBdUMsSUFBb0IsRUFBRSxHQUFXO0lBQ3BFLE9BQU8sc0JBQXNCLENBQUMsSUFBSSxDQUFDO1NBQzlCLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNsRSxDQUFDO0FBSEQsd0RBR0M7QUFFRDs7Ozs7R0FLRztBQUNILGdDQUF1QyxJQUFvQjtJQUN2RCxPQUFPLElBQUksQ0FBQyxlQUFlO1NBQ3RCLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLDZCQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBQyxDQUFDLENBQUM7U0FDckQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsbUNBQXdCLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFrQixDQUFDO0FBQzlFLENBQUM7QUFKRCx3REFJQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgwqkgMjAxOCBBdG9taXN0LCBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEhhbmRsZUNvbW1hbmQgfSBmcm9tIFwiQGF0b21pc3QvYXV0b21hdGlvbi1jbGllbnRcIjtcbmltcG9ydCB7IGlzQ29tbWFuZEhhbmRsZXJNZXRhZGF0YSB9IGZyb20gXCJAYXRvbWlzdC9hdXRvbWF0aW9uLWNsaWVudC9pbnRlcm5hbC9tZXRhZGF0YS9tZXRhZGF0YVwiO1xuaW1wb3J0IHsgQ29tbWFuZEhhbmRsZXJNZXRhZGF0YSB9IGZyb20gXCJAYXRvbWlzdC9hdXRvbWF0aW9uLWNsaWVudC9tZXRhZGF0YS9hdXRvbWF0aW9uTWV0YWRhdGFcIjtcbmltcG9ydCB7IE1ha2VyLCB0b0ZhY3RvcnkgfSBmcm9tIFwiQGF0b21pc3QvYXV0b21hdGlvbi1jbGllbnQvdXRpbC9jb25zdHJ1Y3Rpb25VdGlsc1wiO1xuaW1wb3J0IHsgRnVuY3Rpb25hbFVuaXQgfSBmcm9tIFwiLi4vLi4vYmx1ZXByaW50L0Z1bmN0aW9uYWxVbml0XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGFuZGxlckluZm8ge1xuICAgIG1ha2VyOiBNYWtlcjxIYW5kbGVDb21tYW5kPGFueT4+O1xuICAgIGluc3RhbmNlOiBIYW5kbGVDb21tYW5kPGFueT4gJiBDb21tYW5kSGFuZGxlck1ldGFkYXRhO1xufVxuXG4vKipcbiAqIFJldHVybiBjb21tYW5kIGhhbmRsZXJzIHdpdGggYSBnaXZlbiB0YWcuXG4gKiBOb3RlIHRoaXMgbWF5IG5vdCBmaW5kIGFsbCwgYnV0IGl0IHdpbGwgZmluZCB0aG9zZSB0aGF0IGtub3cgdGhlaXJcbiAqIG93biBtZXRhZGF0YSwgd2hpY2ggaXMgdHJ1ZSBvZiBhbGwgdGhvc2UgcmV0dXJuZWQgYnkgZ2VuZXJhdG9ySGFuZGxlclxuICogYW5kIHRoZSB1bmRlcmx5aW5nIGNvbW1hbmRIYW5kbGVyRnJvbVxuICogQHBhcmFtIHtGdW5jdGlvbmFsVW5pdH0gdW5pdFxuICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tbWFuZEhhbmRsZXJzV2l0aFRhZyh1bml0OiBGdW5jdGlvbmFsVW5pdCwgdGFnOiBzdHJpbmcpOiBIYW5kbGVySW5mb1tdIHtcbiAgICByZXR1cm4gc2VsZkRlc2NyaWJpbmdIYW5kbGVycyh1bml0KVxuICAgICAgICAuZmlsdGVyKGhpID0+IGhpLmluc3RhbmNlLnRhZ3Muc29tZSh0ID0+IHQubmFtZSA9PT0gdGFnKSk7XG59XG5cbi8qKlxuICogUmV0dXJuIGNvbW1hbmQgaGFuZGxlcnMgYWxvbmcgd2l0aCB0aGVpciBtZXRhZGF0YVxuICogTm90ZSB0aGlzIG1heSBub3QgZmluZCBhbGwsIGJ1dCBpdCB3aWxsIGZpbmQgdGhvc2UgdGhhdCBrbm93IHRoZWlyXG4gKiBvd24gbWV0YWRhdGFcbiAqIEBwYXJhbSB7RnVuY3Rpb25hbFVuaXR9IHVuaXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlbGZEZXNjcmliaW5nSGFuZGxlcnModW5pdDogRnVuY3Rpb25hbFVuaXQpOiBIYW5kbGVySW5mb1tdIHtcbiAgICByZXR1cm4gdW5pdC5jb21tYW5kSGFuZGxlcnNcbiAgICAgICAgLm1hcChtYWtlciA9PiAoe21ha2VyLCBpbnN0YW5jZTogdG9GYWN0b3J5KG1ha2VyKSgpfSkpXG4gICAgICAgIC5maWx0ZXIoaGkgPT4gaXNDb21tYW5kSGFuZGxlck1ldGFkYXRhKGhpLmluc3RhbmNlKSkgYXMgSGFuZGxlckluZm9bXTtcbn1cbiJdfQ==