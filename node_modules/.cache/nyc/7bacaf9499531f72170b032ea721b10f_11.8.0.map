{"version":3,"file":"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/blueprint/dsl/whenPushSatisfiesTest.ts","sources":["/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/blueprint/dsl/whenPushSatisfiesTest.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright Â© 2018 Atomist, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as assert from \"power-assert\";\nimport { whenPushSatisfies } from \"../../../src/blueprint/dsl/goalDsl\";\nimport { HttpServiceGoals } from \"../../../src/common/delivery/goals/common/httpServiceGoals\";\nimport { FalsePushTest, TruePushTest } from \"../../common/listener/support/pushTestUtilsTest\";\nimport { fakePush } from \"./decisionTreeTest\";\n\ndescribe(\"whenPushSatisfies\", () => {\n\n    it(\"should satisfy true\", async () => {\n        const test = whenPushSatisfies(true).itMeans(\"war\").setGoals(HttpServiceGoals);\n        assert.equal(await test.mapping(fakePush()), HttpServiceGoals);\n    });\n\n    it(\"should not satisfy false\", async () => {\n        const test = whenPushSatisfies(false).itMeans(\"war\").setGoals(HttpServiceGoals);\n        assert.equal(await test.mapping(fakePush()), undefined);\n    });\n\n    it(\"should satisfy function returning true\", async () => {\n        const test = whenPushSatisfies(() => true).itMeans(\"war\").setGoals(HttpServiceGoals);\n        assert.equal(await test.mapping(fakePush()), HttpServiceGoals);\n    });\n\n    it(\"should not satisfy function returning false\", async () => {\n        const test = whenPushSatisfies(() => false).itMeans(\"war\").setGoals(HttpServiceGoals);\n        assert.equal(await test.mapping(fakePush()), undefined);\n    });\n\n    it(\"should satisfy function returning promise true\", async () => {\n        const test = whenPushSatisfies(async () => true).itMeans(\"war\").setGoals(HttpServiceGoals);\n        assert.equal(await test.mapping(fakePush()), HttpServiceGoals);\n    });\n\n    it(\"should allow setting array of goals\", async () => {\n        const test = whenPushSatisfies(async () => true).itMeans(\"war\").setGoals(HttpServiceGoals.goals);\n        assert.deepEqual((await test.mapping(fakePush())).goals, HttpServiceGoals.goals);\n    });\n\n    it(\"should not satisfy function returning promise false\", async () => {\n        const test = whenPushSatisfies(async () => false).itMeans(\"war\").setGoals(HttpServiceGoals);\n        assert.equal(await test.mapping(fakePush()), undefined);\n    });\n\n    it(\"should default name with one\", async () => {\n        const test = whenPushSatisfies(TruePushTest).setGoals(HttpServiceGoals);\n        assert.equal(test.name, TruePushTest.name);\n    });\n\n    it(\"should override name with one\", async () => {\n        const test = whenPushSatisfies(TruePushTest).itMeans(\"something\").setGoals(HttpServiceGoals);\n        assert.equal(test.name, \"something\");\n    });\n\n    it(\"should default name with two\", async () => {\n        const test = whenPushSatisfies(TruePushTest, FalsePushTest).setGoals(HttpServiceGoals);\n        assert.equal(test.name, TruePushTest.name + \" && \" + FalsePushTest.name);\n    });\n\n    it(\"should allow simple function\", async () => {\n        const test = whenPushSatisfies(async p => true).setGoals(HttpServiceGoals);\n        assert.equal(await test.mapping(fakePush()), HttpServiceGoals);\n    });\n\n    it(\"should allow simple function returning false\", async () => {\n        const test = whenPushSatisfies(async p => p.push.id === \"notThis\").setGoals(HttpServiceGoals);\n        assert.equal(await test.mapping(fakePush()), undefined);\n    });\n});\n"]}