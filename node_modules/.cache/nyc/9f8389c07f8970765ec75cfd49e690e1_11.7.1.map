{"version":3,"file":"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/common/delivery/code/fingerprint/computeFingerprintsTest.ts","sources":["/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/common/delivery/code/fingerprint/computeFingerprintsTest.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;;;;;;;;;AAEH,4CAAsF;AACtF,iHAA8G;AAE9G,gFAAmF;AACnF,sFAAmF;AACnF,4FAAyF;AACzF,uCAAuC;AACvC,0DAAgE;AAEhE,QAAQ,CAAC,qBAAqB,EAAE,GAAG,EAAE;IAEjC,EAAE,CAAC,qBAAqB,EAAE,GAAS,EAAE;QACjC,MAAM,GAAG,GAAiC,IAAI,CAAC;QAC/C,MAAM,CAAC,GAAG,MAAM,yCAAmB,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAA,CAAC,CAAC;IAEH,EAAE,CAAC,0CAA0C,EAAE,GAAS,EAAE;QACtD,MAAM,GAAG,GAAiC,EAAC,OAAO,EAAE,iCAAe,CAAC,EAAE,EAAE,EAAwC,CAAC;QACjH,MAAM,CAAC,GAAG,MAAM,yCAAmB,CAAC,GAAG,EAAE,CAAC,IAAI,wBAAkB,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;QAC5E,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAA,CAAC,CAAC;IAEH,EAAE,CAAC,6BAA6B,EAAE,GAAS,EAAE;QACzC,MAAM,GAAG,GAAiC;YACtC,OAAO,EAAE,iCAAe,CAAC,IAAI,CACzB,IAAI,qBAAY,CAAC,GAAG,EAAE,GAAG,CAAC,EAC1B,IAAI,2BAAY,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;SACC,CAAC;QACzC,MAAM,CAAC,GAAG,MAAM,yCAAmB,CAAC,GAAG,EAAE,CAAC,CAAM,CAAC,EAAC,EAAE;gBAAC,OAAA,CAAC;oBAClD,IAAI,EAAE,KAAK;oBACX,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK;oBACxB,GAAG,EAAE,kBAAY,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC;oBACrC,YAAY,EAAE,KAAK;oBACnB,OAAO,EAAE,KAAK;iBACjB,CAAC,CAAA;cAAA,CAAC,CAAC,CAAC;QACL,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAC1B,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;IACjC,CAAC,CAAA,CAAC,CAAC;AAEP,CAAC,CAAC,CAAC","sourcesContent":["/*\n * Copyright Â© 2018 Atomist, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MavenFingerprinter, PushImpactListenerInvocation } from \"../../../../../src\";\nimport { computeFingerprints } from \"../../../../../src/common/delivery/code/fingerprint/computeFingerprints\";\n\nimport { SimpleRepoId } from \"@atomist/automation-client/operations/common/RepoId\";\nimport { InMemoryFile } from \"@atomist/automation-client/project/mem/InMemoryFile\";\nimport { InMemoryProject } from \"@atomist/automation-client/project/mem/InMemoryProject\";\nimport * as assert from \"power-assert\";\nimport { computeShaOf } from \"../../../../../src/util/misc/sha\";\n\ndescribe(\"computeFingerprints\", () => {\n\n    it(\"should execute none\", async () => {\n        const cri: PushImpactListenerInvocation = null;\n        const r = await computeFingerprints(cri, []);\n        assert.equal(r.length, 0);\n    });\n\n    it(\"should execute one against empty project\", async () => {\n        const cri: PushImpactListenerInvocation = {project: InMemoryProject.of()} as any as PushImpactListenerInvocation;\n        const r = await computeFingerprints(cri, [new MavenFingerprinter().action]);\n        assert.equal(r.length, 0);\n    });\n\n    it(\"should fingerprint with one\", async () => {\n        const cri: PushImpactListenerInvocation = {\n            project: InMemoryProject.from(\n                new SimpleRepoId(\"a\", \"b\"),\n                new InMemoryFile(\"thing\", \"1\")),\n        } as any as PushImpactListenerInvocation;\n        const r = await computeFingerprints(cri, [async i => ({\n            name: \"foo\",\n            data: i.project.id.owner,\n            sha: computeShaOf(i.project.id.owner),\n            abbreviation: \"xkc\",\n            version: \"1.0\",\n        })]);\n        assert.equal(r.length, 1);\n        assert.equal(r[0].data, \"a\");\n    });\n\n});\n"]}