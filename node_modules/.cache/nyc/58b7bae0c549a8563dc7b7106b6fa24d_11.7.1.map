{"version":3,"file":"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/blueprint/dsl/goalDsl.ts","sources":["/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/blueprint/dsl/goalDsl.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;AAGH,6DAAmE;AAGnE,6FAA8G;AAC9G,qEAAkE;AAClE,4FAAiF;AAEjF,wBAAgC,SAAQ,mBAAe;IAEnD,YAAY,MAAgB,EAAE,MAAkB,EAAE,MAAe;QAC7D,KAAK,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;IAClC,CAAC;IAEM,QAAQ,CAAC,KAAmB;QAC/B,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,IAAI,CAAC,GAAG,CAAC,KAAc,CAAC,CAAC;SACnC;QACD,OAAO,IAAI,CAAC,GAAG,CAAC,eAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,aAAK,CAAC,SAAS,GAAG,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;IACvF,CAAC;CAEJ;AAbD,gDAaC;AAED;;;;;GAKG;AACH,2BACI,MAAoD,EACpD,GAAG,MAA2D;IAC9D,OAAO,IAAI,kBAAkB,CAAC,yCAAkB,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,yCAAkB,CAAC,CAAC,CAAC;AAC9F,CAAC;AAJD,8CAIC;AAED;;;GAGG;AACU,QAAA,SAAS,GAAG,IAAI,kBAAkB,CAAC,yBAAO,EAAE,EAAE,EAAE,aAAa,CAAC,CAAC","sourcesContent":["/*\n * Copyright Â© 2018 Atomist, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Goal } from \"../../common/delivery/goals/Goal\";\nimport { Goals, isGoals } from \"../../common/delivery/goals/Goals\";\nimport { PushListenerInvocation } from \"../../common/listener/PushListener\";\nimport { PushTest } from \"../../common/listener/PushTest\";\nimport { PredicateMappingTerm, toPredicateMapping } from \"../../common/listener/support/PredicateMappingTerm\";\nimport { PushRule } from \"../../common/listener/support/PushRule\";\nimport { AnyPush } from \"../../common/listener/support/pushtest/commonPushTests\";\n\nexport class GoalSetterPushRule extends PushRule<Goals> {\n\n    constructor(guard1: PushTest, guards: PushTest[], reason?: string) {\n        super(guard1, guards, reason);\n    }\n\n    public setGoals(goals: Goals | Goal): this {\n        if (!goals) {\n            return this.set(goals as Goals);\n        }\n        return this.set(isGoals(goals) ? goals : new Goals(\"Solely \" + goals.name, goals));\n    }\n\n}\n\n/**\n * Simple GoalSetter DSL. Allows use of booleans and functions\n * returning boolean in predicate expressions\n * @param {PushTest} guard1\n * @param {PushTest} guards\n */\nexport function whenPushSatisfies(\n    guard1: PredicateMappingTerm<PushListenerInvocation>,\n    ...guards: Array<PredicateMappingTerm<PushListenerInvocation>>): GoalSetterPushRule {\n    return new GoalSetterPushRule(toPredicateMapping(guard1), guards.map(toPredicateMapping));\n}\n\n/**\n * PushRule that matches every push\n * @type {GoalSetterPushRule}\n */\nexport const onAnyPush = new GoalSetterPushRule(AnyPush, [], \"On any push\");\n"]}