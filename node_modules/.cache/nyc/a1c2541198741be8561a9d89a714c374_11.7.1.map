{"version":3,"file":"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/handlers/events/delivery/deploy/pcf/cloudFoundryLogParserTest.ts","sources":["/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/handlers/events/delivery/deploy/pcf/cloudFoundryLogParserTest.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;AAEH,uCAAuC;AACvC,kHAAyH;AAEzH,QAAQ,CAAC,yBAAyB,EAAE,GAAG,EAAE;IAErC,EAAE,CAAC,iBAAiB,EAAE,GAAG,EAAE;QACvB,MAAM,QAAQ,GAAG,uDAA+B,CAAC,EAAE,CAAC,CAAC;QACrD,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,+CAA+C,CAAC,CAAC;IAC5E,CAAC,CAAC,CAAC;AAEP,CAAC,CAAC,CAAC;AAEH,oBAAoB;AACpB,MAAM,EAAE,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2EAwFgE,CAAC","sourcesContent":["/*\n * Copyright Â© 2018 Atomist, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as assert from \"power-assert\";\nimport { parseCloudFoundryLogForEndpoint } from \"../../../../../../src/common/delivery/deploy/pcf/cloudFoundryLogParser\";\n\ndescribe(\"CloudFoundryProgressLog\", () => {\n\n    it(\"parses real log\", () => {\n        const endpoint = parseCloudFoundryLogForEndpoint(l1);\n        assert.equal(endpoint, \"http://losgatos1-cataphractic-brink.cfapps.io\");\n    });\n\n});\n\n/* tslint:disable */\nconst l1 = `Logging into Cloud Foundry as rod@atomist.com...\nUpdating app losgatos1 in org springrod / space development as rod@atomist.com...\nOK\n\nUploading losgatos1...\nUploading app files from: /var/folders/86/p817yp991bdddrqr_bdf20gh0000gp/T/unzipped-app934183388\nUploading 348.7K, 91 files\n\n238.5K uploaded...\n\nDone uploading\nOK\n\nStopping app losgatos1 in org springrod / space development as rod@atomist.com...\nOK\n\nStarting app losgatos1 in org springrod / space development as rod@atomist.com...\nDownloading binary_buildpack...\nDownloading staticfile_buildpack...\nDownloading dotnet_core_buildpack_beta...\nDownloading java_buildpack...\nDownloading ruby_buildpack...\nDownloaded ruby_buildpack\nDownloading nodejs_buildpack...\nDownloaded java_buildpack\nDownloading go_buildpack...\nDownloaded dotnet_core_buildpack_beta\nDownloading python_buildpack...\nDownloaded binary_buildpack\nDownloading php_buildpack...\nDownloaded go_buildpack\nDownloading dotnet_core_buildpack...\nDownloaded dotnet_core_buildpack\nDownloading hwc_buildpack...\nDownloaded nodejs_buildpack\nDownloaded python_buildpack\nDownloaded hwc_buildpack\nDownloaded php_buildpack\nDownloaded staticfile_buildpack\nCreating container\nSuccessfully created container\nDownloading build artifacts cache...\nDownloading app package...\nDownloading build artifacts cache failed\nDownloaded app package (12.8M)\n\u001b[1m\u001b[31m----->\u001b[0m\u001b[22m \u001b[1m\u001b[34mJava Buildpack\u001b[0m\u001b[22m \u001b[34mv4.5\u001b[0m \u001b[34m(offline)\u001b[0m | https://github.com/cloudfoundry/java-buildpack.git#ffeefb9\n\u001b[1m\u001b[31m----->\u001b[0m\u001b[22m Downloading \u001b[1m\u001b[34mJvmkill Agent\u001b[0m\u001b[22m \u001b[34m1.10.0_RELEASE\u001b[0m from https://java-buildpack.cloudfoundry.org/jvmkill/trusty/x86_64/jvmkill-1.10.0_RELEASE.so \u001b[3m\u001b[32m(found in cache)\u001b[0m\u001b[23m\n\u001b[1m\u001b[31m----->\u001b[0m\u001b[22m Downloading \u001b[1m\u001b[34mOpen Jdk JRE\u001b[0m\u001b[22m \u001b[34m1.8.0_141\u001b[0m from https://java-buildpack.cloudfoundry.org/openjdk/trusty/x86_64/openjdk-1.8.0_141.tar.gz \u001b[3m\u001b[32m(found in cache)\u001b[0m\u001b[23m\n       Expanding Open Jdk JRE to .java-buildpack/open_jdk_jre \u001b[3m\u001b[32m(1.7s)\u001b[0m\u001b[23m\n\u001b[1m\u001b[31m----->\u001b[0m\u001b[22m Downloading \u001b[1m\u001b[34mOpen JDK Like Memory Calculator\u001b[0m\u001b[22m \u001b[34m3.9.0_RELEASE\u001b[0m from https://java-buildpack.cloudfoundry.org/memory-calculator/trusty/x86_64/memory-calculator-3.9.0_RELEASE.tar.gz \u001b[3m\u001b[32m(found in cache)\u001b[0m\u001b[23m\n       Loaded Classes: 13001, Threads: 300\n\u001b[1m\u001b[31m----->\u001b[0m\u001b[22m Downloading \u001b[1m\u001b[34mClient Certificate Mapper\u001b[0m\u001b[22m \u001b[34m1.2.0_RELEASE\u001b[0m from https://java-buildpack.cloudfoundry.org/client-certificate-mapper/client-certificate-mapper-1.2.0_RELEASE.jar \u001b[3m\u001b[32m(found in cache)\u001b[0m\u001b[23m\n\u001b[1m\u001b[31m----->\u001b[0m\u001b[22m Downloading \u001b[1m\u001b[34mContainer Security Provider\u001b[0m\u001b[22m \u001b[34m1.8.0_RELEASE\u001b[0m from https://java-buildpack.cloudfoundry.org/container-security-provider/container-security-provider-1.8.0_RELEASE.jar \u001b[3m\u001b[32m(found in cache)\u001b[0m\u001b[23m\n\u001b[1m\u001b[31m----->\u001b[0m\u001b[22m Downloading \u001b[1m\u001b[34mSpring Auto Reconfiguration\u001b[0m\u001b[22m \u001b[34m1.12.0_RELEASE\u001b[0m from https://java-buildpack.cloudfoundry.org/auto-reconfiguration/auto-reconfiguration-1.12.0_RELEASE.jar \u001b[3m\u001b[32m(found in cache)\u001b[0m\u001b[23m\nExit status 0\nUploading droplet, build artifacts cache...\nUploading build artifacts cache...\nUploading droplet...\nUploaded build artifacts cache (131B)\nUploaded droplet (59.2M)\nUploading complete\nStopping instance 47c45101-542b-4fe0-ab47-e04ee281acd1\nDestroying container\nSuccessfully destroyed container\n\n0 of 1 instances running, 1 starting\n0 of 1 instances running, 1 starting\n1 of 1 instances running\n\nApp started\n\n\nOK\n\nApp losgatos1 was started using this command \\`JAVA_OPTS=\"-agentpath:$PWD/.java-buildpack/open_jdk_jre/bin/jvmkill-1.10.0_RELEASE=printHeapHistogram=1 -Djava.io.tmpdir=$TMPDIR -Djava.ext.dirs=$PWD/.java-buildpack/container_security_provider:$PWD/.java-buildpack/open_jdk_jre/lib/ext -Djava.security.properties=$PWD/.java-buildpack/security_providers/java.security $JAVA_OPTS\" && CALCULATED_MEMORY=$($PWD/.java-buildpack/open_jdk_jre/bin/java-buildpack-memory-calculator-3.9.0_RELEASE -totMemory=$MEMORY_LIMIT -stackThreads=300 -loadedClasses=13710 -poolType=metaspace -vmOptions=\"$JAVA_OPTS\") && echo JVM Memory Configuration: $CALCULATED_MEMORY && JAVA_OPTS=\"$JAVA_OPTS $CALCULATED_MEMORY\" && SERVER_PORT=$PORT eval exec $PWD/.java-buildpack/open_jdk_jre/bin/java $JAVA_OPTS -cp $PWD/. org.springframework.boot.loader.JarLauncher\\`\n\nShowing health and status for app losgatos1 in org springrod / space development as rod@atomist.com...\nOK\n\nrequested state: started\ninstances: 1/1\nusage: 1G x 1 instances\nurls: losgatos1-cataphractic-brink.cfapps.io\nlast uploaded: Sun Feb 11 10:25:15 UTC 2018\nstack: cflinuxfs2\nbuildpack: client-certificate-mapper=1.2.0_RELEASE container-security-provider=1.8.0_RELEASE java-buildpack=\u001b[34mv4.5\u001b[0m-offline-https://github.com/cloudfoundry/java-buildpack.git#ffeefb9 java-main java-opts jvmkill-agent=1.10.0_RELEASE open-jdk-like-jre=1.8.0_1...\n\n     state     since                    cpu    memory         disk           details\n#0   running   2018-02-11 09:26:17 PM   0.0%   266.1M of 1G   138.2M of 1G`;\n"]}