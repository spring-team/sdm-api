"use strict";/*
 * Copyright Â© 2018 Atomist, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cov_1u6t3c82vp=function(){var path="/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/common/delivery/deploy/pcf/EnvironmentCloudFoundryTarget.ts",hash="10217224f8160a8c0d0137ebb794752dbdb4196a",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/src/common/delivery/deploy/pcf/EnvironmentCloudFoundryTarget.ts",statementMap:{"0":{start:{line:17,column:0},end:{line:17,column:62}},"1":{start:{line:18,column:28},end:{line:18,column:65}},"2":{start:{line:19,column:24},end:{line:19,column:75}},"3":{start:{line:20,column:29},end:{line:20,column:60}},"4":{start:{line:31,column:8},end:{line:31,column:47}},"5":{start:{line:32,column:8},end:{line:32,column:125}},"6":{start:{line:33,column:8},end:{line:33,column:84}},"7":{start:{line:34,column:8},end:{line:34,column:88}},"8":{start:{line:35,column:8},end:{line:35,column:78}},"9":{start:{line:38,column:22},end:{line:38,column:105}},"10":{start:{line:39,column:8},end:{line:39,column:111}},"11":{start:{line:40,column:8},end:{line:42,column:9}},"12":{start:{line:41,column:12},end:{line:41,column:165}},"13":{start:{line:43,column:8},end:{line:43,column:21}},"14":{start:{line:46,column:8},end:{line:46,column:46}},"15":{start:{line:49,column:8},end:{line:49,column:91}},"16":{start:{line:52,column:0},end:{line:52,column:70}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:30,column:4},end:{line:30,column:5}},loc:{start:{line:30,column:33},end:{line:36,column:5}},line:30},"1":{name:"(anonymous_1)",decl:{start:{line:37,column:4},end:{line:37,column:5}},loc:{start:{line:37,column:16},end:{line:44,column:5}},line:37},"2":{name:"(anonymous_2)",decl:{start:{line:45,column:4},end:{line:45,column:5}},loc:{start:{line:45,column:15},end:{line:47,column:5}},line:45},"3":{name:"(anonymous_3)",decl:{start:{line:48,column:4},end:{line:48,column:5}},loc:{start:{line:48,column:22},end:{line:50,column:5}},line:48}},branchMap:{"0":{loc:{start:{line:32,column:19},end:{line:32,column:124}},type:"binary-expr",locations:[{start:{line:32,column:19},end:{line:32,column:77}},{start:{line:32,column:81},end:{line:32,column:124}}],line:32},"1":{loc:{start:{line:40,column:8},end:{line:42,column:9}},type:"if",locations:[{start:{line:40,column:8},end:{line:42,column:9}},{start:{line:40,column:8},end:{line:42,column:9}}],line:40}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_1u6t3c82vp.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const automation_client_1=(cov_1u6t3c82vp.s[1]++,require("@atomist/automation-client"));const configuration_1=(cov_1u6t3c82vp.s[2]++,require("@atomist/automation-client/configuration"));const CloudFoundryTarget_1=(cov_1u6t3c82vp.s[3]++,require("./CloudFoundryTarget"));/**
 * Configure cloud foundry from environment variables.
 * See README for definition.
 */class EnvironmentCloudFoundryTarget{/**
     * Logical name for the space
     * @param {string} environmentName: Name of the environment, such as "staging" or "production"
     */constructor(environmentName){cov_1u6t3c82vp.f[0]++;cov_1u6t3c82vp.s[4]++;this.environmentName=environmentName;cov_1u6t3c82vp.s[5]++;this.api=(cov_1u6t3c82vp.b[0][0]++,configuration_1.configurationValue("sdm.cloudfoundry").api)||(cov_1u6t3c82vp.b[0][1]++,CloudFoundryTarget_1.PivotalWebServices.api);cov_1u6t3c82vp.s[6]++;this.username=configuration_1.configurationValue("sdm.cloudfoundry").user;cov_1u6t3c82vp.s[7]++;this.password=configuration_1.configurationValue("sdm.cloudfoundry").password;cov_1u6t3c82vp.s[8]++;this.org=configuration_1.configurationValue("sdm.cloudfoundry").org;}get space(){cov_1u6t3c82vp.f[1]++;const space=(cov_1u6t3c82vp.s[9]++,configuration_1.configurationValue(`sdm.cloudfoundry`).spaces[this.environmentName]);cov_1u6t3c82vp.s[10]++;automation_client_1.logger.info("PCF space for environment [%s] is [%s]",this.environmentName,space);cov_1u6t3c82vp.s[11]++;if(!space){cov_1u6t3c82vp.b[1][0]++;cov_1u6t3c82vp.s[12]++;throw new Error(`Please set environment key cloudfoundry.spaces.${this.environmentName} to deploy to Cloud Foundry environment ${this.environmentName}`);}else{cov_1u6t3c82vp.b[1][1]++;}cov_1u6t3c82vp.s[13]++;return space;}get name(){cov_1u6t3c82vp.f[2]++;cov_1u6t3c82vp.s[14]++;return`PCF: ${this.environmentName}`;}get description(){cov_1u6t3c82vp.f[3]++;cov_1u6t3c82vp.s[15]++;return`PCF ${this.api};org=${this.org};space=${this.space};user=${this.username}`;}}cov_1u6t3c82vp.s[16]++;exports.EnvironmentCloudFoundryTarget=EnvironmentCloudFoundryTarget;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3JvZGpvaG5zb24vc2ZvcnphbmRvLWRldi9pZGVhLXByb2plY3RzL215LWZsb3cvc3JjL2NvbW1vbi9kZWxpdmVyeS9kZXBsb3kvcGNmL0Vudmlyb25tZW50Q2xvdWRGb3VuZHJ5VGFyZ2V0LnRzIiwic291cmNlcyI6WyIvVXNlcnMvcm9kam9obnNvbi9zZm9yemFuZG8tZGV2L2lkZWEtcHJvamVjdHMvbXktZmxvdy9zcmMvY29tbW9uL2RlbGl2ZXJ5L2RlcGxveS9wY2YvRW52aXJvbm1lbnRDbG91ZEZvdW5kcnlUYXJnZXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7OztHQWNHOztBQUVILGtFQUFvRDtBQUNwRCw0RUFBOEU7QUFDOUUsNkRBQTRFO0FBRTVFOzs7R0FHRztBQUNIO0lBVUk7OztPQUdHO0lBQ0gsWUFBNkIsZUFBeUM7UUFBekMsb0JBQWUsR0FBZixlQUFlLENBQTBCO1FBWi9ELFFBQUcsR0FBRyxrQ0FBa0IsQ0FBc0Isa0JBQWtCLENBQUMsQ0FBQyxHQUFHLElBQUksdUNBQWtCLENBQUMsR0FBRyxDQUFDO1FBRWhHLGFBQVEsR0FBRyxrQ0FBa0IsQ0FBc0Isa0JBQWtCLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFFNUUsYUFBUSxHQUFHLGtDQUFrQixDQUFzQixrQkFBa0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQztRQUVoRixRQUFHLEdBQUcsa0NBQWtCLENBQXNCLGtCQUFrQixDQUFDLENBQUMsR0FBRyxDQUFDO0lBTzdFLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDTCxNQUFNLEtBQUssR0FBRyxrQ0FBa0IsQ0FBc0Isa0JBQWtCLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3ZHLDBCQUFNLENBQUMsSUFBSSxDQUFDLHdDQUF3QyxFQUFFLElBQUksQ0FBQyxlQUFlLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDbkYsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNSLE1BQU0sSUFBSSxLQUFLLENBQUMsa0RBQ1osSUFBSSxDQUFDLGVBQWUsMkNBQTJDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDO1NBQzlGO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLE9BQU8sUUFBUSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDMUMsQ0FBQztJQUVELElBQUksV0FBVztRQUNYLE9BQU8sT0FBTyxJQUFJLENBQUMsR0FBRyxRQUFRLElBQUksQ0FBQyxHQUFHLFVBQVUsSUFBSSxDQUFDLEtBQUssU0FBUyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDdkYsQ0FBQztDQUNKO0FBbENELHNFQWtDQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgwqkgMjAxOCBBdG9taXN0LCBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAYXRvbWlzdC9hdXRvbWF0aW9uLWNsaWVudFwiO1xuaW1wb3J0IHsgY29uZmlndXJhdGlvblZhbHVlIH0gZnJvbSBcIkBhdG9taXN0L2F1dG9tYXRpb24tY2xpZW50L2NvbmZpZ3VyYXRpb25cIjtcbmltcG9ydCB7IENsb3VkRm91bmRyeUluZm8sIFBpdm90YWxXZWJTZXJ2aWNlcyB9IGZyb20gXCIuL0Nsb3VkRm91bmRyeVRhcmdldFwiO1xuXG4vKipcbiAqIENvbmZpZ3VyZSBjbG91ZCBmb3VuZHJ5IGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICogU2VlIFJFQURNRSBmb3IgZGVmaW5pdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEVudmlyb25tZW50Q2xvdWRGb3VuZHJ5VGFyZ2V0IGltcGxlbWVudHMgQ2xvdWRGb3VuZHJ5SW5mbyB7XG5cbiAgICBwdWJsaWMgYXBpID0gY29uZmlndXJhdGlvblZhbHVlPENsb3VkZm91bmRyeU9wdGlvbnM+KFwic2RtLmNsb3VkZm91bmRyeVwiKS5hcGkgfHwgUGl2b3RhbFdlYlNlcnZpY2VzLmFwaTtcblxuICAgIHB1YmxpYyB1c2VybmFtZSA9IGNvbmZpZ3VyYXRpb25WYWx1ZTxDbG91ZGZvdW5kcnlPcHRpb25zPihcInNkbS5jbG91ZGZvdW5kcnlcIikudXNlcjtcblxuICAgIHB1YmxpYyBwYXNzd29yZCA9IGNvbmZpZ3VyYXRpb25WYWx1ZTxDbG91ZGZvdW5kcnlPcHRpb25zPihcInNkbS5jbG91ZGZvdW5kcnlcIikucGFzc3dvcmQ7XG5cbiAgICBwdWJsaWMgb3JnID0gY29uZmlndXJhdGlvblZhbHVlPENsb3VkZm91bmRyeU9wdGlvbnM+KFwic2RtLmNsb3VkZm91bmRyeVwiKS5vcmc7XG5cbiAgICAvKipcbiAgICAgKiBMb2dpY2FsIG5hbWUgZm9yIHRoZSBzcGFjZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbnZpcm9ubWVudE5hbWU6IE5hbWUgb2YgdGhlIGVudmlyb25tZW50LCBzdWNoIGFzIFwic3RhZ2luZ1wiIG9yIFwicHJvZHVjdGlvblwiXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBlbnZpcm9ubWVudE5hbWU6IFwic3RhZ2luZ1wiIHwgXCJwcm9kdWN0aW9uXCIpIHtcbiAgICB9XG5cbiAgICBnZXQgc3BhY2UoKSB7XG4gICAgICAgIGNvbnN0IHNwYWNlID0gY29uZmlndXJhdGlvblZhbHVlPENsb3VkZm91bmRyeU9wdGlvbnM+KGBzZG0uY2xvdWRmb3VuZHJ5YCkuc3BhY2VzW3RoaXMuZW52aXJvbm1lbnROYW1lXTtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJQQ0Ygc3BhY2UgZm9yIGVudmlyb25tZW50IFslc10gaXMgWyVzXVwiLCB0aGlzLmVudmlyb25tZW50TmFtZSwgc3BhY2UpO1xuICAgICAgICBpZiAoIXNwYWNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBsZWFzZSBzZXQgZW52aXJvbm1lbnQga2V5IGNsb3VkZm91bmRyeS5zcGFjZXMuJHtcbiAgICAgICAgICAgICAgICB0aGlzLmVudmlyb25tZW50TmFtZX0gdG8gZGVwbG95IHRvIENsb3VkIEZvdW5kcnkgZW52aXJvbm1lbnQgJHt0aGlzLmVudmlyb25tZW50TmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BhY2U7XG4gICAgfVxuXG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBgUENGOiAke3RoaXMuZW52aXJvbm1lbnROYW1lfWA7XG4gICAgfVxuXG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gYFBDRiAke3RoaXMuYXBpfTtvcmc9JHt0aGlzLm9yZ307c3BhY2U9JHt0aGlzLnNwYWNlfTt1c2VyPSR7dGhpcy51c2VybmFtZX1gO1xuICAgIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbG91ZGZvdW5kcnlPcHRpb25zIHtcblxuICAgIGFwaTogc3RyaW5nO1xuICAgIHVzZXI6IHN0cmluZztcbiAgICBwYXNzd29yZDogc3RyaW5nO1xuICAgIG9yZzogc3RyaW5nO1xuICAgIHNwYWNlczoge1xuICAgICAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gICAgfTtcblxufVxuIl19