"use strict";/*
 * Copyright Â© 2018 Atomist, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cov_13ha0bhpp=function(){var path="/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/util/slack/reportFailureInterpretationTest.ts",hash="278ee7b975873c2d6582865f6513f2b1998c512c",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/rodjohnson/sforzando-dev/idea-projects/my-flow/test/util/slack/reportFailureInterpretationTest.ts",statementMap:{"0":{start:{line:17,column:16},end:{line:24,column:1}},"1":{start:{line:18,column:4},end:{line:23,column:7}},"2":{start:{line:19,column:36},end:{line:19,column:97}},"3":{start:{line:19,column:42},end:{line:19,column:70}},"4":{start:{line:19,column:85},end:{line:19,column:95}},"5":{start:{line:20,column:35},end:{line:20,column:100}},"6":{start:{line:20,column:41},end:{line:20,column:73}},"7":{start:{line:20,column:88},end:{line:20,column:98}},"8":{start:{line:21,column:32},end:{line:21,column:149}},"9":{start:{line:21,column:97},end:{line:21,column:119}},"10":{start:{line:22,column:8},end:{line:22,column:78}},"11":{start:{line:25,column:0},end:{line:25,column:62}},"12":{start:{line:26,column:15},end:{line:26,column:38}},"13":{start:{line:27,column:54},end:{line:27,column:132}},"14":{start:{line:28,column:0},end:{line:86,column:3}},"15":{start:{line:31,column:12},end:{line:31,column:35}},"16":{start:{line:34,column:12},end:{line:34,column:72}},"17":{start:{line:34,column:49},end:{line:34,column:70}},"18":{start:{line:38,column:20},end:{line:38,column:44}},"19":{start:{line:39,column:19},end:{line:41,column:10}},"20":{start:{line:39,column:34},end:{line:41,column:10}},"21":{start:{line:40,column:12},end:{line:40,column:39}},"22":{start:{line:42,column:8},end:{line:42,column:25}},"23":{start:{line:44,column:4},end:{line:54,column:8}},"24":{start:{line:44,column:50},end:{line:54,column:6}},"25":{start:{line:45,column:26},end:{line:45,column:47}},"26":{start:{line:46,column:31},end:{line:50,column:9}},"27":{start:{line:51,column:24},end:{line:51,column:52}},"28":{start:{line:52,column:8},end:{line:52,column:161}},"29":{start:{line:53,column:8},end:{line:53,column:32}},"30":{start:{line:55,column:4},end:{line:65,column:8}},"31":{start:{line:55,column:71},end:{line:65,column:6}},"32":{start:{line:56,column:26},end:{line:56,column:47}},"33":{start:{line:57,column:31},end:{line:61,column:9}},"34":{start:{line:62,column:24},end:{line:62,column:65}},"35":{start:{line:63,column:8},end:{line:63,column:161}},"36":{start:{line:64,column:8},end:{line:64,column:33}},"37":{start:{line:66,column:4},end:{line:75,column:8}},"38":{start:{line:66,column:95},end:{line:75,column:6}},"39":{start:{line:67,column:26},end:{line:67,column:47}},"40":{start:{line:68,column:31},end:{line:71,column:9}},"41":{start:{line:72,column:24},end:{line:72,column:65}},"42":{start:{line:73,column:8},end:{line:73,column:161}},"43":{start:{line:74,column:8},end:{line:74,column:33}},"44":{start:{line:76,column:4},end:{line:85,column:8}},"45":{start:{line:76,column:85},end:{line:85,column:6}},"46":{start:{line:77,column:26},end:{line:77,column:47}},"47":{start:{line:78,column:31},end:{line:81,column:9}},"48":{start:{line:82,column:24},end:{line:82,column:52}},"49":{start:{line:83,column:8},end:{line:83,column:161}},"50":{start:{line:84,column:8},end:{line:84,column:32}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:17,column:44},end:{line:17,column:45}},loc:{start:{line:17,column:89},end:{line:24,column:1}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:36},end:{line:18,column:37}},loc:{start:{line:18,column:63},end:{line:23,column:5}},line:18},"2":{name:"fulfilled",decl:{start:{line:19,column:17},end:{line:19,column:26}},loc:{start:{line:19,column:34},end:{line:19,column:99}},line:19},"3":{name:"rejected",decl:{start:{line:20,column:17},end:{line:20,column:25}},loc:{start:{line:20,column:33},end:{line:20,column:102}},line:20},"4":{name:"step",decl:{start:{line:21,column:17},end:{line:21,column:21}},loc:{start:{line:21,column:30},end:{line:21,column:151}},line:21},"5":{name:"(anonymous_5)",decl:{start:{line:21,column:76},end:{line:21,column:77}},loc:{start:{line:21,column:95},end:{line:21,column:121}},line:21},"6":{name:"(anonymous_6)",decl:{start:{line:28,column:45},end:{line:28,column:46}},loc:{start:{line:28,column:51},end:{line:86,column:1}},line:28},"7":{name:"(anonymous_7)",decl:{start:{line:30,column:8},end:{line:30,column:9}},loc:{start:{line:30,column:22},end:{line:32,column:9}},line:30},"8":{name:"(anonymous_8)",decl:{start:{line:33,column:8},end:{line:33,column:9}},loc:{start:{line:33,column:26},end:{line:35,column:9}},line:33},"9":{name:"(anonymous_9)",decl:{start:{line:34,column:44},end:{line:34,column:45}},loc:{start:{line:34,column:49},end:{line:34,column:70}},line:34},"10":{name:"fakeAddressChannels",decl:{start:{line:37,column:13},end:{line:37,column:32}},loc:{start:{line:37,column:35},end:{line:43,column:5}},line:37},"11":{name:"(anonymous_11)",decl:{start:{line:39,column:19},end:{line:39,column:20}},loc:{start:{line:39,column:34},end:{line:41,column:10}},line:39},"12":{name:"(anonymous_12)",decl:{start:{line:39,column:66},end:{line:39,column:67}},loc:{start:{line:39,column:79},end:{line:41,column:9}},line:39},"13":{name:"(anonymous_13)",decl:{start:{line:44,column:44},end:{line:44,column:45}},loc:{start:{line:44,column:50},end:{line:54,column:6}},line:44},"14":{name:"(anonymous_14)",decl:{start:{line:44,column:82},end:{line:44,column:83}},loc:{start:{line:44,column:95},end:{line:54,column:5}},line:44},"15":{name:"(anonymous_15)",decl:{start:{line:55,column:65},end:{line:55,column:66}},loc:{start:{line:55,column:71},end:{line:65,column:6}},line:55},"16":{name:"(anonymous_16)",decl:{start:{line:55,column:103},end:{line:55,column:104}},loc:{start:{line:55,column:116},end:{line:65,column:5}},line:55},"17":{name:"(anonymous_17)",decl:{start:{line:66,column:89},end:{line:66,column:90}},loc:{start:{line:66,column:95},end:{line:75,column:6}},line:66},"18":{name:"(anonymous_18)",decl:{start:{line:66,column:127},end:{line:66,column:128}},loc:{start:{line:66,column:140},end:{line:75,column:5}},line:66},"19":{name:"(anonymous_19)",decl:{start:{line:76,column:79},end:{line:76,column:80}},loc:{start:{line:76,column:85},end:{line:85,column:6}},line:76},"20":{name:"(anonymous_20)",decl:{start:{line:76,column:117},end:{line:76,column:118}},loc:{start:{line:76,column:130},end:{line:85,column:5}},line:76}},branchMap:{"0":{loc:{start:{line:17,column:16},end:{line:24,column:1}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:21}},{start:{line:17,column:25},end:{line:17,column:39}},{start:{line:17,column:44},end:{line:24,column:1}}],line:17},"1":{loc:{start:{line:18,column:16},end:{line:18,column:34}},type:"binary-expr",locations:[{start:{line:18,column:16},end:{line:18,column:17}},{start:{line:18,column:22},end:{line:18,column:33}}],line:18},"2":{loc:{start:{line:21,column:32},end:{line:21,column:148}},type:"cond-expr",locations:[{start:{line:21,column:46},end:{line:21,column:67}},{start:{line:21,column:70},end:{line:21,column:148}}],line:21},"3":{loc:{start:{line:22,column:51},end:{line:22,column:67}},type:"binary-expr",locations:[{start:{line:22,column:51},end:{line:22,column:61}},{start:{line:22,column:65},end:{line:22,column:67}}],line:22}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var __awaiter=(cov_13ha0bhpp.s[0]++,(cov_13ha0bhpp.b[0][0]++,this)&&(cov_13ha0bhpp.b[0][1]++,this.__awaiter)||(cov_13ha0bhpp.b[0][2]++,function(thisArg,_arguments,P,generator){cov_13ha0bhpp.f[0]++;cov_13ha0bhpp.s[1]++;return new((cov_13ha0bhpp.b[1][0]++,P)||(cov_13ha0bhpp.b[1][1]++,P=Promise))(function(resolve,reject){cov_13ha0bhpp.f[1]++;function fulfilled(value){cov_13ha0bhpp.f[2]++;cov_13ha0bhpp.s[2]++;try{cov_13ha0bhpp.s[3]++;step(generator.next(value));}catch(e){cov_13ha0bhpp.s[4]++;reject(e);}}function rejected(value){cov_13ha0bhpp.f[3]++;cov_13ha0bhpp.s[5]++;try{cov_13ha0bhpp.s[6]++;step(generator["throw"](value));}catch(e){cov_13ha0bhpp.s[7]++;reject(e);}}function step(result){cov_13ha0bhpp.f[4]++;cov_13ha0bhpp.s[8]++;result.done?(cov_13ha0bhpp.b[2][0]++,resolve(result.value)):(cov_13ha0bhpp.b[2][1]++,new P(function(resolve){cov_13ha0bhpp.f[5]++;cov_13ha0bhpp.s[9]++;resolve(result.value);}).then(fulfilled,rejected));}cov_13ha0bhpp.s[10]++;step((generator=generator.apply(thisArg,(cov_13ha0bhpp.b[3][0]++,_arguments)||(cov_13ha0bhpp.b[3][1]++,[]))).next());});}));cov_13ha0bhpp.s[11]++;Object.defineProperty(exports,"__esModule",{value:true});const assert=(cov_13ha0bhpp.s[12]++,require("power-assert"));const reportFailureInterpretationToLinkedChannels_1=(cov_13ha0bhpp.s[13]++,require("../../../src/util/slack/reportFailureInterpretationToLinkedChannels"));cov_13ha0bhpp.s[14]++;describe("Reporting failure interpretation",()=>{cov_13ha0bhpp.f[6]++;class AddressChannelsSpy{constructor(){cov_13ha0bhpp.f[7]++;cov_13ha0bhpp.s[15]++;this.messagesSent=[];}get sentFullLog(){cov_13ha0bhpp.f[8]++;cov_13ha0bhpp.s[16]++;return!!this.messagesSent.find(m=>{cov_13ha0bhpp.f[9]++;cov_13ha0bhpp.s[17]++;return m.fileType==="text";});}}function fakeAddressChannels(){cov_13ha0bhpp.f[10]++;const spy=(cov_13ha0bhpp.s[18]++,new AddressChannelsSpy());cov_13ha0bhpp.s[19]++;const ac=(msg,opts)=>{cov_13ha0bhpp.f[11]++;cov_13ha0bhpp.s[20]++;return __awaiter(this,void 0,void 0,function*(){cov_13ha0bhpp.f[12]++;cov_13ha0bhpp.s[21]++;spy.messagesSent.push(msg);});};cov_13ha0bhpp.s[22]++;return[ac,spy];}cov_13ha0bhpp.s[23]++;it("Reports the full log if requested",()=>{cov_13ha0bhpp.f[13]++;cov_13ha0bhpp.s[24]++;return __awaiter(this,void 0,void 0,function*(){cov_13ha0bhpp.f[14]++;const[ac,spy]=(cov_13ha0bhpp.s[25]++,fakeAddressChannels());const interpretedLog=(cov_13ha0bhpp.s[26]++,{relevantPart:"busted",message:"Hi",includeFullLog:true});const fullLog=(cov_13ha0bhpp.s[27]++,{log:"you are so busted"});cov_13ha0bhpp.s[28]++;yield reportFailureInterpretationToLinkedChannels_1.reportFailureInterpretationToLinkedChannels("stepName",interpretedLog,fullLog,{sha:"abc"},ac);cov_13ha0bhpp.s[29]++;assert(spy.sentFullLog);});});cov_13ha0bhpp.s[30]++;it("Does not send the full log if specifically unrequested",()=>{cov_13ha0bhpp.f[15]++;cov_13ha0bhpp.s[31]++;return __awaiter(this,void 0,void 0,function*(){cov_13ha0bhpp.f[16]++;const[ac,spy]=(cov_13ha0bhpp.s[32]++,fakeAddressChannels());const interpretedLog=(cov_13ha0bhpp.s[33]++,{relevantPart:"busted",message:"Hi",includeFullLog:false});const fullLog=(cov_13ha0bhpp.s[34]++,{url:"here",log:"you are so busted"});cov_13ha0bhpp.s[35]++;yield reportFailureInterpretationToLinkedChannels_1.reportFailureInterpretationToLinkedChannels("stepName",interpretedLog,fullLog,{sha:"abc"},ac);cov_13ha0bhpp.s[36]++;assert(!spy.sentFullLog);});});cov_13ha0bhpp.s[37]++;it("Does not report the full log if unspecified, and the log is available at a url",()=>{cov_13ha0bhpp.f[17]++;cov_13ha0bhpp.s[38]++;return __awaiter(this,void 0,void 0,function*(){cov_13ha0bhpp.f[18]++;const[ac,spy]=(cov_13ha0bhpp.s[39]++,fakeAddressChannels());const interpretedLog=(cov_13ha0bhpp.s[40]++,{relevantPart:"busted",message:"Hi"});const fullLog=(cov_13ha0bhpp.s[41]++,{url:"here",log:"you are so busted"});cov_13ha0bhpp.s[42]++;yield reportFailureInterpretationToLinkedChannels_1.reportFailureInterpretationToLinkedChannels("stepName",interpretedLog,fullLog,{sha:"abc"},ac);cov_13ha0bhpp.s[43]++;assert(!spy.sentFullLog);});});cov_13ha0bhpp.s[44]++;it("Reports the full log if unspecified, but the log does not have a url",()=>{cov_13ha0bhpp.f[19]++;cov_13ha0bhpp.s[45]++;return __awaiter(this,void 0,void 0,function*(){cov_13ha0bhpp.f[20]++;const[ac,spy]=(cov_13ha0bhpp.s[46]++,fakeAddressChannels());const interpretedLog=(cov_13ha0bhpp.s[47]++,{relevantPart:"busted",message:"Hi"});const fullLog=(cov_13ha0bhpp.s[48]++,{log:"you are so busted"});cov_13ha0bhpp.s[49]++;yield reportFailureInterpretationToLinkedChannels_1.reportFailureInterpretationToLinkedChannels("stepName",interpretedLog,fullLog,{sha:"abc"},ac);cov_13ha0bhpp.s[50]++;assert(spy.sentFullLog);});});});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3JvZGpvaG5zb24vc2ZvcnphbmRvLWRldi9pZGVhLXByb2plY3RzL215LWZsb3cvdGVzdC91dGlsL3NsYWNrL3JlcG9ydEZhaWx1cmVJbnRlcnByZXRhdGlvblRlc3QudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Rqb2huc29uL3Nmb3J6YW5kby1kZXYvaWRlYS1wcm9qZWN0cy9teS1mbG93L3Rlc3QvdXRpbC9zbGFjay9yZXBvcnRGYWlsdXJlSW50ZXJwcmV0YXRpb25UZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7R0FjRzs7Ozs7Ozs7OztBQUlILHVDQUF1QztBQUl2QyxxSUFBa0k7QUFFbEksUUFBUSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtJQUU5QztRQUFBO1lBQ1csaUJBQVksR0FBbUIsRUFBRSxDQUFDO1FBSTdDLENBQUM7UUFIRyxJQUFJLFdBQVc7WUFDWCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFFLENBQVMsQ0FBQyxRQUFRLEtBQUssTUFBTSxDQUFDLENBQUM7UUFDekUsQ0FBQztLQUNKO0lBRUQ7UUFDSSxNQUFNLEdBQUcsR0FBRyxJQUFJLGtCQUFrQixFQUFFLENBQUM7UUFDckMsTUFBTSxFQUFFLEdBQUcsQ0FBTyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUU7WUFDM0IsR0FBRyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUFBLENBQUM7UUFDRixPQUFPLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFFRCxFQUFFLENBQUMsbUNBQW1DLEVBQUUsR0FBUyxFQUFFO1FBRS9DLE1BQU0sQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUcsbUJBQW1CLEVBQUUsQ0FBQztRQUV4QyxNQUFNLGNBQWMsR0FBbUI7WUFDbkMsWUFBWSxFQUFFLFFBQVE7WUFDdEIsT0FBTyxFQUFFLElBQUk7WUFDYixjQUFjLEVBQUUsSUFBSTtTQUN2QixDQUFDO1FBQ0YsTUFBTSxPQUFPLEdBQUcsRUFBQyxHQUFHLEVBQUUsbUJBQW1CLEVBQUMsQ0FBQztRQUMzQyxNQUFNLHlGQUEyQyxDQUFDLFVBQVUsRUFDeEQsY0FBYyxFQUFFLE9BQU8sRUFBRSxFQUFDLEdBQUcsRUFBRSxLQUFLLEVBQWtCLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFaEUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUM1QixDQUFDLENBQUEsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHdEQUF3RCxFQUFFLEdBQVMsRUFBRTtRQUVwRSxNQUFNLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxHQUFHLG1CQUFtQixFQUFFLENBQUM7UUFFeEMsTUFBTSxjQUFjLEdBQW1CO1lBQ25DLFlBQVksRUFBRSxRQUFRO1lBQ3RCLE9BQU8sRUFBRSxJQUFJO1lBQ2IsY0FBYyxFQUFFLEtBQUs7U0FDeEIsQ0FBQztRQUNGLE1BQU0sT0FBTyxHQUFHLEVBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsbUJBQW1CLEVBQUMsQ0FBQztRQUN4RCxNQUFNLHlGQUEyQyxDQUFDLFVBQVUsRUFDeEQsY0FBYyxFQUFFLE9BQU8sRUFBRSxFQUFDLEdBQUcsRUFBRSxLQUFLLEVBQWtCLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFaEUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzdCLENBQUMsQ0FBQSxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsZ0ZBQWdGLEVBQUUsR0FBUyxFQUFFO1FBRTVGLE1BQU0sQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUcsbUJBQW1CLEVBQUUsQ0FBQztRQUV4QyxNQUFNLGNBQWMsR0FBbUI7WUFDbkMsWUFBWSxFQUFFLFFBQVE7WUFDdEIsT0FBTyxFQUFFLElBQUk7U0FDaEIsQ0FBQztRQUNGLE1BQU0sT0FBTyxHQUFHLEVBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsbUJBQW1CLEVBQUMsQ0FBQztRQUN4RCxNQUFNLHlGQUEyQyxDQUFDLFVBQVUsRUFDeEQsY0FBYyxFQUFFLE9BQU8sRUFBRSxFQUFDLEdBQUcsRUFBRSxLQUFLLEVBQWtCLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFaEUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzdCLENBQUMsQ0FBQSxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsc0VBQXNFLEVBQUUsR0FBUyxFQUFFO1FBRWxGLE1BQU0sQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUcsbUJBQW1CLEVBQUUsQ0FBQztRQUV4QyxNQUFNLGNBQWMsR0FBbUI7WUFDbkMsWUFBWSxFQUFFLFFBQVE7WUFDdEIsT0FBTyxFQUFFLElBQUk7U0FDaEIsQ0FBQztRQUNGLE1BQU0sT0FBTyxHQUFHLEVBQUMsR0FBRyxFQUFFLG1CQUFtQixFQUFDLENBQUM7UUFDM0MsTUFBTSx5RkFBMkMsQ0FBQyxVQUFVLEVBQ3hELGNBQWMsRUFBRSxPQUFPLEVBQUUsRUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFrQixFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRWhFLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDNUIsQ0FBQyxDQUFBLENBQUMsQ0FBQztBQUVQLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCDCqSAyMDE4IEF0b21pc3QsIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgUmVtb3RlUmVwb1JlZiB9IGZyb20gXCJAYXRvbWlzdC9hdXRvbWF0aW9uLWNsaWVudC9vcGVyYXRpb25zL2NvbW1vbi9SZXBvSWRcIjtcbmltcG9ydCB7IFNsYWNrTWVzc2FnZSB9IGZyb20gXCJAYXRvbWlzdC9zbGFjay1tZXNzYWdlc1wiO1xuaW1wb3J0ICogYXMgYXNzZXJ0IGZyb20gXCJwb3dlci1hc3NlcnRcIjtcbmltcG9ydCB7IEFkZHJlc3NDaGFubmVscyB9IGZyb20gXCIuLi8uLi8uLi9zcmMvY29tbW9uL3NsYWNrL2FkZHJlc3NDaGFubmVsc1wiO1xuXG5pbXBvcnQgeyBJbnRlcnByZXRlZExvZyB9IGZyb20gXCIuLi8uLi8uLi9zcmMvc3BpL2xvZy9JbnRlcnByZXRlZExvZ1wiO1xuaW1wb3J0IHsgcmVwb3J0RmFpbHVyZUludGVycHJldGF0aW9uVG9MaW5rZWRDaGFubmVscyB9IGZyb20gXCIuLi8uLi8uLi9zcmMvdXRpbC9zbGFjay9yZXBvcnRGYWlsdXJlSW50ZXJwcmV0YXRpb25Ub0xpbmtlZENoYW5uZWxzXCI7XG5cbmRlc2NyaWJlKFwiUmVwb3J0aW5nIGZhaWx1cmUgaW50ZXJwcmV0YXRpb25cIiwgKCkgPT4ge1xuXG4gICAgY2xhc3MgQWRkcmVzc0NoYW5uZWxzU3B5IHtcbiAgICAgICAgcHVibGljIG1lc3NhZ2VzU2VudDogU2xhY2tNZXNzYWdlW10gPSBbXTtcbiAgICAgICAgZ2V0IHNlbnRGdWxsTG9nKCkge1xuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5tZXNzYWdlc1NlbnQuZmluZChtID0+IChtIGFzIGFueSkuZmlsZVR5cGUgPT09IFwidGV4dFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZha2VBZGRyZXNzQ2hhbm5lbHMoKTogW0FkZHJlc3NDaGFubmVscywgQWRkcmVzc0NoYW5uZWxzU3B5XSB7XG4gICAgICAgIGNvbnN0IHNweSA9IG5ldyBBZGRyZXNzQ2hhbm5lbHNTcHkoKTtcbiAgICAgICAgY29uc3QgYWMgPSBhc3luYyAobXNnLCBvcHRzKSA9PiB7XG4gICAgICAgICAgICBzcHkubWVzc2FnZXNTZW50LnB1c2gobXNnKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFthYywgc3B5XTtcbiAgICB9XG5cbiAgICBpdChcIlJlcG9ydHMgdGhlIGZ1bGwgbG9nIGlmIHJlcXVlc3RlZFwiLCBhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgY29uc3QgW2FjLCBzcHldID0gZmFrZUFkZHJlc3NDaGFubmVscygpO1xuXG4gICAgICAgIGNvbnN0IGludGVycHJldGVkTG9nOiBJbnRlcnByZXRlZExvZyA9IHtcbiAgICAgICAgICAgIHJlbGV2YW50UGFydDogXCJidXN0ZWRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSGlcIixcbiAgICAgICAgICAgIGluY2x1ZGVGdWxsTG9nOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmdWxsTG9nID0ge2xvZzogXCJ5b3UgYXJlIHNvIGJ1c3RlZFwifTtcbiAgICAgICAgYXdhaXQgcmVwb3J0RmFpbHVyZUludGVycHJldGF0aW9uVG9MaW5rZWRDaGFubmVscyhcInN0ZXBOYW1lXCIsXG4gICAgICAgICAgICBpbnRlcnByZXRlZExvZywgZnVsbExvZywge3NoYTogXCJhYmNcIn0gYXMgUmVtb3RlUmVwb1JlZiwgYWMpO1xuXG4gICAgICAgIGFzc2VydChzcHkuc2VudEZ1bGxMb2cpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJEb2VzIG5vdCBzZW5kIHRoZSBmdWxsIGxvZyBpZiBzcGVjaWZpY2FsbHkgdW5yZXF1ZXN0ZWRcIiwgYXN5bmMgKCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IFthYywgc3B5XSA9IGZha2VBZGRyZXNzQ2hhbm5lbHMoKTtcblxuICAgICAgICBjb25zdCBpbnRlcnByZXRlZExvZzogSW50ZXJwcmV0ZWRMb2cgPSB7XG4gICAgICAgICAgICByZWxldmFudFBhcnQ6IFwiYnVzdGVkXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkhpXCIsXG4gICAgICAgICAgICBpbmNsdWRlRnVsbExvZzogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZ1bGxMb2cgPSB7dXJsOiBcImhlcmVcIiwgbG9nOiBcInlvdSBhcmUgc28gYnVzdGVkXCJ9O1xuICAgICAgICBhd2FpdCByZXBvcnRGYWlsdXJlSW50ZXJwcmV0YXRpb25Ub0xpbmtlZENoYW5uZWxzKFwic3RlcE5hbWVcIixcbiAgICAgICAgICAgIGludGVycHJldGVkTG9nLCBmdWxsTG9nLCB7c2hhOiBcImFiY1wifSBhcyBSZW1vdGVSZXBvUmVmLCBhYyk7XG5cbiAgICAgICAgYXNzZXJ0KCFzcHkuc2VudEZ1bGxMb2cpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJEb2VzIG5vdCByZXBvcnQgdGhlIGZ1bGwgbG9nIGlmIHVuc3BlY2lmaWVkLCBhbmQgdGhlIGxvZyBpcyBhdmFpbGFibGUgYXQgYSB1cmxcIiwgYXN5bmMgKCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IFthYywgc3B5XSA9IGZha2VBZGRyZXNzQ2hhbm5lbHMoKTtcblxuICAgICAgICBjb25zdCBpbnRlcnByZXRlZExvZzogSW50ZXJwcmV0ZWRMb2cgPSB7XG4gICAgICAgICAgICByZWxldmFudFBhcnQ6IFwiYnVzdGVkXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkhpXCIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZ1bGxMb2cgPSB7dXJsOiBcImhlcmVcIiwgbG9nOiBcInlvdSBhcmUgc28gYnVzdGVkXCJ9O1xuICAgICAgICBhd2FpdCByZXBvcnRGYWlsdXJlSW50ZXJwcmV0YXRpb25Ub0xpbmtlZENoYW5uZWxzKFwic3RlcE5hbWVcIixcbiAgICAgICAgICAgIGludGVycHJldGVkTG9nLCBmdWxsTG9nLCB7c2hhOiBcImFiY1wifSBhcyBSZW1vdGVSZXBvUmVmLCBhYyk7XG5cbiAgICAgICAgYXNzZXJ0KCFzcHkuc2VudEZ1bGxMb2cpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJSZXBvcnRzIHRoZSBmdWxsIGxvZyBpZiB1bnNwZWNpZmllZCwgYnV0IHRoZSBsb2cgZG9lcyBub3QgaGF2ZSBhIHVybFwiLCBhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgY29uc3QgW2FjLCBzcHldID0gZmFrZUFkZHJlc3NDaGFubmVscygpO1xuXG4gICAgICAgIGNvbnN0IGludGVycHJldGVkTG9nOiBJbnRlcnByZXRlZExvZyA9IHtcbiAgICAgICAgICAgIHJlbGV2YW50UGFydDogXCJidXN0ZWRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSGlcIixcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZnVsbExvZyA9IHtsb2c6IFwieW91IGFyZSBzbyBidXN0ZWRcIn07XG4gICAgICAgIGF3YWl0IHJlcG9ydEZhaWx1cmVJbnRlcnByZXRhdGlvblRvTGlua2VkQ2hhbm5lbHMoXCJzdGVwTmFtZVwiLFxuICAgICAgICAgICAgaW50ZXJwcmV0ZWRMb2csIGZ1bGxMb2csIHtzaGE6IFwiYWJjXCJ9IGFzIFJlbW90ZVJlcG9SZWYsIGFjKTtcblxuICAgICAgICBhc3NlcnQoc3B5LnNlbnRGdWxsTG9nKTtcbiAgICB9KTtcblxufSk7XG4iXX0=