"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Project_1 = require("../../project/Project");
function toEditor(ed) {
    return (proj, ctx, params) => ed(proj, ctx, params)
        .then(r => 
    // See what it returns
    Project_1.isProject(r) ?
        successfulEdit(r, undefined) :
        r)
        .catch(err => failedEdit(proj, err));
}
exports.toEditor = toEditor;
function successfulEdit(p, edited) {
    return {
        target: p,
        success: true,
        edited,
    };
}
exports.successfulEdit = successfulEdit;
function failedEdit(p, error, edited = false) {
    return {
        target: p,
        success: false,
        error,
        edited,
    };
}
exports.failedEdit = failedEdit;
function flushAndSucceed(p) {
    return p.flush().then(pf => successfulEdit(pf, undefined));
}
exports.flushAndSucceed = flushAndSucceed;
//# sourceMappingURL=projectEditor.js.map